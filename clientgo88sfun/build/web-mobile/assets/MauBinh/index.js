window.__require=function t(e,o,i){function r(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var d=o[a]={exports:{}};e[a][0].call(d.exports,function(t){return r(e[a][1][t]||t)},d,d.exports,t,e,o,i)}return o[a].exports}for(var n="function"==typeof __require&&__require,a=0;a<i.length;a++)r(i[a]);return r}({"MauBinh.CardUtil":[function(t,e,o){"use strict";cc._RF.push(e,"d5f92nEHMdNj4gHuhmCMctb","MauBinh.CardUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.common=void 0;var i,r=cc._decorator;r.ccclass,r.property,function(t){var e=function(){function t(){}return t.getCardInfo=function(t){this.id=t,this.so=this.getSoById(t),this.chat=this.getChatById(t),this.diem=this.getDiemById(t)},t.getSoById=function(t){return Math.floor(t/4)},t.getDiemById=function(t){return Math.floor(t/4)+1},t.getChatById=function(t){return t%4},t.getNormalId=function(t){return t},t.getNumber=function(t){return Math.floor(t/4)+2},t}();t.CardUtils=e}(i=o.common||(o.common={})),o.default=i.CardUtils,cc._RF.pop()},{}],"MauBinh.Card":[function(t,e,o){"use strict";cc._RF.push(e,"a2d4bIJJopJlrCYY5D9/4Rr","MauBinh.Card"),Object.defineProperty(o,"__esModule",{value:!0}),o.maubinh=void 0;var i,r=t("./MauBinh.Cmd");(function(t){var e=function(){function t(t,e){this.id=t,this.display=e}return t.prototype.setCard=function(t,e){this.id=4*(t-2)+e},t.prototype.getNumber=function(){return Math.floor(this.id/4)+2},t.prototype.getSuit=function(){return this.id%4},t.prototype.getId=function(){return this.id},t.prototype.getColor=function(){var t=this.getSuit();return t==r.default.Code.SPADE||t==r.default.Code.CLUB?r.default.Code.BLACK:t==r.default.Code.DIAMOND||t==r.default.Code.HEART?r.default.Code.RED:null},t}();t.MauBinhCard=e})(i=o.maubinh||(o.maubinh={})),o.default=i.MauBinhCard,cc._RF.pop()},{"./MauBinh.Cmd":"MauBinh.Cmd"}],"MauBinh.Cmd":[function(t,e,o){"use strict";cc._RF.push(e,"73889UV1D1OeI4ehXzc0OG9","MauBinh.Cmd");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.cmd=void 0;var n,a=t("../../Loading/src/Configs"),s=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),c=t("../../Lobby/LobbyScript/Script/networks/Network.OutPacket");(function(t){var e=function(){function t(){}return t.LOGIN=1,t.TOPSERVER=1001,t.CMD_PINGPONG=1050,t.CMD_JOIN_ROOM=3001,t.CMD_RECONNECT_ROOM=3002,t.MONEY_BET_CONFIG=3003,t.JOIN_ROOM_FAIL=3004,t.CHAT_ROOM=3008,t.CREATE_ROOM=3013,t.GET_LIST_ROOM=3014,t.JOIN_GAME_ROOM_BY_ID=3015,t.BINH_SO_CHI=3101,t.BAT_DAU=3102,t.KET_THUC=3103,t.AUTO_BINH_SO_CHI=3104,t.CHIA_BAI=3105,t.BAO_BINH=3106,t.TU_DONG_BAT_DAU=3107,t.XEP_LAI=3108,t.DAT_CUOC=3109,t.THONG_TIN_BAN_CHOI=3110,t.DANG_KY_THOAT_PHONG=3111,t.VAO_GA=3112,t.DOI_CHUONG=3113,t.MOI_DAT_CUOC=3114,t.CHEAT_CARDS=3115,t.DANG_KY_CHOI_TIEP=3116,t.UPDATE_OWNER_ROOM=3117,t.JOIN_ROOM_SUCCESS=3118,t.LEAVE_GAME=3119,t.NOTIFY_KICK_FROM_ROOM=3120,t.NEW_USER_JOIN=3121,t.NOTIFY_USER_GET_JACKPOT=3122,t.UPDATE_MATCH=3123,t.PLAYER_STATUS_OUT_GAME=0,t.PLAYER_STATUS_VIEWER=1,t.PLAYER_STATUS_SITTING=2,t.PLAYER_STATUS_PLAYING=3,t.TYPE_SANH_RONG=0,t.TYPE_MUOI_BA_CAY_DONG_MAU=1,t.TYPE_MUOI_HAI_CAY_DONG_MAU=2,t.TYPE_BA_CAI_THUNG=3,t.TYPE_BA_CAI_SANH=4,t.TYPE_LUC_PHE_BON=5,t.TYPE_BINH_THUONG=6,t.TYPE_BINH_LUNG=7,t.GROUP_THUNG_PHA_SANH=0,t.GROUP_TU_QUY=1,t.GROUP_CU_LU=2,t.GROUP_THUNG=3,t.GROUP_SANH=4,t.GROUP_SAM_CO=5,t.GROUP_THU=6,t.GROUP_MOT_DOI=7,t.GROUP_MAU_THAU=8,t.LV_THUONG=0,t.LV_HA=1,t.LV_BINH_THUONG=2,t.BLACK=0,t.RED=1,t.SPADE=0,t.CLUB=1,t.DIAMOND=2,t.HEART=3,t.STATE_NO_START=0,t.STATE_PLAYING=1,t.STATE_END=2,t.MAX_PLAYER=4,t}();t.Code=e;var o=function(t){function o(o,i){var r=t.call(this)||this;return r.initData(100),r.setControllerId(1),r.setCmdId(e.LOGIN),r.packHeader(),r.putString(o),r.putString(i),r.updateSize(),r}return r(o,t),o}(c.default);t.CmdLogin=o;var i=function(t){function o(o,i,r){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(e.CMD_JOIN_ROOM),n.packHeader(),n.putInt(o),n.putInt(i),n.putLong(r),n.putInt(0),n.updateSize(),n}return r(o,t),o}(c.default);t.CmdJoinRoom=i;var n=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.CMD_RECONNECT_ROOM),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.CmdReconnectRoom=n;var u=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.DANG_KY_THOAT_PHONG),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.CmdSendRequestLeaveGame=u;var d=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.DANG_KY_CHOI_TIEP),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.CmdSendHoldRoom=d;var h=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.MONEY_BET_CONFIG),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.SendGetGameConfig=h;var l=function(t){function o(o){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.TOPSERVER),i.packHeader(),i.putByte(o),i.updateSize(),i}return r(o,t),o}(c.default);t.SendGetTopServer=l;var p=function(t){function o(o,i,r,n,a,s,c,u){var d=t.call(this)||this;return d.initData(100),d.setControllerId(1),d.setCmdId(e.CREATE_ROOM),d.packHeader(),d.putInt(o),d.putInt(i),d.putLong(r),d.putInt(n),d.putInt(a),d.putString(s),d.putString(c),d.putLong(u),d.updateSize(),d}return r(o,t),o}(c.default);t.SendCreateRoom=p;var f=function(t){function o(o,i){var r=t.call(this)||this;if(r.initData(100),r.setControllerId(1),r.setCmdId(e.CHEAT_CARDS),r.packHeader(),r.putByte(o),r.putByte(0),r.putShort(i.length),o)for(var n=0;n<i.length;n++)r.putByte(i[n]);return r.updateSize(),r}return r(o,t),o}(c.default);t.SendCardCheat=f;var C=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.CMD_PINGPONG),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.CmdSendPing=C;var g=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.GET_LIST_ROOM),o.packHeader(),o.putInt(a.default.App.MONEY_TYPE),o.putInt(e.MAX_PLAYER),o.putLong(-1),o.putInt(0),o.putInt(0),o.putInt(50),o.updateSize(),o}return r(o,t),o}(c.default);t.SendGetListRoom=g;var y=function(t){function o(o){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.JOIN_GAME_ROOM_BY_ID),i.packHeader(),i.putInt(o),i.putString(""),i.updateSize(),i}return r(o,t),o}(c.default);t.SendJoinRoomById=y;var m=function(t){function o(o,i){var r=t.call(this)||this;return r.initData(100),r.setControllerId(1),r.setCmdId(e.CHAT_ROOM),r.packHeader(),r.putByte(o?1:0),r.putString(encodeURI(i)),r.updateSize(),r}return r(o,t),o}(c.default);t.SendChatRoom=m;var v=function(t){function o(o,i,r){var n=t.call(this)||this;n.initData(100),n.setControllerId(1),n.setCmdId(e.BINH_SO_CHI),n.packHeader(),n.putShort(o.length);for(var a=0;a<o.length;a++)n.putByte(o[a]);for(n.putShort(i.length),a=0;a<i.length;a++)n.putByte(i[a]);for(n.putShort(r.length),a=0;a<r.length;a++)n.putByte(r[a]);return n.updateSize(),n}return r(o,t),o}(c.default);t.SendBinhSoChi=v;var _=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.BAO_BINH),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.SendBaoBinh=_;var S=function(t){function o(o,i,r){var n=t.call(this)||this;n.initData(100),n.setControllerId(1),n.setCmdId(e.AUTO_BINH_SO_CHI),n.packHeader(),n.putShort(o.length);for(var a=0;a<o.length;a++)n.putByte(o[a]);for(n.putShort(i.length),a=0;a<i.length;a++)n.putByte(i[a]);for(n.putShort(r.length),a=0;a<r.length;a++)n.putByte(r[a]);return n.updateSize(),n}return r(o,t),o}(c.default);t.SendAutoBinhSoChi=S;var R=function(t){function o(){var o=t.call(this)||this;return o.initData(100),o.setControllerId(1),o.setCmdId(e.XEP_LAI),o.packHeader(),o.updateSize(),o}return r(o,t),o}(c.default);t.SendXepLai=R;var b=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e}(s.default);t.ReceivedLogin=b;var T=function(t){function e(e){var o=t.call(this,e)||this;o.list=[];var i=o.getShort();o.list=[];for(var r=0;r<i;r++){var n={};n.id=o.getInt(),n.userCount=o.getByte(),n.limitPlayer=o.getByte(),n.maxUserPerRoom=o.getInt(),n.moneyType=o.getByte(),n.moneyBet=o.getInt(),n.requiredMoney=o.getInt(),n.rule=o.getByte(),n.nameRoom=o.getString(),n.key=o.getBool(),n.quyban=o.getLong(),o.list.push(n)}return o}return r(e,t),e}(s.default);t.ReceivedGetListRoom=T;var I=function(t){function e(e){var o,i=t.call(this,e)||this;for(i.myChair=i.getByte(),i.moneyBet=i.getLong(),i.roomId=i.getInt(),i.gameId=i.getInt(),i.moneyType=i.getByte(),i.rule=i.getByte(),i.playerSize=i.getShort(),i.playerStatus=[],o=0;o<i.playerSize;o++)i.playerStatus.push(i.getByte());for(i.playerSize=i.getShort(),i.playerInfos=[],o=0;o<i.playerSize;o++){var r={};r.nickName=i.getString(),r.avatar=i.getString(),r.money=i.getLong(),i.playerInfos.push(r)}return i.gameState=i.getByte(),i.gameAction=i.getByte(),i.countDownTime=i.getByte(),i}return r(e,t),e}(s.default);t.ReceivedJoinRoomSucceed=I;var P=function(t){function e(e){var o=t.call(this,e)||this;return o.isAutoStart=o.getBool(),o.timeAutoStart=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedAutoStart=P;var L=function(t){function e(e){var o=t.call(this,e)||this,i=o.getShort();o.cardList=[];for(var r=0;r<i;r++)o.cardList.push(o.getByte());return o.mauBinh=o.getByte(),o.gameId=o.getInt(),o.countdown=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedChiaBai=L;var N=function(t){function e(e){var o=t.call(this,e)||this;return o.chair=o.getByte(),o.nickName=o.getString(),o}return r(e,t),e}(s.default);t.ReceivedUserLeaveRoom=N;var B=function(t){function e(e){var o=t.call(this,e)||this;return o.info={},o.info.nickName=o.getString(),o.info.avatar=o.getString(),o.info.money=o.getLong(),o.myChair=o.getByte(),o.uStatus=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedUserJoinRoom=B;var O=function(t){function e(e){var o=t.call(this,e)||this;o.myChair=o.getByte();var i=o.getShort();o.hasInfo=[];for(var r=0;r<i;r++)o.hasInfo.push(o.getBool());for(o.infos=[],r=0;r<i;r++){var n={};o.hasInfo[r]&&(n.nickName=o.getString(),n.avatar=o.getString(),n.money=o.getLong(),n.status=o.getInt()),o.infos.push(n)}return o}return r(e,t),e}(s.default);t.ReceivedUpdateMatch=O;var A=function(t){function e(e){var o=t.call(this,e)||this;return o.outChair=o.getByte(),o.isOutRoom=o.getBool(),o}return r(e,t),e}(s.default);t.ReceivedNotifyRegOutRoom=A;var M=function(t){function e(e){var o=t.call(this,e)||this;return o.reason=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedKickOff=M;var G=function(t){function e(e){var o=t.call(this,e)||this;return o.timeDatCuoc=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedMoiDatCuoc=G;var H=function(t){function e(e){var o=t.call(this,e)||this;o.chairMoBai=o.getByte(),o.cardSize=o.getShort(),o.cards=[];for(var i=0;i<o.cardSize;i++)o.cards.push(o.getByte());return o}return r(e,t),e}(s.default);t.ReceivedMoBai=H;var w=function(t){function e(e){var o=t.call(this,e)||this;o.playerResultList=[];for(var i=o.getShort(),r=0;r<i;r++){var n={};n.chairIndex=o.getByte(),n.maubinhType=o.getInt();var a=o.getShort();n.chi1=[];for(var s=0;s<a;s++)n.chi1.push(o.getByte());for(a=o.getShort(),n.chi2=[],s=0;s<a;s++)n.chi2.push(o.getByte());for(a=o.getShort(),n.chi3=[],s=0;s<a;s++)n.chi3.push(o.getByte());for(n.moneyInChi=[],a=o.getShort(),s=0;s<a;s++)n.moneyInChi.push(o.getLong());n.moneyAt=o.getLong(),n.moneyCommon=o.getLong(),n.moneySap=o.getLong(),n.currentMoney=o.getLong(),o.playerResultList.push(n)}return o.timeEndGame=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedEndGame=w;var U=function(t){function e(e){var o=t.call(this,e)||this;return o.chuongChair=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedDoiChuong=U;var E=function(t){function e(e){var o=t.call(this,e)||this;return o.chair=o.getByte(),o.isIcon=o.getBool(),o.content=decodeURI(o.getString()),o.nickname=o.getString(),o}return r(e,t),e}(s.default);t.ReceivedChatRoom=E;var D=function(e){function o(o){var i=e.call(this,o)||this;i.myChair=i.getByte(),i.gameState=i.getByte(),i.gameAction=i.getByte(),i.countdownTime=i.getByte(),i.moneyBet=i.getLong(),i.moneyType=i.getByte(),i.gameId=i.getInt(),i.roomId=i.getInt(),i.rule=i.getByte();var r=i.getShort();i.hasInfo=[];for(var n=0;n<r;n++)i.hasInfo[n]=i.getBool();for(i.players=[],n=0;n<t.Code.MAX_PLAYER;n++)if(i.hasInfo[n]){if(i.players[n]={},i.gameState==t.Code.STATE_PLAYING){if(n==i.myChair){r=i.getShort(),i.players[n].cardList=[];for(var a=0;a<r;a++)i.players[n].cardList.push(i.getByte())}}else if(i.gameState==t.Code.STATE_END){for(r=i.getShort(),i.players[n].cardList=[],a=0;a<r;a++)i.players[n].cardList.push(i.getByte());i.players[n].maubinhType=i.getByte(),i.players[n].moneyCommon=i.getLong()}i.players[n].sochi=i.getBool(),i.players[n].status=i.getByte(),i.players[n].avatar=i.getString(),i.players[n].userId=i.getInt(),i.players[n].nickName=i.getString(),i.players[n].currentMoney=i.getLong()}return i}return r(o,e),o}(s.default);t.ReceivedGameInfo=D;var k=function(t){function e(e){var o=t.call(this,e)||this;return o.rankType=o.getByte(),o.topDay_money=o.getString(),o.topWeek_money=o.getString(),o.topMonth_money=o.getString(),o.topDay_number=o.getString(),o.topWeek_number=o.getString(),o.topMonth_number=o.getString(),o}return r(e,t),e}(s.default);t.ReceivedTopServer=k;var F=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e}(s.default);t.ReceivedJoinRoomFail=F;var x=function(t){function e(e){var o=t.call(this,e)||this;o.listSize=o.getShort(),o.list=[];for(var i=0;i<o.listSize;i++){var r={};r.maxUserPerRoom=o.getByte(),r.moneyType=o.getByte(),r.moneyBet=o.getLong(),r.moneyRequire=o.getLong(),r.nPersion=o.getInt(),o.list.push(r)}return o}return r(e,t),e}(s.default);t.ReceivedMauBinhConfig=x;var Y=function(t){function e(e){var o=t.call(this,e)||this;return o.chair=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedBinhSoChi=Y;var V=function(t){function e(e){var o=t.call(this,e)||this;return o.chair=o.getByte(),o}return r(e,t),e}(s.default);t.ReceivedXepLai=V})(n=o.cmd||(o.cmd={})),o.default=n,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/Network.OutPacket":void 0}],"MauBinh.Controller":[function(t,e,o){"use strict";cc._RF.push(e,"97c85/a1ahNR5WoU+8m1+Ga","MauBinh.Controller");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Loading/src/Configs"),s=t("./MauBinh.Cmd"),c=t("./MauBinh.NetworkClient"),u=t("./MauBinh.CardUtil"),d=t("./MauBinh.DetectPlayerCards"),h=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),p=t("../../Lobby/LobbyScript/Script/common/Utils"),f=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),C=t("../../Lobby/LobbyScript/Script/networks/Network.Cmd"),g=[],y=[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]],m=cc._decorator,v=m.ccclass,_=m.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UI_ChooseRoom=null,e.labelNickName=null,e.labelCoin=null,e.contentListRooms=null,e.prefabItemRoom=null,e.scrollListRoom=null,e.edtFindRoom=null,e.btnHideRoomFull=null,e.isInitedUIRoom=!1,e.UI_Playing=null,e.meCards=null,e.groupPlayers=null,e.spriteCards=[],e.spriteCardBack=null,e.cardsDeal=null,e.btnLeaveRoom=null,e.labelRoomId=null,e.labelRoomBet=null,e.actionBetting=null,e.cardMove=null,e.suggestTarget=null,e.btnSoChi=null,e.btnCombining=null,e.tableCurrentChi=null,e.notifyTimeStart=null,e.notifyTimeEnd=null,e.notifyTimeBet=null,e.fxSoChiTotal=null,e.spriteSoChiTotal=[],e.UI_Chat=null,e.edtChatInput=null,e.popupNodity=null,e.labelNotifyContent=null,e.popupGuide=null,e.spriteGroupCard=[],e.seatOwner=null,e.currentRoomBet=null,e.gameState=null,e.minutes=null,e.seconds=null,e.timeAutoStart=null,e.timeEnd=null,e.timeBet=null,e.intervalWaitting=null,e.intervalEnd=null,e.intervalBetting=null,e.currentCard=null,e.timeoutChiaBaiDone=null,e.timeoutBetting=null,e.isTinhAce=null,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.seatOwner=-1,this.initConfigPlayer()},e.prototype.start=function(){this.showUIRooms(),h.default.instance.showErrLoading("\u0110ang k\u1ebft n\u1ed1i t\u1edbi server..."),c.default.getInstance().addOnOpen(function(){h.default.instance.showErrLoading("\u0110ang \u0111\u0103ng nh\u1eadp..."),c.default.getInstance().send(new C.default.SendLogin(a.default.Login.Nickname,a.default.Login.AccessToken))},this),c.default.getInstance().addOnClose(function(){h.default.instance.loadScene("Lobby")},this),c.default.getInstance().connect()},e.prototype.joinRoom=function(t){h.default.instance.showLoading(!0),c.default.getInstance().send(new s.default.SendJoinRoomById(t.id))},e.prototype.refeshListRoom=function(){this.contentListRooms.removeAllChildren(!0),c.default.getInstance().send(new s.default.SendGetListRoom)},e.prototype.findRoomId=function(){var t=this.edtFindRoom.string.trim();if(t.length>0)for(var e=parseInt(t),o=0;o<this.contentListRooms.childrenCount;o++)this.contentListRooms.children[o].getComponent("MauBinh.ItemRoom").roomInfo.id!=e&&(this.contentListRooms.children[o].active=!1);else for(o=0;o<this.contentListRooms.childrenCount;o++)this.contentListRooms.children[o].active=!0},e.prototype.hideRoomFull=function(){if(this.btnHideRoomFull.isChecked)for(var t=0;t<this.contentListRooms.childrenCount;t++){var e=this.contentListRooms.children[t].getComponent("MauBinh.ItemRoom");e.roomInfo.userCount==e.roomInfo.maxUserPerRoom&&(this.contentListRooms.children[t].active=!1)}else for(t=0;t<this.contentListRooms.childrenCount;t++)this.contentListRooms.children[t].active=!0},e.prototype.showUIRooms=function(){var t=this;this.UI_ChooseRoom.active=!0,this.isInitedUIRoom?l.default.send(l.default.USER_UPDATE_COIN):(this.labelNickName.string=a.default.Login.Nickname,l.default.register(l.default.USER_UPDATE_COIN,function(){t.labelCoin.string=p.default.formatNumber(a.default.Login.Coin)},this),l.default.send(l.default.USER_UPDATE_COIN),this.setupListener())},e.prototype.closeUIRoom=function(){this.UI_ChooseRoom.active=!1},e.prototype.createRoom=function(){},e.prototype.playingNow=function(){for(var t=[],e=0;e<this.contentListRooms.childrenCount;e++)(i=this.contentListRooms.children[e].getComponent("MauBinh.ItemRoom")).roomInfo.requiredMoney<a.default.Login.Coin&&t.push(e);if(t.length>0){var o=t[0];for(e=0;e<t.length;e++){var i=this.contentListRooms.children[t[e]].getComponent("MauBinh.ItemRoom"),r=this.contentListRooms.children[o].getComponent("MauBinh.ItemRoom");i.roomInfo.userCount>r.roomInfo.userCount&&(o=t[e])}var n=this.contentListRooms.children[o].getComponent("MauBinh.ItemRoom");this.joinRoom(n.roomInfo)}else h.default.instance.alertDialog.showMsg("Kh\xf4ng \u0111\u1ee7 ti\u1ec1n tham gia\nb\u1ea5t k\u1ef3 ph\xf2ng n\xe0o !")},e.prototype.showUIChat=function(){this.UI_Chat.active=!0,this.UI_Chat.runAction(cc.moveTo(.5,420,0))},e.prototype.closeUIChat=function(){this.UI_Chat.runAction(cc.moveTo(.5,1e3,0))},e.prototype.chatEmotion=function(t,e){c.default.getInstance().send(new s.default.SendChatRoom(1,e)),this.closeUIChat()},e.prototype.chatMsg=function(){this.edtChatInput.string.trim().length>0&&(c.default.getInstance().send(new s.default.SendChatRoom(0,this.edtChatInput.string)),this.edtChatInput.string="",this.closeUIChat())},e.prototype.showPopupGuide=function(){this.popupGuide.active=!0},e.prototype.closePopupGuide=function(){this.popupGuide.active=!1},e.prototype.backToLobby=function(){c.default.getInstance().close(),h.default.instance.loadScene("Lobby")},e.prototype.showUIPlaying=function(){this.UI_Playing.active=!0},e.prototype.closeUIPlaying=function(){this.actionLeaveRoom()},e.prototype.setupMatch=function(t){this.showUIPlaying(),this.closeUIChat();var e=t.myChair,o=t.moneyBet,i=t.roomId,r=(t.gameId,t.moneyType,t.rule),n=(t.playerSize,t.playerStatus),c=t.playerInfos,u=t.gameState,d=(t.gameAction,t.countDownTime);this.labelRoomId.string="M\u1eacU BINH - PH\xd2NG: "+i,this.labelRoomBet.string="M\u1ee8C C\u01af\u1ee2C: "+p.default.formatNumber(o)+"$",this.isTinhAce=1==r,this.currentRoomBet=o,u==s.default.Code.STATE_PLAYING&&this.startBettingCountDown(d),g[0].playerId=a.default.Login.Nickname,g[0].playerPos=e;for(var h=[],l=[],f=[],C=0;C<c.length;C++)""!==c[C].nickName&&(h.push(C),l.push(c[C]),f.push(n[C]));for(var m=0;m<g.length;m++)g[m].playerPos=y[e][m];for(C=0;C<g.length;C++){var v=h.indexOf(g[C].playerPos),_=g[C].seatId;this.getPlayerHouse(_).resetPlayerInfo(_),v>-1?(f[v]==s.default.Code.PLAYER_STATUS_SITTING||f[v]==s.default.Code.PLAYER_STATUS_PLAYING?(g[C].isViewer=!1,this.getPlayerHouse(_).setIsViewer(!1),0!=_&&u==s.default.Code.STATE_PLAYING&&(this.getPlayerHouse(_).playFxDangXep(),this.getPlayerHouse(_).showCardReal(!0),this.getPlayerHouse(_).showCardReady(!1))):(g[C].isViewer=!0,this.getPlayerHouse(_).setIsViewer(!0),this.getPlayerHouse(_).playFxViewer()),this.setupSeatPlayer(_,l[v])):(this.getPlayerHouse(_).showBtnInvite(!0),g[C].isViewer=!0)}},e.prototype.startWaittingCountDown=function(t){var e=this;this.timeAutoStart=t,this.setTimeWaittingCountDown(),this.notifyTimeStart.active=!0,this.unschedule(this.intervalWaitting),this.schedule(this.intervalWaitting=function(){e.timeAutoStart--,e.setTimeWaittingCountDown(),e.timeAutoStart<1&&(e.unschedule(e.intervalWaitting),e.notifyTimeStart.active=!1)},1)},e.prototype.setTimeWaittingCountDown=function(){this.seconds=Math.floor(this.timeAutoStart%60),this.notifyTimeStart.getComponent(cc.Label).string=" B\u1eaft \u0111\u1ea7u sau : "+this.seconds+"s "},e.prototype.startEndCountDown=function(t){var e=this;this.timeEnd=t,this.setTimeEndCountDown(),this.notifyTimeEnd.active=!0,this.unschedule(this.intervalEnd),this.schedule(this.intervalEnd=function(){e.timeEnd--,e.setTimeEndCountDown(),e.timeEnd<1&&(e.unschedule(e.intervalEnd),e.notifyTimeEnd.active=!1)},1)},e.prototype.setTimeEndCountDown=function(){this.seconds=Math.floor(this.timeEnd%60),this.notifyTimeEnd.getComponent(cc.Label).string=" K\u1ebft th\xfac sau : "+this.seconds+"s "},e.prototype.startBettingCountDown=function(t){var e=this;this.timeBet=t,this.actionBetting.active=!0,this.processBetting(1),this.unschedule(this.intervalBetting),this.schedule(this.intervalBetting=function(){e.timeBet--;var o=(e.timeBet/t).toFixed(1);e.processBetting(o),e.timeBet<1&&(e.unschedule(e.intervalBetting),e.actionBetting.active=!1)},1)},e.prototype.processBetting=function(t){this.actionBetting.children[0].getComponent(cc.Sprite).fillRange=t},e.prototype.getCardsScore=function(t){for(var e=0,o=0;o<3;o++)e+=u.default.getDiemById(t[o]);return 0==(e%=10)&&(e=10),e},e.prototype.setupListener=function(){var t=this;c.default.getInstance().addListener(function(e){switch(new f.default(e).getCmdId()){case s.default.Code.LOGIN:h.default.instance.showLoading(!1),t.refeshListRoom(),c.default.getInstance().send(new s.default.CmdReconnectRoom);break;case s.default.Code.TOPSERVER:h.default.instance.showLoading(!1),(i=new s.default.ReceivedTopServer(e)).rankType,i.topDay_money,i.topWeek_money,i.topMonth_money;break;case s.default.Code.CMD_PINGPONG:case s.default.Code.CMD_JOIN_ROOM:case s.default.Code.CMD_RECONNECT_ROOM:case s.default.Code.MONEY_BET_CONFIG:h.default.instance.showLoading(!1);break;case s.default.Code.JOIN_ROOM_FAIL:h.default.instance.showLoading(!1);var o="L\u1ed7i "+(i=new s.default.ReceivedJoinRoomFail(e)).getError()+", kh\xf4ng x\xe1c \u0111\u1ecbnh.";switch(i.getError()){case 1:o="L\u1ed7i ki\u1ec3m tra th\xf4ng tin!";break;case 2:o="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 3:o="B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n v\xe0o ph\xf2ng ch\u01a1i n\xe0y!";break;case 4:o="Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c ph\xf2ng th\xedch h\u1ee3p. Vui l\xf2ng th\u1eed l\u1ea1i sau!";break;case 5:o="M\u1ed7i l\u1ea7n v\xe0o ph\xf2ng ph\u1ea3i c\xe1ch nhau 10 gi\xe2y!";break;case 6:o="H\u1ec7 th\u1ed1ng b\u1ea3o tr\xec!";break;case 7:o="Kh\xf4ng t\xecm th\u1ea5y ph\xf2ng ch\u01a1i!";break;case 8:o="M\u1eadt kh\u1ea9u ph\xf2ng ch\u01a1i kh\xf4ng \u0111\xfang!";break;case 9:o="Ph\xf2ng ch\u01a1i \u0111\xe3 \u0111\u1ee7 ng\u01b0\u1eddi!";break;case 10:o="B\u1ea1n b\u1ecb ch\u1ee7 ph\xf2ng kh\xf4ng cho v\xe0o b\xe0n!"}h.default.instance.alertDialog.showMsg(o);break;case s.default.Code.GET_LIST_ROOM:for(var i=new s.default.ReceivedGetListRoom(e),r=0;r<i.list.length;r++){var n=i.list[r],C=cc.instantiate(t.prefabItemRoom);C.getComponent("MauBinh.ItemRoom").initItem(n),t.contentListRooms.addChild(C)}t.scrollListRoom.scrollToTop(.2);break;case s.default.Code.JOIN_GAME_ROOM_BY_ID:h.default.instance.showLoading(!1);break;case s.default.Code.BINH_SO_CHI:h.default.instance.showLoading(!1);var m=(i=new s.default.ReceivedBinhSoChi(e)).chair,v=t.findPlayerSeatByPos(m);if(-1!=v)if(0==v){t.btnCombining.active=!0,t.btnSoChi.active=!1,t.getPlayerHouse(0).scaleCardReal(.45);for(var _=0;_<13;_++)t.meCards.children[_].getComponent("MauBinh.MeCard").offDrag()}else t.getPlayerHouse(v).playFxXepXong();break;case s.default.Code.XEP_LAI:h.default.instance.showLoading(!1),m=(i=new s.default.ReceivedXepLai(e)).chair;var S=t.findPlayerSeatByPos(m);if(-1!=S)if(0==S)for(t.btnCombining.active=!1,t.btnSoChi.active=!0,t.getPlayerHouse(0).scaleCardReal(1),_=0;_<13;_++)t.meCards.children[_].getComponent("MauBinh.MeCard").activeDrag();else t.getPlayerHouse(S).playFxDangXep();break;case s.default.Code.KET_THUC:for(h.default.instance.showLoading(!1),i=new s.default.ReceivedEndGame(e),t.actionHoldRoom(),t.unschedule(t.timeoutBetting),t.actionBetting.active=!1,t.btnSoChi.active=!1,t.btnCombining.active=!1,t.tableCurrentChi.active=!1,_=0;_<13;_++)t.meCards.children[_].getComponent("MauBinh.MeCard").offDrag(),t.meCards.children[_].getComponent("MauBinh.MeCard").resetState();var R=i.playerResultList;for(i.timeEndGame,t.unschedule(t.intervalBetting),t.actionBetting.active=!1,_=0;_<R.length;_++){var b=R[_],T=t.findPlayerSeatByPos(b.chairIndex);if(-1!=T&&0==T){for(var I=[b.chi3[0],b.chi3[1],b.chi3[2],b.chi2[0],b.chi2[1],b.chi2[2],b.chi2[3],b.chi2[4],b.chi1[0],b.chi1[1],b.chi1[2],b.chi1[3],b.chi1[4]],P=0;P<13;P++){var L=u.default.getNormalId(I[P]);t.meCards.children[P].children[1].getComponent(cc.Sprite).spriteFrame=t.spriteCards[L]}a.default.Login.Coin=b.currentMoney,l.default.send(l.default.USER_UPDATE_COIN)}}for(_=0;_<s.default.Code.MAX_PLAYER;_++)t.getPlayerHouse(_).resetResultGame(),t.getPlayerHouse(_).prepareFxAction();t.getPlayerHouse(0).scaleCardReal(.45),t.soChi(1,R);break;case s.default.Code.CHIA_BAI:h.default.instance.showLoading(!1),i=new s.default.ReceivedChiaBai(e),t.btnSoChi.active=!1,t.btnCombining.active=!1;var N=i.cardList,B=i.mauBinh,O=(i.gameId,i.countdown);clearTimeout(t.timeoutBetting),t.timeoutBetting=setTimeout(function(){t.startBettingCountDown(O)},3e3),t.currentCard=N;var A=[t.currentCard[0],t.currentCard[1],t.currentCard[2]],M=[t.currentCard[3],t.currentCard[4],t.currentCard[5],t.currentCard[6],t.currentCard[7]],G=[t.currentCard[8],t.currentCard[9],t.currentCard[10],t.currentCard[11],t.currentCard[12]];t.logCard(t.currentCard),t.logCard(A),t.logCard(M),t.logCard(G);var H=t.getNumPlayers(),w=H.length;for(_=0;_<4*s.default.Code.MAX_PLAYER;_++)t.cardsDeal.children[_].active=!(_>=4*w),t.cardsDeal.children[_].setPosition(0,0);for(P=0;P<4;P++)for(var U=0;U<w;U++){var E=H[U];if(-1!==E){var D=t.cardsDeal.children[P*w+U],k=new cc.Vec2(t.groupPlayers.children[E].position.x,t.groupPlayers.children[E].position.y);D.runAction(cc.sequence(cc.delayTime(.1*(P*w+U)),cc.moveTo(.2,k)))}}var F=1e3*(.4+.1*(3*w+(w-1)));clearTimeout(t.timeoutChiaBaiDone),t.timeoutChiaBaiDone=setTimeout(function(){for(var e=0;e<4*s.default.Code.MAX_PLAYER;e++)t.cardsDeal.children[e].active=!1;for(e=0;e<w;e++){var o=H[e];if(-1!==o)if(0==o){t.getPlayerHouse(o).resetCardReady(o),t.getPlayerHouse(o).showCardReal(!1),t.getPlayerHouse(o).showCardReady(!0),t.getPlayerHouse(0).prepareToTransform();for(var i=0;i<13;i++){var r=u.default.getNormalId(N[i]),n=t.meCards.children[i];n.active=!0,n.getComponent("MauBinh.MeCard").setupCard({pos:i,is_Upper:!1,card:N[i]},t.spriteCards[r]),t.getPlayerHouse(0).transformToCardReal(i,t.spriteCards[r],0)}t.actionAutoBinhSoChi(),t.btnSoChi.active=!0;var a=B!=s.default.Code.TYPE_BINH_LUNG,c=t.getBinhName(B);t.getPlayerHouse(0).resetResultGame(),B!=s.default.Code.TYPE_BINH_THUONG&&t.getPlayerHouse(0).playFxResultGeneral(0,a,c,0);for(var h=0;h<w;h++)0!=H[h]&&t.getPlayerHouse(H[h]).playFxDangXep();var l=new d.default;l.initCard(t.currentCard);var p=l.getPlayerCardsInfo(t.isTinhAce),f=[t.currentCard[0],t.currentCard[1],t.currentCard[2]],C=[t.currentCard[3],t.currentCard[4],t.currentCard[5],t.currentCard[6],t.currentCard[7]],g=[t.currentCard[8],t.currentCard[9],t.currentCard[10],t.currentCard[11],t.currentCard[12]];t.highLightCards(3,p.chiCuoi,f),t.highLightCards(2,p.chiGiua,C),t.highLightCards(1,p.chiDau,g),t.tableCurrentChi.active=!0,t.tableCurrentChi.children[1].getComponent(cc.Label).string="1. "+t.getChiName(p.chiDau),t.tableCurrentChi.children[2].getComponent(cc.Label).string="2. "+t.getChiName(p.chiGiua),t.tableCurrentChi.children[3].getComponent(cc.Label).string="3. "+t.getChiName(p.chiCuoi)}else t.getPlayerHouse(o).showCardReal(!0),t.getPlayerHouse(o).showCardReady(!1)}},F);break;case s.default.Code.TU_DONG_BAT_DAU:if(h.default.instance.showLoading(!1),(i=new s.default.ReceivedAutoStart(e)).isAutoStart){for(t.startWaittingCountDown(i.timeAutoStart),t.btnSoChi.active=!1,t.btnCombining.active=!1,t.tableCurrentChi.active=!1,t.resetPlayersPlaying(),_=0;_<s.default.Code.MAX_PLAYER;_++)t.getPlayerHouse(_).resetResultGame();t.fxSoChiTotal.stopAllActions(),t.fxSoChiTotal.active=!1}break;case s.default.Code.THONG_TIN_BAN_CHOI:h.default.instance.showLoading(!1),i=new s.default.ReceivedGameInfo(e),t.closeUIRoom(),t.showUIPlaying(),t.closeUIChat();var x=i.myChair,Y=i.gameState,V=(i.gameAction,i.countDownTime),j=i.moneyBet,K=(i.moneyType,i.gameId,i.roomId),X=i.rule,W=i.hasInfo,J=i.players;t.labelRoomId.string="M\u1eacU BINH - PH\xd2NG: "+K,t.labelRoomBet.string="M\u1ee8C C\u01af\u1ee2C: "+p.default.formatNumber(j)+"$",t.currentRoomBet=j,t.isTinhAce=1==X,t.currentCard=J[x].cardList,g[0].playerId=a.default.Login.Nickname,g[0].playerPos=x;var z=[];for(_=0;_<W.length;_++)W[_]&&z.push(_);for(P=0;P<g.length;P++)g[P].playerPos=y[x][P];for(_=0;_<g.length;_++){var q=z.indexOf(g[_].playerPos),Q=g[_].seatId;t.getPlayerHouse(Q).resetPlayerInfo(Q),q>-1?(t.setupSeatPlayer(Q,{nickName:J[q].nickName,avatar:parseInt(J[q].avatar),money:J[q].currentMoney}),J[q].status==s.default.Code.PLAYER_STATUS_VIEWER?(g[Q].isViewer=!0,t.getPlayerHouse(Q).setIsViewer(!0),t.getPlayerHouse(Q).playFxViewer()):(g[Q].isViewer=!1,t.getPlayerHouse(Q).setIsViewer(!1),0!=Q?(t.getPlayerHouse(Q).showCardReady(!1),t.getPlayerHouse(Q).showCardReal(!0),J[q].sochi?t.getPlayerHouse(Q).playFxXepXong():t.getPlayerHouse(Q).playFxDangXep()):(t.btnSoChi.active=!J[q].sochi,t.btnCombining.active=J[q].sochi))):(t.getPlayerHouse(Q).showBtnInvite(!0),g[_].isViewer=!0)}if(t.currentCard.length>0)for(t.getPlayerHouse(0).showCardReady(!1),t.getPlayerHouse(0).prepareToTransform(),P=0;P<t.currentCard.length;P++)L=u.default.getNormalId(t.currentCard[P]),t.getPlayerHouse(0).transformToCardReal(P,t.spriteCards[L],0);Y==s.default.Code.STATE_PLAYING&&t.startBettingCountDown(V);break;case s.default.Code.DANG_KY_THOAT_PHONG:h.default.instance.showLoading(!1);var Z=(i=new s.default.ReceivedNotifyRegOutRoom(e)).outChair,$=i.isOutRoom,tt=t.findPlayerSeatByPos(Z);-1!==tt&&($?t.getPlayerHouse(tt).showNotify("S\u1eafp r\u1eddi b\xe0n !"):t.getPlayerHouse(tt).showNotify("Kh\xf4 M\xe1u !"));break;case s.default.Code.MOI_DAT_CUOC:h.default.instance.showLoading(!1),i=new s.default.ReceivedMoiDatCuoc(e),t.startBettingCountDown(i.timeDatCuoc),0==t.seatOwner?(t.btnSoChi.active=!1,t.btnCombining.active=!1):(t.btnSoChi.active=!0,t.btnCombining.active=!0);break;case s.default.Code.CHEAT_CARDS:case s.default.Code.DANG_KY_CHOI_TIEP:case s.default.Code.UPDATE_OWNER_ROOM:h.default.instance.showLoading(!1);break;case s.default.Code.JOIN_ROOM_SUCCESS:h.default.instance.showLoading(!1),i=new s.default.ReceivedJoinRoomSucceed(e),t.closeUIRoom(),t.setupMatch(i);break;case s.default.Code.LEAVE_GAME:h.default.instance.showLoading(!1),m=(i=new s.default.ReceivedUserLeaveRoom(e)).chair;var et=t.findPlayerSeatByPos(m);if(-1!==et){for(_=0;_<g.length;_++)g[_].seatId==et&&(g[_].playerId=-1,g[_].isViewer=!0);t.getPlayerHouse(et).resetPlayerInfo(et),t.getPlayerHouse(et).showBtnInvite(!0),1==t.getNumPlayers().length&&t.resetPlayersPlaying(),0==et&&(t.UI_Playing.active=!1,t.UI_ChooseRoom.active=!0,t.refeshListRoom())}break;case s.default.Code.NOTIFY_KICK_FROM_ROOM:h.default.instance.showLoading(!1),i=new s.default.ReceivedKickOff(e);break;case s.default.Code.NEW_USER_JOIN:h.default.instance.showLoading(!1);var ot=(i=new s.default.ReceivedUserJoinRoom(e)).info,it=(x=i.myChair,i.uStatus);for(_=0;_<g.length;_++)if(g[_].playerPos==x){Q=g[_].seatId,t.getPlayerHouse(Q).resetPlayerInfo(Q);var rt={avatar:ot.avatar,nickName:ot.nickName,money:ot.money};t.setupSeatPlayer(Q,rt),it==s.default.Code.PLAYER_STATUS_VIEWER?(g[Q].isViewer=!0,t.getPlayerHouse(Q).setIsViewer(!0),t.getPlayerHouse(Q).playFxViewer()):(g[Q].isViewer=!1,t.getPlayerHouse(Q).setIsViewer(!1))}break;case s.default.Code.NOTIFY_USER_GET_JACKPOT:h.default.instance.showLoading(!1);break;case s.default.Code.UPDATE_MATCH:h.default.instance.showLoading(!1),x=(i=new s.default.ReceivedUpdateMatch(e)).myChair,W=i.hasInfo;var nt=i.infos;for(_=0;_<W.length;_++){var at=g[_].playerPos;W[at]?(t.getPlayerHouse(_).setGold(nt[at].money),g[_].playerId=nt[at].nickName,nt[at].status==s.default.Code.PLAYER_STATUS_SITTING||nt[at].status==s.default.Code.PLAYER_STATUS_PLAYING?(g[_].isViewer=!1,t.getPlayerHouse(_).setIsViewer(!1)):(g[_].isViewer=!0,t.getPlayerHouse(_).setIsViewer(!0),t.getPlayerHouse(_).playFxViewer()),t.setupSeatPlayer(_,nt[at])):(g[_].playerId=-1,g[_].isViewer=!0)}break;case s.default.Code.CHAT_ROOM:h.default.instance.showLoading(!1),m=(i=new s.default.ReceivedChatRoom(e)).chair;var st=i.isIcon,ct=i.content;if(st){var ut=t.findPlayerSeatByPos(m);-1!=ut&&t.getPlayerHouse(ut).showChatEmotion(ct)}else{var dt=t.findPlayerSeatByPos(m);-1!=dt&&t.getPlayerHouse(dt).showChatMsg(ct)}}},this)},e.prototype.actionLeaveRoom=function(){c.default.getInstance().send(new s.default.CmdSendRequestLeaveGame)},e.prototype.actionHoldRoom=function(){c.default.getInstance().send(new s.default.CmdSendHoldRoom)},e.prototype.actionBaoBinh=function(){this.btnSoChi.active=!1,this.btnCombining.active=!0,c.default.getInstance().send(new s.default.SendBaoBinh)},e.prototype.actionBinhSoChi=function(){var t=[this.currentCard[0],this.currentCard[1],this.currentCard[2]],e=[this.currentCard[3],this.currentCard[4],this.currentCard[5],this.currentCard[6],this.currentCard[7]],o=[this.currentCard[8],this.currentCard[9],this.currentCard[10],this.currentCard[11],this.currentCard[12]];this.logCard(this.currentCard),this.logCard(t),this.logCard(e),this.logCard(o),c.default.getInstance().send(new s.default.SendBinhSoChi(o,e,t))},e.prototype.actionAutoBinhSoChi=function(){},e.prototype.actionXepLai=function(){this.btnSoChi.active=!0,this.btnCombining.active=!1,c.default.getInstance().send(new s.default.SendXepLai)},e.prototype.cardSelect=function(t,e,o){this.cardMove.active=!0,this.cardMove.setPosition(e.x,e.y-95);var i=u.default.getNormalId(t.card);this.cardMove.children[0].getComponent(cc.Sprite).spriteFrame=this.spriteCards[i],this.cardMoveId=o,this.cardMoveValue=t.card,this.getPlayerHouse(0).resetResultGame();for(var r=0;r<13;r++)this.meCards.children[r].getComponent("MauBinh.MeCard").setCardShadow(!1),this.getPlayerHouse(0).shadowCard(r,!1)},e.prototype.showMoveTarget=function(t){for(var e=0;e<13;e++){var o=this.meCards.children[e].getComponent("MauBinh.MeCard");e==t?(o.setCardShadow(!1),o.setCardFocus(!0)):(o.setCardShadow(!0),o.setCardFocus(!1))}},e.prototype.completeMoveCard=function(t){var e=this.currentCard[this.cardMoveId],o=this.currentCard[t];this.currentCard[this.cardMoveId]=o,this.currentCard[t]=e;for(var i=0;i<13;i++){var r=this.currentCard[i],n=u.default.getNormalId(r),a=this.spriteCards[n],c=this.meCards.children[i];c.active=!0,c.getComponent("MauBinh.MeCard").updateCard(r,a)}this.cardMoveValue="",this.cardMoveId=-1;var h=new d.default;h.initCard(this.currentCard);var l=h.getPlayerCardsInfo(this.isTinhAce),p=l.cardType!=s.default.Code.TYPE_BINH_LUNG,f=this.getBinhName(l.cardType);this.getPlayerHouse(0).resetResultGame(),l.cardType!=s.default.Code.TYPE_BINH_THUONG&&this.getPlayerHouse(0).playFxResultGeneral(0,p,f,0);var C=[this.currentCard[0],this.currentCard[1],this.currentCard[2]],g=[this.currentCard[3],this.currentCard[4],this.currentCard[5],this.currentCard[6],this.currentCard[7]],y=[this.currentCard[8],this.currentCard[9],this.currentCard[10],this.currentCard[11],this.currentCard[12]];this.logCard(this.currentCard),this.logCard(C),this.logCard(g),this.logCard(y),this.highLightCards(3,l.chiCuoi,C),this.highLightCards(2,l.chiGiua,g),this.highLightCards(1,l.chiDau,y),this.tableCurrentChi.active=!0,this.tableCurrentChi.children[1].getComponent(cc.Label).string="1. "+this.getChiName(l.chiDau),this.tableCurrentChi.children[2].getComponent(cc.Label).string="2. "+this.getChiName(l.chiGiua),this.tableCurrentChi.children[3].getComponent(cc.Label).string="3. "+this.getChiName(l.chiCuoi),this.actionAutoBinhSoChi()},e.prototype.highLightCards=function(t,e,o){var i=-1,r=-1;3==t?(i=0,r=3):2==t?(i=3,r=8):(i=8,r=13);for(var n=i;n<r;n++)this.getPlayerHouse(0).shadowCard(n,!0);switch(e){case s.default.Code.GROUP_THUNG_PHA_SANH:case s.default.Code.GROUP_CU_LU:case s.default.Code.GROUP_THUNG:case s.default.Code.GROUP_SANH:for(n=i;n<r;n++)this.getPlayerHouse(0).shadowCard(n,!1);break;case s.default.Code.GROUP_TU_QUY:case s.default.Code.GROUP_SAM_CO:case s.default.Code.GROUP_MOT_DOI:case s.default.Code.GROUP_MAU_THAU:for(var a=0;a<o.length-1;a++)for(var c=a+1;c<o.length;c++)u.default.getNumber(o[a])==u.default.getNumber(o[c])&&(this.getPlayerHouse(0).shadowCard(a+i,!1),this.getPlayerHouse(0).shadowCard(c+i,!1));break;case s.default.Code.GROUP_THU:for(var d=0;d<o.length-1;d++)for(c=d+1;c<o.length;c++)u.default.getNumber(o[d])==u.default.getNumber(o[c])&&(this.getPlayerHouse(0).shadowCard(d+i,!1),this.getPlayerHouse(0).shadowCard(c+i,!1))}},e.prototype.initConfigPlayer=function(){g=[];for(var t=0;t<s.default.Code.MAX_PLAYER;t++)g.push({seatId:t,playerId:-1,playerPos:-1,isViewer:!0})},e.prototype.resetPlayersPlaying=function(){for(var t=0;t<s.default.Code.MAX_PLAYER;t++)this.getPlayerHouse(t).resetMatchHistory(t)},e.prototype.setupSeatPlayer=function(t,e){g[t].playerId=e.nickName,this.getPlayerHouse(t).setAvatar(e.avatar),this.getPlayerHouse(t).setName(e.nickName),this.getPlayerHouse(t).setGold(e.money)},e.prototype.findPlayerSeatByUid=function(t){for(var e=-1,o=0;o<g.length;o++)g[o].playerId===t&&(e=g[o].seatId);return e},e.prototype.findPlayerPosBySeat=function(t){return g[t].playerPos},e.prototype.findPlayerSeatByPos=function(t){if(-1==t)return-1;for(var e=-1,o=0;o<g.length;o++)g[o].playerPos===t&&(e=g[o].seatId);return e},e.prototype.getPlayerHouse=function(t){return this.groupPlayers.children[t].getComponent("MauBinh.Player")},e.prototype.getNumPlayers=function(){for(var t=[],e=0;e<g.length;e++)-1===g[e].playerId||g[e].isViewer||t.push(g[e].seatId);return t},e.prototype.getBinhName=function(t){var e="";switch(t){case s.default.Code.TYPE_SANH_RONG:e="S\u1ea3nh R\u1ed3ng";break;case s.default.Code.TYPE_MUOI_BA_CAY_DONG_MAU:e="M\u01b0\u1eddi Ba C\xe2y \u0110\u1ed3ng M\xe0u";break;case s.default.Code.TYPE_MUOI_HAI_CAY_DONG_MAU:e="M\u01b0\u1eddi Hai C\xe2y \u0110\u1ed3ng M\xe0u";break;case s.default.Code.TYPE_BA_CAI_THUNG:e="Ba C\xe1i Th\xf9ng";break;case s.default.Code.TYPE_BA_CAI_SANH:e="Ba C\xe1i S\u1ea3nh";break;case s.default.Code.TYPE_LUC_PHE_BON:e="L\u1ee5c Ph\u1ebf B\xf4n";break;case s.default.Code.TYPE_BINH_THUONG:e="Binh Th\u01b0\u1eddng";break;case s.default.Code.TYPE_BINH_LUNG:e="Binh L\u1ee7ng"}return e},e.prototype.needSoChi=function(t){for(var e=0,o=0;o<t.length;o++)t[o].maubinhType==s.default.Code.TYPE_BINH_THUONG&&e++;return 2<=e},e.prototype.needShowMoneyWhenSoChi=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(0==o.chairIndex&&o.maubinhType!=s.default.Code.TYPE_BINH_THUONG)return!1}return!0},e.prototype.needBatSap=function(t){for(var e=0;e<t.length;e++)if(0!=t[e].moneySap)return!0;return!1},e.prototype.soChi=function(t,e){for(var o=this,i=0;i<s.default.Code.MAX_PLAYER;i++)this.getPlayerHouse(i).resetResultChi(1),this.getPlayerHouse(i).resetResultChi(2),this.getPlayerHouse(i).resetResultChi(3);var r=this.needSoChi(e),n=this.needShowMoneyWhenSoChi(e),a=function(i){var a=e[i],h=a.chairIndex,l=[a.chi3[0],a.chi3[1],a.chi3[2],a.chi2[0],a.chi2[1],a.chi2[2],a.chi2[3],a.chi2[4],a.chi1[0],a.chi1[1],a.chi1[2],a.chi1[3],a.chi1[4]],p=new d.default;p.initCard(l);var f=p.getPlayerCardsInfo(c.isTinhAce),C=c.findPlayerSeatByPos(h);if(-1!=C)if(a.maubinhType==s.default.Code.TYPE_BINH_THUONG&&r){var g,y=a.moneyInChi[t-1];if(g=1==t?f.chiDau:2==t?f.chiGiua:f.chiCuoi,c.getPlayerHouse(C).playFxCompareChi(t,c.spriteGroupCard[g]),n&&c.getPlayerHouse(C).playFxGoldSoChi(y),3==t){for(var m=0;m<3;m++){var v=u.default.getNormalId(a.chi3[m]);c.getPlayerHouse(C).prepareCardReal(m),c.getPlayerHouse(C).transformToCardReal(m,c.spriteCards[v],C)}setTimeout(function(){var t=a.moneyInChi[0]+a.moneyInChi[1]+a.moneyInChi[2];t>=0?o.getPlayerHouse(C).playFxWinSoChi(t):o.getPlayerHouse(C).playFxLoseSoChi(t)},2500)}else if(2==t)for(m=0;m<5;m++)v=u.default.getNormalId(a.chi2[m]),c.getPlayerHouse(C).prepareCardReal(m+3),c.getPlayerHouse(C).transformToCardReal(m+3,c.spriteCards[v],C);else for(m=0;m<5;m++)v=u.default.getNormalId(a.chi1[m]),c.getPlayerHouse(C).prepareCardReal(m+8),c.getPlayerHouse(C).transformToCardReal(m+8,c.spriteCards[v],C)}else if(1==t){if(a.maubinhType==s.default.Code.TYPE_BINH_THUONG)f.chiDau<2&&c.getPlayerHouse(C).playFxCompareChi(t,c.spriteGroupCard[f.chiDau]),f.chiGiua<2&&c.getPlayerHouse(C).playFxCompareChi(t,c.spriteGroupCard[f.chiGiua]),f.chiGiua==s.default.Code.GROUP_SAM_CO&&c.getPlayerHouse(C).playFxCompareChi(t,c.spriteGroupCard[f.chiCuoi]);else{var _=a.maubinhType!=s.default.Code.TYPE_BINH_LUNG,S=c.getBinhName(a.maubinhType);c.getPlayerHouse(C).resetResultGame(),c.getPlayerHouse(C).playFxResultGeneral(C,_,S,1)}for(var R=[a.chi3[0],a.chi3[1],a.chi3[2],a.chi2[0],a.chi2[1],a.chi2[2],a.chi2[3],a.chi2[4],a.chi1[0],a.chi1[1],a.chi1[2],a.chi1[3],a.chi1[4]],b=0;b<13;b++)v=u.default.getNormalId(R[b]),0==C?c.meCards.children[b].children[1].getComponent(cc.Sprite).spriteFrame=c.spriteCards[v]:(c.getPlayerHouse(C).prepareToTransform(),c.getPlayerHouse(C).transformToCardReal(b,c.spriteCards[v],C))}if(0==C)for(var T=0;T<13;T++)c.getPlayerHouse(0).shadowCard(T,!1),c.meCards.children[T].getComponent("MauBinh.MeCard").setCardShadow(!1)},c=this;for(i=0;i<e.length;i++)a(i);r?(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(2.5),cc.callFunc(function(){t<3?o.soChi(t+1,e):(o.showGoldResult(e,2e3),o.batSap(e))})))):(this.showGoldResult(e,1e3),this.batSap(e))},e.prototype.showGoldResult=function(t,e){var o=this;setTimeout(function(){for(var e=0;e<t.length;e++){var i=t[e],r=i.chairIndex,n=o.findPlayerSeatByPos(r);-1!=n&&(o.getPlayerHouse(n).resetResultGame(),i.moneyCommon>=0?o.getPlayerHouse(n).fxWin({moneyChange:i.moneyCommon,money:0==i.currentMoney?-1:i.currentMoney}):o.getPlayerHouse(n).fxLose({moneyChange:i.moneyCommon,money:0==i.currentMoney?-1:i.currentMoney}))}},e)},e.prototype.batSap=function(t){var e=this;if(this.needBatSap(t)){for(var o=0,i=0,r=0;r<t.length;r++)-1!=(n=this.findPlayerSeatByPos(t[r].chairIndex))&&0!=n&&(t[r].moneySap>0?i+=1:t[r].moneySap<0&&(o+=1));for(this.fxSoChiTotal.active=!1,r=0;r<t.length;r++){var n;0==(n=this.findPlayerSeatByPos(t[r].chairIndex))?(i>0&&(this.fxSoChiTotal.active=!0,this.fxSoChiTotal.getComponent(cc.Sprite).spriteFrame=3==i?this.spriteSoChiTotal[1]:this.spriteSoChiTotal[2],this.fxSoChiTotal.runAction(cc.sequence(cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1),cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1))),setTimeout(function(){e.fxSoChiTotal.stopAllActions(),e.fxSoChiTotal.active=!1},2e3)),o>0&&(this.fxSoChiTotal.active=!0,3==o&&(this.fxSoChiTotal.getComponent(cc.Sprite).spriteFrame=this.spriteSoChiTotal[1],this.fxSoChiTotal.runAction(cc.sequence(cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1),cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.25,1,1))),setTimeout(function(){e.fxSoChiTotal.stopAllActions(),e.fxSoChiTotal.active=!1},2e3)))):t[r].moneySap<0&&this.getPlayerHouse(n).playFxSoChiTotal(this.spriteSoChiTotal[2])}}else this.soAt()},e.prototype.soAt=function(){},e.prototype.getChiName=function(t){var e="";switch(t){case s.default.Code.GROUP_THUNG_PHA_SANH:e="Th\xf9ng Ph\xe1 S\u1ea3nh";break;case s.default.Code.GROUP_TU_QUY:e="T\u1ee9 Qu\xfd";break;case s.default.Code.GROUP_CU_LU:e="C\xf9 L\u0169";break;case s.default.Code.GROUP_THUNG:e="Th\xf9ng";break;case s.default.Code.GROUP_SANH:e="S\u1ea3nh";break;case s.default.Code.GROUP_SAM_CO:e="S\xe1m C\xf4";break;case s.default.Code.GROUP_THU:e="Th\xfa";break;case s.default.Code.GROUP_MOT_DOI:e="M\u1ed9t \u0110\xf4i";break;case s.default.Code.GROUP_MAU_THAU:e="M\u1eadu Th\u1ea7u"}return e},e.prototype.logCard=function(t){for(var e=0;e<t.length;e++){var o=Math.floor(t[e]/4)+2;t[e];o}},e.prototype.update=function(){},e.instance=null,n([_(cc.Node)],e.prototype,"UI_ChooseRoom",void 0),n([_(cc.Label)],e.prototype,"labelNickName",void 0),n([_(cc.Label)],e.prototype,"labelCoin",void 0),n([_(cc.Node)],e.prototype,"contentListRooms",void 0),n([_(cc.Prefab)],e.prototype,"prefabItemRoom",void 0),n([_(cc.ScrollView)],e.prototype,"scrollListRoom",void 0),n([_(cc.EditBox)],e.prototype,"edtFindRoom",void 0),n([_(cc.Toggle)],e.prototype,"btnHideRoomFull",void 0),n([_(cc.Node)],e.prototype,"UI_Playing",void 0),n([_(cc.Node)],e.prototype,"meCards",void 0),n([_(cc.Node)],e.prototype,"groupPlayers",void 0),n([_(cc.SpriteFrame)],e.prototype,"spriteCards",void 0),n([_(cc.SpriteFrame)],e.prototype,"spriteCardBack",void 0),n([_(cc.Node)],e.prototype,"cardsDeal",void 0),n([_(cc.Button)],e.prototype,"btnLeaveRoom",void 0),n([_(cc.Label)],e.prototype,"labelRoomId",void 0),n([_(cc.Label)],e.prototype,"labelRoomBet",void 0),n([_(cc.Node)],e.prototype,"actionBetting",void 0),n([_(cc.Node)],e.prototype,"cardMove",void 0),n([_(cc.Node)],e.prototype,"suggestTarget",void 0),n([_(cc.Node)],e.prototype,"btnSoChi",void 0),n([_(cc.Node)],e.prototype,"btnCombining",void 0),n([_(cc.Node)],e.prototype,"tableCurrentChi",void 0),n([_(cc.Node)],e.prototype,"notifyTimeStart",void 0),n([_(cc.Node)],e.prototype,"notifyTimeEnd",void 0),n([_(cc.Node)],e.prototype,"notifyTimeBet",void 0),n([_(cc.Node)],e.prototype,"fxSoChiTotal",void 0),n([_(cc.SpriteFrame)],e.prototype,"spriteSoChiTotal",void 0),n([_(cc.Node)],e.prototype,"UI_Chat",void 0),n([_(cc.EditBox)],e.prototype,"edtChatInput",void 0),n([_(cc.Node)],e.prototype,"popupNodity",void 0),n([_(cc.Label)],e.prototype,"labelNotifyContent",void 0),n([_(cc.Node)],e.prototype,"popupGuide",void 0),n([_(cc.SpriteFrame)],e.prototype,"spriteGroupCard",void 0),o=n([v],e)}(cc.Component);o.default=S,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/Network.Cmd":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"./MauBinh.CardUtil":"MauBinh.CardUtil","./MauBinh.Cmd":"MauBinh.Cmd","./MauBinh.DetectPlayerCards":"MauBinh.DetectPlayerCards","./MauBinh.NetworkClient":"MauBinh.NetworkClient"}],"MauBinh.DetectGroupCards":[function(t,e,o){"use strict";cc._RF.push(e,"f9b67tXcw5LPJl58XvdhaB8","MauBinh.DetectGroupCards"),Object.defineProperty(o,"__esModule",{value:!0}),o.maubinh=void 0;var i,r=t("./MauBinh.Cmd");(function(t){var e=function(){function t(){this.groupKind=-1,this.cardList=[],this.valueList=[]}return t.prototype.getGroupCardsInfo=function(){return this.groupKind=this.getGroupKind(),this.groupKind},t.prototype.getGroupKind=function(){if(1==this.cardList.length)return r.default.Code.GROUP_MAU_THAU;if(3==this.cardList.length){if(this.isSamCo())return r.default.Code.GROUP_SAM_CO;if(this.isMotDoi())return r.default.Code.GROUP_MOT_DOI}if(5==this.cardList.length){if(this.isThungPhaSanh())return r.default.Code.GROUP_THUNG_PHA_SANH;if(this.isTuQuy())return r.default.Code.GROUP_TU_QUY;if(this.isCuLu())return r.default.Code.GROUP_CU_LU;if(this.isThung())return r.default.Code.GROUP_THUNG;if(this.isSanh())return r.default.Code.GROUP_SANH;if(this.isSamCo())return r.default.Code.GROUP_SAM_CO;if(this.isThu())return r.default.Code.GROUP_THU;if(this.isMotDoi())return r.default.Code.GROUP_MOT_DOI}this.valueList=[];for(var t=this.getSortedCardList(),e=this.cardList.length-1;0<=e;e--)this.valueList.push(t[e].getNumber());return r.default.Code.GROUP_MAU_THAU},t.prototype.getGroupKindLevel=function(t){var e=r.default.Code.LV_BINH_THUONG;return!t||this.groupKind!=r.default.Code.GROUP_THUNG_PHA_SANH&&this.groupKind!=r.default.Code.GROUP_SANH||(10==this.valueList[0]?e=r.default.Code.LV_THUONG:1==this.valueList[0]&&(e=r.default.Code.LV_HA)),e},t.prototype.getSortedCardList=function(){for(var t=[],e=0;e<this.cardList.length;e++)t.push(this.cardList[e]);return t.sort(function(t,e){return t.getId()-e.getId()})},t.prototype.sortCardList=function(t){t?this.cardList.sort(function(t,e){return e-t}):this.cardList.sort(function(t,e){return t-e})},t.prototype.isThungPhaSanh=function(){if(5!=this.cardList.length)return!1;for(var t=this.getSortedCardList(),e=1,o=1;o<this.cardList.length;o++)t[o].getSuit()==t[o-1].getSuit()&&(t[o].getNumber()==t[o-1].getNumber()+1||2==t[0].getNumber()&&14==t[o].getNumber())&&e++;return e==this.cardList.length&&(this.valueList=[],2==t[0].getNumber()&&14==t[t.length-1].getNumber()?this.valueList.push(1):this.valueList.push(t[0].getNumber())),e==this.cardList.length},t.prototype.isTuQuy=function(){if(5!=this.cardList.length)return!1;for(var t=0;t<this.cardList.length;t++)for(var e=1,o=0;o<this.cardList.length;o++)if(t!=o&&this.cardList[t].getNumber()==this.cardList[o].getNumber()&&e++,4==e)return this.valueList=[],this.valueList.push(this.cardList[t].getNumber()),!0;return!1},t.prototype.isCuLu=function(){if(5!=this.cardList.length)return!1;var t=this.getSortedCardList(),e=!1;return t[0].getNumber()==t[1].getNumber()&&(t[1].getNumber()==t[2].getNumber()&&t[3].getNumber()==t[4].getNumber()&&(e=!0,this.valueList=[],this.valueList.push(t[0].getNumber()),this.valueList.push(t[3].getNumber())),t[2].getNumber()==t[3].getNumber()&&t[3].getNumber()==t[4].getNumber()&&(e=!0,this.valueList=[],this.valueList.push(t[2].getNumber()),this.valueList.push(t[0].getNumber()))),e},t.prototype.isThung=function(){var t=this.getSortedCardList();if(5!=this.cardList.length)return!1;for(var e=1;e<this.cardList.length;e++)if(t[e].getSuit()!=t[0].getSuit())return!1;for(this.valueList=[],e=this.cardList.length-1;0<=e;e--)this.valueList.push(t[e].getNumber());return!0},t.prototype.isSanh=function(){if(5!=this.cardList.length)return!1;for(var t=this.getSortedCardList(),e=1,o=1;o<this.cardList.length;o++)(t[o].getNumber()==t[o-1].getNumber()+1||2==t[0].getNumber()&&14==t[o].getNumber())&&e++;return e==this.cardList.length&&(this.valueList=[],2==t[0].getNumber()&&14==t[t.length-1].getNumber()?this.valueList.push(1):this.valueList.push(t[0].getNumber())),e==this.cardList.length},t.prototype.isSamCo=function(){for(var t=0;t<this.cardList.length;t++){for(var e=1,o=0;o<this.cardList.length;o++)t!=o&&this.cardList[t].getNumber()==this.cardList[o].getNumber()&&e++;if(3==e)return this.valueList=[],this.valueList.push(this.cardList[t].getNumber()),!0}return!1},t.prototype.isThu=function(){if(5!=this.cardList.length)return!1;for(var t=[],e=0;e<this.cardList.length-1;e++)if(-1==t.indexOf(this.cardList[e].getNumber()))for(var o=e+1;o<this.cardList.length;o++)if(this.cardList[e].getNumber()==this.cardList[o].getNumber()){t.push(this.cardList[e].getNumber());break}if(2==t.length){for(this.valueList=[],this.valueList.push(Math.max(t[0],t[1])),this.valueList.push(Math.min(t[0],t[1])),e=0;e<this.cardList.length;e++)-1==t.indexOf(this.cardList[e].getNumber())&&this.valueList.push(this.cardList[e].getNumber());return!0}return!1},t.prototype.isMotDoi=function(){for(var t=[],e=0;e<this.cardList.length-1;e++)for(var o=e+1;o<this.cardList.length;o++)this.cardList[e].getNumber()==this.cardList[o].getNumber()&&t.push(this.cardList[e].getNumber());if(1==t.length){this.valueList=[],this.valueList.push(t[0]);var i=this.getSortedCardList();for(e=this.cardList.length-1;0<=e;e--)i[e].getNumber()!=t[0]&&this.valueList.push(i[e].getNumber());return!0}return!1},t.prototype.addCard=function(t){this.cardList.push(t)},t.prototype.removeCard=function(t){for(var e=0;e<this.cardList.length;e++)if(this.cardList[e]==t){this.cardList.splice(e,1);break}},t}();t.DetectGroupCards=e})(i=o.maubinh||(o.maubinh={})),o.default=i.DetectGroupCards,cc._RF.pop()},{"./MauBinh.Cmd":"MauBinh.Cmd"}],"MauBinh.DetectPlayerCards":[function(t,e,o){"use strict";cc._RF.push(e,"0895cqkOZ1FQ6FEXmsgpXkF","MauBinh.DetectPlayerCards"),Object.defineProperty(o,"__esModule",{value:!0}),o.maubinh=void 0;var i,r=t("./MauBinh.Cmd"),n=t("./MauBinh.Card"),a=t("./MauBinh.DetectGroupCards");(function(t){var e=function(){function t(){this.maubinhType=r.default.Code.TYPE_BINH_THUONG,this.chiDau=new a.default,this.chiGiua=new a.default,this.chiCuoi=new a.default}return t.prototype.initCard=function(t){for(var e=10;e<13;e++)this.chiCuoi.addCard(new n.default(t[e-10],null));for(e=5;e<10;e++)this.chiGiua.addCard(new n.default(t[e-2],null));for(e=0;e<5;e++)this.chiDau.addCard(new n.default(t[e+8],null))},t.prototype.getPlayerCardsInfo=function(t){var e=this.chiDau.getGroupCardsInfo(),o=this.chiGiua.getGroupCardsInfo(),i=this.chiCuoi.getGroupCardsInfo();return this.isSanhRong()?this.maubinhType=r.default.Code.TYPE_SANH_RONG:t&&this.isMuoiBaCayDongMau()?this.maubinhType=r.default.Code.TYPE_MUOI_BA_CAY_DONG_MAU:t&&this.isMuoiHaiCayDongMau()?this.maubinhType=r.default.Code.TYPE_MUOI_HAI_CAY_DONG_MAU:this.isBaCaiThung()?this.maubinhType=r.default.Code.TYPE_BA_CAI_THUNG:this.isBaCaiSanh()?this.maubinhType=r.default.Code.TYPE_BA_CAI_SANH:this.isLucPheBon()?this.maubinhType=r.default.Code.TYPE_LUC_PHE_BON:this.isBinhLung(t)?this.maubinhType=r.default.Code.TYPE_BINH_LUNG:this.maubinhType=r.default.Code.TYPE_BINH_THUONG,{cardType:this.maubinhType,chiDau:e,chiGiua:o,chiCuoi:i}},t.prototype.addCardToChiDau=function(t){this.chiDau.addCard(t)},t.prototype.addCardToChiGiua=function(t){this.chiGiua.addCard(t)},t.prototype.addCardToChiCuoi=function(t){this.chiCuoi.addCard(t)},t.prototype.getChi=function(t){switch(t){case 1:return this.chiDau;case 2:return this.chiGiua;case 3:return this.chiCuoi}},t.prototype.getGroupCardContainsIndex=function(t){return 0<=t&&5>t?this.chiDau:10>t?this.chiGiua:13>t?this.chiCuoi:null},t.prototype.getAllCards=function(){return[].concat(this.chiDau.cardList).concat(this.chiGiua.cardList).concat(this.chiCuoi.cardList)},t.prototype.swapCard=function(t,e){var o=t.id;t.id=e.id,e.id=o},t.prototype.isSanhRong=function(){for(var t=this.getSortedCardListFromList(this.getAllCards()),e=0,o=1,i=0;i<t.length;i++)o++,t[i].getNumber()==o&&e++;return 13==e},t.prototype.isMuoiBaCayDongMau=function(){for(var t=this.getAllCards(),e=0,o=0,i=0;i<t.length;i++)t[i].getColor()==r.default.Code.BLACK?e++:o++;return 13==e||13==o},t.prototype.isMuoiHaiCayDongMau=function(){for(var t=this.getAllCards(),e=0,o=0,i=0;i<t.length;i++)t[i].getColor()==r.default.Code.BLACK?e++:o++;return 12==e||12==o},t.prototype.isBaCaiThung=function(){if(!(this.chiDau.groupKind!=r.default.Code.GROUP_THUNG_PHA_SANH&&this.chiDau.groupKind!=r.default.Code.GROUP_THUNG||this.chiGiua.groupKind!=r.default.Code.GROUP_THUNG_PHA_SANH&&this.chiGiua.groupKind!=r.default.Code.GROUP_THUNG)){var t=this.chiCuoi.cardList;if(t[0].getSuit()==t[1].getSuit()&&t[1].getSuit()==t[2].getSuit())return!0}return!1},t.prototype.isBaCaiSanh=function(){if(!(this.chiDau.groupKind!=r.default.Code.GROUP_THUNG_PHA_SANH&&this.chiDau.groupKind!=r.default.Code.GROUP_SANH||this.chiGiua.groupKind!=r.default.Code.GROUP_THUNG_PHA_SANH&&this.chiGiua.groupKind!=r.default.Code.GROUP_SANH)){var t=this.getSortedCardListFromList(this.chiCuoi.cardList);if(t[0].getNumber()+1==t[1].getNumber()&&t[1].getNumber()+1==t[2].getNumber()||2==t[0].getNumber()&&3==t[1].getNumber()&&14==t[2].getNumber())return!0}return!1},t.prototype.haveSauDoi=function(){for(var t=this.getSortedCardListFromList(this.getAllCards()),e=0,o=0;o<t.length;)o+1<t.length&&t[o+1].getNumber()==t[o].getNumber()&&(e++,o++),o++;return 6==e},t.prototype.isLucPheBon=function(){return!(!this.haveSauDoi()||this.chiDau.groupKind!=r.default.Code.GROUP_THU||this.chiGiua.groupKind!=r.default.Code.GROUP_THU||this.chiCuoi.groupKind!=r.default.Code.GROUP_MOT_DOI)},t.prototype.isBinhLung=function(t){return 0>this.compareChi(this.chiDau,this.chiGiua,t)||0>this.compareChi(this.chiGiua,this.chiCuoi,t)},t.prototype.getSortedCardListFromList=function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o]);for(o=0;o<e.length-1;o++)for(t=o+1;t<e.length;t++)if(e[o].getId()>e[t].getId()){var i=e[o];e[o]=e[t],e[t]=i}return e},t.prototype.compareChi=function(t,e,o){if(t.groupKind>e.groupKind)return-1;if(t.groupKind<e.groupKind)return 1;if(o){var i=t.getGroupKindLevel(o);if(i>(o=e.getGroupKindLevel(o)))return-1;if(i<o)return 1}for(i=0;i<t.valueList.length;i++){if(t.valueList[i]>e.valueList[i])return 1;if(t.valueList[i]<e.valueList[i])return-1}return 0},t}();t.DetectPlayerCards=e})(i=o.maubinh||(o.maubinh={})),o.default=i.DetectPlayerCards,cc._RF.pop()},{"./MauBinh.Card":"MauBinh.Card","./MauBinh.Cmd":"MauBinh.Cmd","./MauBinh.DetectGroupCards":"MauBinh.DetectGroupCards"}],"MauBinh.DragCard":[function(t,e,o){"use strict";cc._RF.push(e,"e08b3jKw1lI4JhSdNr8n3bR","MauBinh.DragCard");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MauBinh.Controller"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentTarget=null,e.other=null,e.self=null,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.updatePos=function(t,e){this.node.opacity=255,this.node.setPosition(t,e)},e.prototype.endMove=function(){a.default.instance.completeMoveCard(this.currentTarget),this.node.active=!1},e.prototype.onCollisionEnter=function(t,e){this.other=t.node,this.self=e.node,this.currentTarget=parseInt(this.other.name)-1,a.default.instance.showMoveTarget(this.currentTarget)},e.instance=null,o=n([c],e)}(cc.Component));o.default=u,cc._RF.pop()},{"./MauBinh.Controller":"MauBinh.Controller"}],"MauBinh.ItemRoom":[function(t,e,o){"use strict";cc._RF.push(e,"36926qIdxdMrpX//tGzu5q2","MauBinh.ItemRoom");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),s=t("./MauBinh.Controller"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelBet=null,e.labelBetMin=null,e.labelNumPlayers=null,e.progressNumPlayers=null,e.roomInfo=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.initItem=function(t){this.roomInfo=t,this.labelBet.string=a.default.formatNumber(t.moneyBet),this.labelBetMin.string=a.default.formatNumber(t.requiredMoney),this.labelNumPlayers.string=t.userCount+"/"+t.maxUserPerRoom,this.progressNumPlayers.fillRange=t.userCount/t.maxUserPerRoom},e.prototype.chooseRoom=function(){s.default.instance.joinRoom(this.roomInfo)},n([d(cc.Label)],e.prototype,"labelBet",void 0),n([d(cc.Label)],e.prototype,"labelBetMin",void 0),n([d(cc.Label)],e.prototype,"labelNumPlayers",void 0),n([d(cc.Sprite)],e.prototype,"progressNumPlayers",void 0),n([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0,"./MauBinh.Controller":"MauBinh.Controller"}],"MauBinh.MeCard":[function(t,e,o){"use strict";cc._RF.push(e,"ac60a4Gdu5MyL1USBM5ktVY","MauBinh.MeCard");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MauBinh.Controller"),s=t("./MauBinh.DragCard"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgFocus=null,e.imgCard=null,e.imgShadow=null,e.card_info=null,e.initPos=null,e.canDrag=null,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.initPos=this.node.position},e.prototype.start=function(){},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onBeginDrag,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEndDrag,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onBeginDrag,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onEndDrag,this)},e.prototype.activeDrag=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onBeginDrag,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEndDrag,this)},e.prototype.offDrag=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onBeginDrag,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onDrag,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onEndDrag,this)},e.prototype.onBeginDrag=function(){a.default.instance.cardSelect(this.card_info,this.node.position,parseInt(this.node.name)-1)},e.prototype.onDrag=function(t){this.dragging=!0;var e=t.getDelta(),o=this.node.position;this.node.x=o.x+e.x,this.node.y=o.y+e.y,s.default.instance.updatePos(o.x+e.x,o.y+e.y-95)},e.prototype.onEndDrag=function(){this.dragging=!1,this.node.position=this.initPos,s.default.instance.endMove()},e.prototype.resetState=function(){this.initPos&&(this.node.position=this.initPos,this.setCardFocus(!1),this.setCardShadow(!1))},e.prototype.setupCard=function(t,e){var o=this;this.card_info=t,this.setCardFocus(!1),this.setCardShadow(!1),cc.tween(this.node).to(.1,{scaleX:0}).call(function(){o.imgCard.getComponent(cc.Sprite).spriteFrame=e}).to(.1,{scaleX:1}).start()},e.prototype.updateCard=function(t,e){this.card_info.card=t,this.setCardFocus(!1),this.setCardShadow(!1),this.setCardSrc(e)},e.prototype.setCardSrc=function(t){this.imgCard.getComponent(cc.Sprite).spriteFrame=t},e.prototype.setCardShadow=function(t){this.imgShadow.active=t},e.prototype.setCardFocus=function(t){this.imgFocus.active=t},e.prototype.setIsActive=function(t){this.node.active=t},e.prototype.getIsActive=function(){return this.node.active},e.instance=null,n([d(cc.Node)],e.prototype,"imgFocus",void 0),n([d(cc.Node)],e.prototype,"imgCard",void 0),n([d(cc.Node)],e.prototype,"imgShadow",void 0),o=n([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./MauBinh.Controller":"MauBinh.Controller","./MauBinh.DragCard":"MauBinh.DragCard"}],"MauBinh.NetworkClient":[function(t,e,o){"use strict";cc._RF.push(e,"ef5e6R1nFhHvZngIpEqlvkV","MauBinh.NetworkClient");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Loading/src/Configs"),a=t("../../Lobby/LobbyScript/Script/networks/Network.NetworkClient"),s=t("../../Lobby/LobbyScript/Script/networks/Network.NetworkListener"),c=function(t){function e(){var e=t.call(this)||this;return e.listeners=new Array,e.isUseWSS=n.default.App.USE_WSS,e}return r(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.connect=function(){t.prototype.connect.call(this,n.default.App.HOST_BINH.host,n.default.App.HOST_BINH.port)},e.prototype.onOpen=function(e){t.prototype.onOpen.call(this,e)},e.prototype.onMessage=function(t){for(var e=new Uint8Array(t.data),o=0;o<this.listeners.length;o++){var i=this.listeners[o];i.target&&i.target instanceof Object&&i.target.node?i.callback(e):(this.listeners.splice(o,1),o--)}},e.prototype.addListener=function(t,e){this.listeners.push(new s.default(e,t))},e.prototype.send=function(t){for(var e=new Int8Array(t._length),o=0;o<t._length;o++)e[o]=t._data[o];null!=this.ws&&this.isConnected()&&this.ws.send(e.buffer)},e}(a.default);o.default=c,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Script/networks/Network.NetworkClient":void 0,"../../Lobby/LobbyScript/Script/networks/Network.NetworkListener":void 0}],"MauBinh.Player":[function(t,e,o){"use strict";cc._RF.push(e,"b79c0saMihPJLkLCRpjTeK5","MauBinh.Player");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/App"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnInvite=null,e.avatar=null,e.cardReady=null,e.cardReal=null,e.userName=null,e.userGold=null,e.owner=null,e.cardsName=null,e.actionViewer=null,e.actionThinking=null,e.actionWin=null,e.goldWin=null,e.actionLose=null,e.goldLose=null,e.actionXepXong=null,e.actionDangXep=null,e.notify=null,e.chatEmotion=null,e.chatMsg=null,e.shadowAvatar=null,e.shadowInfo=null,e.spriteCardBack=null,e.resultGame=null,e.spriteResultChi=[],e.spriteResultGeneral=[],e.actionGoldSoChi=null,e.timeoutNotify=null,e.timeoutShowCardName=null,e.timeoutChat=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.showChatEmotion=function(t){var e=this;this.node.children[6].active=!0,this.chatEmotion.active=!0,this.chatMsg.active=!1,clearTimeout(this.timeoutChat),this.chatEmotion.getComponent(sp.Skeleton).setAnimation(0,t,!0),this.timeoutChat=setTimeout(function(){e.chatEmotion.active=!1,e.chatMsg.active=!1},3e3)},e.prototype.showChatMsg=function(t){var e=this;this.node.children[6].active=!0,this.chatEmotion.active=!1,this.chatMsg.active=!0,clearTimeout(this.timeoutChat),this.chatMsg.children[1].getComponent(cc.Label).string=t,this.timeoutChat=setTimeout(function(){e.chatEmotion.active=!1,e.chatMsg.active=!1},3e3)},e.prototype.showBtnInvite=function(t){this.btnInvite.active=t},e.prototype.setOwner=function(){this.owner.active=!1},e.prototype.setAvatar=function(t){this.node.children[1].active=!0,this.avatar.getComponent(cc.Sprite).spriteFrame=a.default.instance.getAvatarSpriteFrame(t)},e.prototype.setIsViewer=function(t){this.shadowAvatar.active=t,this.shadowInfo.active=t},e.prototype.setName=function(t){this.node.children[3].active=!0,this.userName.string=t},e.prototype.scaleCardReal=function(t){this.cardReal.scale=t},e.prototype.showCardReady=function(t){this.node.children[2].active=!0,this.cardReady.active=t},e.prototype.showCardReal=function(t){this.node.children[2].active=!0,this.scaleCardReal(1),this.cardReal.active=t},e.prototype.prepareToTransform=function(){for(var t=0;t<13;t++)this.prepareCardReal(t)},e.prototype.prepareCardReal=function(t){this.cardReal.children[t].runAction(cc.scaleTo(0,0,1))},e.prototype.transformToCardReal=function(t,e,o){this.node.children[2].active=!0,this.cardReal.active=!0,0==o?(this.cardReal.children[t].children[1].getComponent(cc.Sprite).spriteFrame=e,this.cardReady.children[t].runAction(cc.sequence(cc.scaleTo(.15,0,1),cc.callFunc(function(){}))),this.cardReal.children[t].runAction(cc.sequence(cc.delayTime(.15),cc.scaleTo(.15,1,1),cc.callFunc(function(){})))):(this.cardReal.children[t].children[0].getComponent(cc.Sprite).spriteFrame=e,this.cardReal.children[t].runAction(cc.sequence(cc.scaleTo(.15,1,1),cc.callFunc(function(){}))))},e.prototype.showCardName=function(t){var e=this;this.cardsName.active=!0,this.cardsName.getComponent(cc.Sprite).spriteFrame=t,clearTimeout(this.timeoutShowCardName),this.timeoutShowCardName=setTimeout(function(){e.cardsName.active=!1},4500)},e.prototype.setGold=function(t){this.actionThinking.active=!1,this.showGold(!0),this.userGold.string=this.formatGold(t)},e.prototype.setCardReal=function(t,e){this.cardReal.children[e].children[1].getComponent(cc.Sprite).spriteFrame=t},e.prototype.showPlayCountdown=function(){this.node.children[4].active=!0,this.actionThinking.active=!0,this.processThinking(0)},e.prototype.hidePlayCountdown=function(){this.actionThinking.active=!1},e.prototype.processThinking=function(t){this.actionThinking.getComponent(cc.Sprite).fillRange=t},e.prototype.showGold=function(t){this.node.children[3].children[2].active=t},e.prototype.prepareFxAction=function(){this.node.children[4].active=!0,this.resetAction()},e.prototype.playFxViewer=function(){this.prepareFxAction(),this.actionViewer.active=!0},e.prototype.playFxDangXep=function(){this.prepareFxAction(),this.actionDangXep.active=!0,this.actionXepXong.active=!1},e.prototype.playFxXepXong=function(){this.prepareFxAction(),this.actionDangXep.active=!1,this.actionXepXong.active=!0},e.prototype.playFxSoChiTotal=function(t){this.node.children[7].active=!0,this.resultGame.children[3].active=!0,this.resultGame.children[3].children[0].getComponent(cc.Sprite).spriteFrame=t,this.resultGame.children[3].children[1].getComponent(cc.Label).string="",this.resultGame.children[3].getComponent(cc.Animation).play()},e.prototype.playFxResultGeneral=function(t,e,o,i){this.node.children[7].active=!0,this.resultGame.children[3].active=!0,0==t&&(this.resultGame.children[3].y=0==i?30:100,this.resultGame.children[3].children[0].scale=0==i?1:.5,this.resultGame.children[3].children[1].scale=0==i?1:.5),this.resultGame.children[3].children[0].getComponent(cc.Sprite).spriteFrame=e?this.spriteResultGeneral[0]:this.spriteResultGeneral[1],this.resultGame.children[3].children[1].getComponent(cc.Label).string=e?o:"",this.resultGame.children[3].getComponent(cc.Animation).play()},e.prototype.playFxCompareChi=function(t,e){this.node.children[7].active=!0,this.resultGame.children[t-1].active=!0,this.resultGame.children[t-1].children[0].getComponent(cc.Sprite).spriteFrame=e,this.resultGame.children[t-1].getComponent(cc.Animation).play()},e.prototype.playFxGoldSoChi=function(t){var e=this;t>=0?(this.actionGoldSoChi.active=!0,this.actionGoldSoChi.children[1].getComponent(cc.Label).string="+"+t+" Chi"):t<0&&(this.actionGoldSoChi.active=!0,this.actionGoldSoChi.children[1].getComponent(cc.Label).string=t+" Chi"),setTimeout(function(){e.actionGoldSoChi.active=!1},2500)},e.prototype.playFxWinSoChi=function(t){var e=this;this.node.children[4].active=!0,this.actionWin.active=!0,this.actionWin.children[1].active=!0,this.goldWin.string="+"+t+" Chi",setTimeout(function(){e.node.children[4].active=!1},2e3)},e.prototype.playFxLoseSoChi=function(t){var e=this;this.node.children[4].active=!0,this.actionLose.active=!0,this.actionLose.children[1].active=!0,this.goldLose.string=t+" Chi",setTimeout(function(){e.node.children[4].active=!1},2e3)},e.prototype.fxWin=function(t){var e=this;this.node.children[4].active=!0,this.actionLose.active=!1,this.actionWin.active=!0,this.actionWin.children[1].active=!0,this.goldWin.node.stopAllActions(),this.fxGoldChange(0,t.moneyChange,this.goldWin.node),-1!=t.money&&this.setGold(this.formatGold(t.money)),setTimeout(function(){e.actionWin.active=!1,e.node.children[4].active=!1},2500)},e.prototype.fxLose=function(t){var e=this;this.node.children[4].active=!0,this.actionWin.active=!1,this.actionLose.active=!0,this.actionLose.children[1].active=!0,this.goldLose.node.stopAllActions(),this.fxGoldChange(0,t.moneyChange,this.goldLose.node),-1!=t.money&&this.setGold(this.formatGold(t.money)),setTimeout(function(){e.actionLose.active=!1,e.node.children[4].active=!1},2500)},e.prototype.shadowCardReady=function(t){for(var e=0;e<13;e++)this.cardReady.children[e].color=t?cc.Color.GRAY:cc.Color.WHITE},e.prototype.shadowCardReal=function(t){for(var e=0;e<13;e++)this.cardReal.children[e].children[0].color=t?cc.Color.GRAY:cc.Color.WHITE},e.prototype.shadowCard=function(t,e){this.cardReal.children[t].children[1].color=e?cc.Color.GRAY:cc.Color.WHITE},e.prototype.setCardWin=function(t,e){this.cardReal.children[t].children[0].color=e?cc.Color.WHITE:cc.Color.GRAY},e.prototype.showNotify=function(t){var e=this;this.notify.active=!0,this.notify.children[1].getComponent(cc.Label).string=t,clearTimeout(this.timeoutNotify),this.timeoutNotify=setTimeout(function(){e.notify.active=!1},1500)},e.prototype.resetResultGame=function(){for(var t=0;t<4;t++)this.resultGame.children[t].active=!1},e.prototype.resetResultChi=function(t){this.resultGame.children[t-1].active=!1},e.prototype.resetAction=function(){for(var t=0;t<this.node.children[4].childrenCount;t++)this.node.children[4].children[t].active=!1},e.prototype.resetMatchHistory=function(t){this.resetCardReady(t),this.resetCardReal(t),this.node.children[2].active=!1,this.showGold(!0),this.cardsName.active=!1,this.resetAction()},e.prototype.resetCardReady=function(t){if(0==t)for(var e=0;e<13;e++)this.cardReady.children[e].scale=1;this.cardReady.active=!1},e.prototype.resetCardReal=function(t){this.cardReal.active=!1;for(var e=0;e<13;e++)this.cardReal.children[e].children[0==t?1:0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack;this.shadowCardReal(!1)},e.prototype.resetPlayerInfo=function(t){for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].active=!1;for(e=0;e<13;e++)this.cardReal.children[e].children[0==t?1:0].getComponent(cc.Sprite).spriteFrame=this.spriteCardBack;this.cardReady.active=!1,this.cardReal.active=!1,this.cardsName.active=!1,this.actionViewer.active=!1,this.actionThinking.active=!1,this.actionWin.active=!1,this.actionLose.active=!1,this.setIsViewer(!0)},e.prototype.fxGoldChange=function(t,e,o){var i=this,r=e-t;o.getComponent(cc.Label).string=this.formatGold(t);var n=Math.floor(r/10),a=cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){t+=n,o.getComponent(cc.Label).string=(r>0?"+":"")+i.formatGold(t)})),10),s=cc.sequence(a,cc.callFunc(function(){t=e,o.getComponent(cc.Label).string=(r>0?"+":"")+i.formatGold(t)}));o.runAction(s)},e.prototype.formatGold=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},n([u(cc.Node)],e.prototype,"btnInvite",void 0),n([u(cc.Node)],e.prototype,"avatar",void 0),n([u(cc.Node)],e.prototype,"cardReady",void 0),n([u(cc.Node)],e.prototype,"cardReal",void 0),n([u(cc.Label)],e.prototype,"userName",void 0),n([u(cc.Label)],e.prototype,"userGold",void 0),n([u(cc.Node)],e.prototype,"owner",void 0),n([u(cc.Node)],e.prototype,"cardsName",void 0),n([u(cc.Node)],e.prototype,"actionViewer",void 0),n([u(cc.Node)],e.prototype,"actionThinking",void 0),n([u(cc.Node)],e.prototype,"actionWin",void 0),n([u(cc.Label)],e.prototype,"goldWin",void 0),n([u(cc.Node)],e.prototype,"actionLose",void 0),n([u(cc.Label)],e.prototype,"goldLose",void 0),n([u(cc.Node)],e.prototype,"actionXepXong",void 0),n([u(cc.Node)],e.prototype,"actionDangXep",void 0),n([u(cc.Node)],e.prototype,"notify",void 0),n([u(cc.Node)],e.prototype,"chatEmotion",void 0),n([u(cc.Node)],e.prototype,"chatMsg",void 0),n([u(cc.Node)],e.prototype,"shadowAvatar",void 0),n([u(cc.Node)],e.prototype,"shadowInfo",void 0),n([u(cc.SpriteFrame)],e.prototype,"spriteCardBack",void 0),n([u(cc.Node)],e.prototype,"resultGame",void 0),n([u(cc.SpriteFrame)],e.prototype,"spriteResultChi",void 0),n([u(cc.SpriteFrame)],e.prototype,"spriteResultGeneral",void 0),n([u(cc.Node)],e.prototype,"actionGoldSoChi",void 0),n([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0}]},{},["MauBinh.Card","MauBinh.CardUtil","MauBinh.Cmd","MauBinh.Controller","MauBinh.DetectGroupCards","MauBinh.DetectPlayerCards","MauBinh.DragCard","MauBinh.ItemRoom","MauBinh.MeCard","MauBinh.NetworkClient","MauBinh.Player"]);