window.__require=function t(e,o,i){function n(a,c){if(!o[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return n(e[a][1][t]||t)},h,h.exports,t,e,o,i)}return o[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({"ShootFish.Bullet":[function(t,e,o){"use strict";cc._RF.push(e,"36d2bcC+d9JWLYn26kehzX6","ShootFish.Bullet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),c=t("./ShootFish.Play"),r=cc._decorator,l=r.ccclass,h=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bullet=null,e.fishNet=null,e.id="",e.targetFishId=-1,e.worldSize=cc.size(1280,720),e.exploreDuration=.8,e.vX=0,e.vY=0,e.collisionCount=4,e.isExplored=!1,e.isExploring=!1,e.curExplore=0,e.circle=null,e}return n(e,t),e.prototype.run=function(){var t=Number(c.default.SERVER_CONFIG.BulletSpeed);(isNaN(t)||0==t)&&(t=1400);var e=a.default.degreesToVec2(this.node.angle);this.vX=e.x*t,this.vY=e.y*t,this.collisionCount=4,this.isExplored=!1,this.isExploring=!1,this.bullet.active=!0,this.fishNet.active=!1,this.circle=new SAT.Circle(new SAT.Vector(this.node.position.x,this.node.position.y),Number(c.default.SERVER_CONFIG.BulletRadius))},e.prototype.updateRealTime=function(t){if(!this.isExplored){if(this.isExploring)return this.curExplore-=t,void(this.curExplore<=0&&(this.isExplored=!0,this.node.active=!1));var e=this.node.position;if(e.x+=this.vX*t,e.y+=this.vY*t,this.node.position=e,Math.abs(e.x)>this.worldSize.width/2){this.vX*=-1;var o=Math.atan2(this.vY,this.vX)*a.default.Rad2Deg;this.node.angle=o,e.x=(e.x<0?-1:1)*this.worldSize.width/2,this.node.position=e,this.collisionCount--}else Math.abs(e.y)>this.worldSize.height/2&&(this.vY*=-1,o=Math.atan2(this.vY,this.vX)*a.default.Rad2Deg,this.node.angle=o,e.y=(e.y<0?-1:1)*this.worldSize.height/2,this.node.position=e,this.collisionCount--);this.circle.pos=new SAT.Vector(this.node.position.x,this.node.position.y),this.collisionCount<0&&(this.node.active=!1)}},e.prototype.explore=function(){this.isExploring=!0,this.curExplore=this.exploreDuration,this.bullet.active=!1,this.fishNet.active=!0,this.fishNet.opacity=0,this.fishNet.angle=0,this.fishNet.scale=0,this.fishNet.stopAllActions(),this.fishNet.runAction(cc.spawn(cc.sequence(cc.scaleTo(.3,1.1),cc.delayTime(.07),cc.scaleTo(.3,1)),cc.fadeIn(.1),cc.sequence(cc.delayTime(.25),cc.rotateTo(.5,35)),cc.sequence(cc.delayTime(.4),cc.fadeOut(.3))))},e.prototype.getCircle=function(){return this.circle},s([h(cc.Node)],e.prototype,"bullet",void 0),s([h(cc.Node)],e.prototype,"fishNet",void 0),s([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0,"./ShootFish.Play":"ShootFish.Play"}],"ShootFish.CoinEffect":[function(t,e,o){"use strict";cc._RF.push(e,"f3de4Savp5BHqfZYOvwMNmn","ShootFish.CoinEffect");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),c=cc._decorator,r=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblCoin=null,e.coinExplore=null,e.coin0=null,e.coin1=null,e.coin2=null,e}return n(e,t),e.prototype.run=function(t,e,o){var i=this;this.coinExplore.node.position=e,this.coin0.stopAllActions(),this.coin0.position=e.clone().add(cc.v2(a.default.randomRange(80,-80),a.default.randomRange(80,-80))),this.coin0.scale=0,this.coin1.stopAllActions(),this.coin1.position=e.clone().add(cc.v2(a.default.randomRange(80,-80),a.default.randomRange(80,-80))),this.coin1.scale=0,this.coin2.stopAllActions(),this.coin2.position=e.clone().add(cc.v2(a.default.randomRange(80,-80),a.default.randomRange(80,-80))),this.coin2.scale=0,this.lblCoin.string=a.default.formatNumber(t),this.lblCoin.node.position=e,this.lblCoin.node.stopAllActions(),this.lblCoin.node.opacity=0,this.lblCoin.node.scale=0,this.lblCoin.node.runAction(cc.sequence(cc.spawn(cc.fadeIn(.2),cc.scaleTo(.2,1)),cc.moveBy(.1,new cc.Vec2(0,5)),cc.moveBy(.1,new cc.Vec2(0,-5)),cc.moveBy(.1,new cc.Vec2(0,5)),cc.moveBy(.1,new cc.Vec2(0,-5)),cc.moveBy(.1,new cc.Vec2(0,5)),cc.moveBy(.1,new cc.Vec2(0,-5)),cc.moveBy(.1,new cc.Vec2(0,5)),cc.moveBy(.1,new cc.Vec2(0,-5)),cc.fadeOut(.15))),this.coinExplore.setAnimation(0,"Idle",!1),this.coin0.runAction(cc.sequence(cc.scaleTo(.15,a.default.randomRange(.7,1)),cc.delayTime(.4),cc.moveBy(.1,new cc.Vec2(0,50)),cc.moveBy(.1,new cc.Vec2(0,-50)),cc.moveBy(.1,new cc.Vec2(0,50)),cc.moveBy(.1,new cc.Vec2(0,-50)),cc.moveTo(.7,o),cc.scaleTo(.15,0))),this.coin1.runAction(cc.sequence(cc.scaleTo(.15,a.default.randomRange(.7,1)),cc.delayTime(.55),cc.moveBy(.1,new cc.Vec2(0,50)),cc.moveBy(.1,new cc.Vec2(0,-50)),cc.moveBy(.1,new cc.Vec2(0,50)),cc.moveBy(.1,new cc.Vec2(0,-50)),cc.moveTo(.7,o),cc.scaleTo(.15,0))),this.coin2.runAction(cc.sequence(cc.scaleTo(.15,a.default.randomRange(.7,1)),cc.delayTime(.7),cc.moveBy(.1,new cc.Vec2(0,50)),cc.moveBy(.1,new cc.Vec2(0,-50)),cc.moveBy(.1,new cc.Vec2(0,50)),cc.moveBy(.1,new cc.Vec2(0,-50)),cc.moveTo(.7,o),cc.scaleTo(.15,0),cc.callFunc(function(){i.node.active=!1})))},s([l(cc.Label)],e.prototype,"lblCoin",void 0),s([l(sp.Skeleton)],e.prototype,"coinExplore",void 0),s([l(cc.Node)],e.prototype,"coin0",void 0),s([l(cc.Node)],e.prototype,"coin1",void 0),s([l(cc.Node)],e.prototype,"coin2",void 0),s([r],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0}],"ShootFish.EffectBigWin":[function(t,e,o){"use strict";cc._RF.push(e,"3e4a4YbN9FGnbtYmPvTrs9e","ShootFish.EffectBigWin");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),c=cc._decorator,r=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeleton=null,e.lblNickname=null,e.lblCoin=null,e}return n(e,t),e.prototype.show=function(t,e,o){var i=this;void 0===e&&(e=null),void 0===o&&(o=0),this.node.stopAllActions(),t?(this.lblCoin.string=a.default.formatNumber(o),this.lblCoin.node.active=!1,this.lblNickname.string=e,this.lblNickname.node.active=!1,this.skeleton.setAnimation(0,"animation",!1),this.node.active=!0,this.node.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){i.lblNickname.node.active=!0,i.lblCoin.node.active=!0}),cc.delayTime(3),cc.callFunc(function(){i.node.active=!1})))):this.node.active=!1},s([l(sp.Skeleton)],e.prototype,"skeleton",void 0),s([l(cc.Label)],e.prototype,"lblNickname",void 0),s([l(cc.Label)],e.prototype,"lblCoin",void 0),s([r],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0}],"ShootFish.EffectJackpot":[function(t,e,o){"use strict";cc._RF.push(e,"ce53aga3XZMIaymrxUZy+Ja","ShootFish.EffectJackpot");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),c=cc._decorator,r=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeletons=[],e.lblNickname=null,e.lblCoin=null,e}return n(e,t),e.prototype.show=function(t,e,o){var i=this;if(void 0===e&&(e=null),void 0===o&&(o=0),this.node.stopAllActions(),t){this.lblCoin.string=a.default.formatNumber(o),this.lblCoin.node.active=!1,this.lblNickname.string=e,this.lblNickname.node.active=!1;for(var n=0;n<this.skeletons.length;n++)this.skeletons[n].setAnimation(0,"Idle",!1);this.node.active=!0,this.node.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){i.lblNickname.node.active=!0,i.lblCoin.node.active=!0}),cc.delayTime(5),cc.callFunc(function(){i.node.active=!1})))}else this.node.active=!1},s([l([sp.Skeleton])],e.prototype,"skeletons",void 0),s([l(cc.Label)],e.prototype,"lblNickname",void 0),s([l(cc.Label)],e.prototype,"lblCoin",void 0),s([r],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0}],"ShootFish.Fish":[function(t,e,o){"use strict";cc._RF.push(e,"8dcf1d04CtOE75piBWi/t9b","ShootFish.Fish");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),c=t("../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient"),r=t("./ShootFish.Play"),l=cc._decorator,h=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.lblId=null,e.isDie=!1,e.type=-1,e.polygon=null,e.dataPointsUpdate=[],e.currentStep=0,e.currentTimeStep=-1,e.currentVStepX=0,e.currentVStepY=0,e}return n(e,t),e.prototype.setData=function(t){if(this.id=t.id,this.lblId.string=this.id.toString(),t.h<=0||0==t.path.length)return this.die(),void t.path.length;if(this.type!=t.t){this.type=t.t,this.anim.removeAllChildren(),cc.instantiate(r.default.instance.getFishAnimByType(this.type)).parent=this.anim;var e=t.H,o=t.w;this.polygon=new SAT.Box(new SAT.Vector(0,0),e,o).toPolygon(),this.polygon.translate(-e/2,-o/2),this.node.width=e,this.node.height=o}var i=Number(t.dx),n=Number(t.dy),s=Number(t.px),l=Number(t.py),h=t.path,u=c.default.serverCurrentTimeMillis();this.node.angle=Math.atan2(n,i)*a.default.Rad2Deg;for(var p=[],d=0;d<h.length;d++){var f={t:Number(h[d].t)};switch(f.p=cc.v2(Number(h[d].x),Number(h[d].y)),r.default.instance.mePlayer.serverPos){case 1:f.p=cc.v2(-Number(h[d].x),Number(h[d].y));break;case 2:f.p=cc.v2(-Number(h[d].x),-Number(h[d].y));break;case 3:f.p=cc.v2(Number(h[d].x),-Number(h[d].y))}p.push(f)}switch(this.node.setPosition(s,l),r.default.instance.mePlayer.serverPos){case 1:this.node.setPosition(-s,l);break;case 2:this.node.setPosition(-s,-l);break;case 3:this.node.setPosition(s,-l)}var b=!0,y=-1;this.dataPointsUpdate.length=0;for(var g=1;g<p.length;g++){var m=p[g-1],v=p[g],S=m.p,F=v.p,T=m.t,C=v.t;if(u-C<0){y<0&&(y=g);var w=F.clone().sub(S),_=Math.atan2(w.y,w.x)*a.default.Rad2Deg,k=0;b?(k=(C-u)/1e3,b=!1):k=(C-T)/1e3,this.dataPointsUpdate.push({p:F,t:k,a:_,tms:C})}}this.currentTimeStep=-1,this.currentStep=0,this.currentVStepX=0,this.currentVStepY=0,this.dataPointsUpdate.length>0&&(this.currentTimeStep=this.dataPointsUpdate[this.currentStep].t,w=this.dataPointsUpdate[this.currentStep].p.sub(new cc.Vec2(this.node.position.x,this.node.position.y)),this.currentVStepX=w.x/this.currentTimeStep,this.currentVStepY=w.y/this.currentTimeStep,this.node.angle=this.dataPointsUpdate[this.currentStep].a),this.isDie=!1,this.node.active=!0},e.prototype.updateRealTime=function(t){if(this.node.active&&!this.isDie&&this.dataPointsUpdate.length>0&&this.currentTimeStep>=0){var e=this.node.position;if(this.currentTimeStep-=t,this.currentTimeStep<0&&(this.currentStep++,this.currentStep<this.dataPointsUpdate.length)){this.currentTimeStep=this.dataPointsUpdate[this.currentStep].t+Math.abs(this.currentTimeStep),this.node.angle=this.dataPointsUpdate[this.currentStep].a,this.polygon.angle=this.node.angle*a.default.Deg2Rad;var o=this.dataPointsUpdate[this.currentStep].p.sub(new cc.Vec2(e.x,e.y));this.currentVStepX=o.x/this.currentTimeStep,this.currentVStepY=o.y/this.currentTimeStep}e.x+=this.currentVStepX*t,e.y+=this.currentVStepY*t,this.node.position=e}},e.prototype.die=function(){this.isDie=!0,this.node.active=!1},e.prototype.getPolygon=function(){return this.polygon.pos=new SAT.Vector(this.node.position.x,this.node.position.y),this.polygon},e.prototype.hurt=function(){if(0!=this.anim.children.length&&0!=this.anim.children[0].children.length){this.anim.children[0].children[0].stopActionByTag(99);var t=cc.sequence(cc.tintTo(.05,255,54,54),cc.delayTime(.1),cc.tintTo(.05,255,255,255));t.setTag(99),this.anim.children[0].children[0].runAction(t)}},s([u(cc.Node)],e.prototype,"anim",void 0),s([u(cc.Label)],e.prototype,"lblId",void 0),s([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient":void 0,"./ShootFish.Play":"ShootFish.Play"}],"ShootFish.Lobby":[function(t,e,o){"use strict";cc._RF.push(e,"4378bty4U5E8KWt2uwkMkhd","ShootFish.Lobby");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Loading/src/Configs"),c=t("../../Lobby/LobbyScript/Lobby.Cmd"),r=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),h=t("../../Lobby/LobbyScript/Script/common/Utils"),u=t("../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient"),p=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),d=t("../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient"),f=t("./ShootFish.Play"),b=t("./ShootFish.PopupCoinTransfer"),y=t("../../Loading/src/Http"),g=t("../../Lobby/LobbyScript/Script/common/SPUtils"),m=cc._decorator,v=m.ccclass,S=m.property,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playNode=null,e.lblBalance=null,e.popupCoinTransfer=null,e.play=null,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){var t=this;o.instance=this,this.play=this.playNode.getComponent(f.default),this.play.node.active=!1,this.lblBalance.string=h.default.formatNumber(a.default.Login.CoinFish),l.default.register(l.default.USER_UPDATE_COIN,function(){t.lblBalance.string=h.default.formatNumber(a.default.Login.CoinFish)},this),d.default.getInstance().checkConnect(function(e){e?(f.default.SERVER_CONFIG=a.default.Login.FishConfigs,l.default.send(l.default.USER_UPDATE_COIN),t&&t.node&&t.node.parent&&a.default.Login.CoinFish<=0&&r.default.instance.confirmDialog.show3("Ti\u1ec1n trong B\u1eafn C\xe1 c\u1ee7a b\u1ea1n \u0111\xe3 h\u1ebft, b\u1ea1n c\xf3 mu\u1ed1n chuy\u1ec3n ti\u1ec1n v\xe0o kh\xf4ng?","C\xf3",function(e){e&&t.popupCoinTransfer.show()})):r.default.instance.alertDialog.showMsgWithOnDismissed("\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i.",function(){t.actBack()})}),d.default.getInstance().addOnClose(function(){r.default.instance.showErrLoading("M\u1ea5t k\u1ebft n\u1ed1i, \u0111ang th\u1eed k\u1ebft n\u1ed1i l\u1ea1i...")},this),u.default.getInstance().addListener(function(t){switch(new p.default(t).getCmdId()){case c.default.Code.GET_MONEY_USE:var e=new c.default.ResGetMoneyUse(t);a.default.Login.Coin=e.moneyUse,l.default.send(l.default.USER_UPDATE_COIN)}},this)},e.prototype.actBack=function(){cc.audioEngine.stopAll(),r.default.instance.loadScene("Lobby")},e.prototype.actHonors=function(){},e.prototype.actRoom1=function(){this.show(!1),this.play.show(!0,1)},e.prototype.actRoom2=function(){this.show(!1),this.play.show(!0,2)},e.prototype.actLogin=function(){var t=this,e=a.default.Login.Username,o=a.default.Login.Password;r.default.instance.showLoading(!0),y.default.get(a.default.App.API,{c:3,un:e,pw:md5(o)},function(i,n){if(r.default.instance.showLoading(!1),null==i)switch(parseInt(n.errorCode)){case 0:a.default.Login.AccessToken=n.accessToken,a.default.Login.SessionKey=n.sessionKey,a.default.Login.Username=e,a.default.Login.Password=o,a.default.Login.IsLogin=!0;var s=JSON.parse(base64.decode(a.default.Login.SessionKey));a.default.Login.Nickname=s.nickname,a.default.Login.Avatar=s.avatar,a.default.Login.Coin=s.vinTotal,a.default.Login.LuckyWheel=s.luckyRotate,a.default.Login.IpAddress=s.ipAddress,a.default.Login.CreateTime=s.createTime,a.default.Login.Birthday=s.birthday,a.default.Login.Birthday=s.birthday,a.default.Login.VipPoint=s.vippoint,a.default.Login.VipPointSave=s.vippointSave,g.default.setUserName(a.default.Login.Username),g.default.setUserPass(a.default.Login.Password),r.default.instance.buttonMiniGame.show(),l.default.send(l.default.USER_INFO_UPDATED);break;case 1007:r.default.instance.alertDialog.showMsg("Th\xf4ng tin \u0111\u0103ng nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7.");break;case 2001:t.popupUpdateNickname.show2(e,o);break;default:r.default.instance.alertDialog.showMsg("\u0110\u0103ng nh\u1eadp kh\xf4ng th\xe0nh c\xf4ng vui l\xf2ng th\u1eed l\u1ea1i sau.")}})},e.prototype.actRoom3=function(){this.show(!1),this.play.show(!0,3)},e.prototype.show=function(t){this.node.active=t,l.default.send(l.default.USER_UPDATE_COIN)},e.instance=null,s([S(cc.Node)],e.prototype,"playNode",void 0),s([S(cc.Label)],e.prototype,"lblBalance",void 0),s([S(b.default)],e.prototype,"popupCoinTransfer",void 0),o=s([v],e)}(cc.Component);o.default=F,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Loading/src/Http":void 0,"../../Lobby/LobbyScript/Lobby.Cmd":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/SPUtils":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient":void 0,"./ShootFish.Play":"ShootFish.Play","./ShootFish.PopupCoinTransfer":"ShootFish.PopupCoinTransfer"}],"ShootFish.PanelMenu":[function(t,e,o){"use strict";cc._RF.push(e,"3ebbaXYFItGA4MRPRT0exe9","ShootFish.PanelMenu");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ShootFish.Play"),c=cc._decorator,r=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrow=null,e.btnSound=null,e.sfSoundOn=null,e.sfSoundOff=null,e.btnMusic=null,e.sfMusicOn=null,e.sfMusicOff=null,e.isShow=!1,e.soundState=1,e.musicState=1,e}return n(e,t),e.prototype.show=function(t){this.isShow=t,this.isShow?(this.node.runAction(cc.moveTo(.3,cc.v2(-115,0))),this.arrow.runAction(cc.rotateTo(.3,0))):(this.node.runAction(cc.moveTo(.3,cc.v2(0,0))),this.arrow.runAction(cc.rotateTo(.3,180))),this.btnSound.getComponent(cc.Sprite).spriteFrame=this.getSound()>0?this.sfSoundOn:this.sfSoundOff,this.btnMusic.getComponent(cc.Sprite).spriteFrame=this.getMussic()>0?this.sfMusicOn:this.sfMusicOff},e.prototype.toggleShow=function(){this.show(!this.isShow)},e.prototype.toggleSound=function(){var t=this.getSound()>0?0:1;this.btnSound.getComponent(cc.Sprite).spriteFrame=t>0?this.sfSoundOn:this.sfSoundOff,a.default.instance.settingSound()},e.prototype.toggleMusic=function(){var t=this.getMussic()>0?0:1;this.btnMusic.getComponent(cc.Sprite).spriteFrame=t>0?this.sfMusicOn:this.sfMusicOff,a.default.instance.settingMusic()},e.prototype.getSound=function(){var t=cc.sys.localStorage.getItem("sound_fish_shot");return null!=t&&(this.soundState=parseInt(t)),this.soundState},e.prototype.getMussic=function(){var t=cc.sys.localStorage.getItem("music_fish_shot");return null!=t&&(this.musicState=parseInt(t)),this.musicState},s([l(cc.Node)],e.prototype,"arrow",void 0),s([l(cc.Button)],e.prototype,"btnSound",void 0),s([l(cc.SpriteFrame)],e.prototype,"sfSoundOn",void 0),s([l(cc.SpriteFrame)],e.prototype,"sfSoundOff",void 0),s([l(cc.Button)],e.prototype,"btnMusic",void 0),s([l(cc.SpriteFrame)],e.prototype,"sfMusicOn",void 0),s([l(cc.SpriteFrame)],e.prototype,"sfMusicOff",void 0),s([r],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./ShootFish.Play":"ShootFish.Play"}],"ShootFish.Player":[function(t,e,o){"use strict";cc._RF.push(e,"720d1dsYhpMV5P3msI2r43M","ShootFish.Player");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Utils"),c=cc._decorator,r=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.localPos=0,e.lblNickname=null,e.lblCoin=null,e.lblBet=null,e.gunRotate=null,e.sprGunBar=null,e.sprFramesGunBar=[],e.guns=[],e.id=0,e.username="",e.nickname="",e.coin=0,e.avatar="",e.serverPos=-1,e.gun=null,e.curGunIdx=-1,e}return n(e,t),e.prototype.set=function(t,e,o,i,n){switch(this.id=t,this.username=e,this.nickname=o,this.coin=i,this.avatar=n,this.gunRotate.angle=0,this.node.active=!0,this.lblNickname.string=this.nickname,this.lblCoin.string=a.default.formatNumber(i),this.localPos){case 0:case 1:this.gunRotate.angle=90;break;case 2:case 3:this.gunRotate.angle=-90}this.setGun(0)},e.prototype.leave=function(){this.id=-1,this.nickname="",this.coin=0,this.avatar="",this.node.active=!1},e.prototype.setGun=function(t){if(t>=this.guns.length&&(t=0),this.curGunIdx!=t){this.curGunIdx=t;for(var e=0;e<this.guns.length;e++)this.guns[e].node.active=e==t;this.sprGunBar.spriteFrame=this.sprFramesGunBar[t],this.gun=this.guns[t]}},e.prototype.rotateGun=function(t){var e=this.gunRotate.convertToWorldSpaceAR(cc.Vec2.ZERO),o=t.sub(e),i=Math.atan2(o.y,o.x)*a.default.Rad2Deg;i<-90?i=180:i<0&&i>-90&&(i=0),this.gunRotate.angle=i},e.prototype.shoot=function(){this.gun.setAnimation(0,"2",!1),this.gun.addAnimation(0,"1",!0)},s([l],e.prototype,"localPos",void 0),s([l(cc.Label)],e.prototype,"lblNickname",void 0),s([l(cc.Label)],e.prototype,"lblCoin",void 0),s([l(cc.Label)],e.prototype,"lblBet",void 0),s([l(cc.Node)],e.prototype,"gunRotate",void 0),s([l(cc.Sprite)],e.prototype,"sprGunBar",void 0),s([l([cc.SpriteFrame])],e.prototype,"sprFramesGunBar",void 0),s([l([sp.Skeleton])],e.prototype,"guns",void 0),s([r],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Utils":void 0}],"ShootFish.Play":[function(t,e,o){"use strict";cc._RF.push(e,"5fa1efbhuJLl5N2iupithus","ShootFish.Play");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ShootFish.Player"),c=t("./ShootFish.Bullet"),r=t("./ShootFish.Fish"),l=t("../../Loading/src/Configs"),h=t("./ShootFish.CoinEffect"),u=t("./ShootFish.EffectJackpot"),p=t("./ShootFish.Lobby"),d=t("./ShootFish.PanelMenu"),f=t("./ShootFish.PopupGuide"),b=t("./ShootFish.EffectBigWin"),y=t("../../Lobby/LobbyScript/Script/common/App"),g=t("../../Lobby/LobbyScript/Script/common/Tween"),m=t("../../Lobby/LobbyScript/Script/common/Utils"),v=t("../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient"),S=cc._decorator,F=S.ccclass,T=S.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lobby=null,e.loading=null,e.touchPad=null,e.sprFramesBullet=[],e.bulletTemplate=null,e.players=[],e.fishsAnim=[],e.fishsNode=null,e.fishTemplate=null,e.coinEffectTemplate=null,e.lblJackpot=null,e.toggleAuto=null,e.target=null,e.waveState=null,e.btnFastShoot=null,e.progressFastShoot=null,e.lblFastShootTime=null,e.btnTargetFish=null,e.progressTargetFish=null,e.lblTargetFishTime=null,e.effectJackpot=null,e.effectBigWin=null,e.effectMegaWin=null,e.panelMenu=null,e.popupGuide=null,e.lblPing=null,e.lblServerTime=null,e.soundShoot=null,e.soundCoin=null,e.soundBigWin=null,e.soundBg=null,e.soundOff=null,e.musicOff=null,e.mePlayer=null,e.bullets=[],e.fishs=[],e.coinEffects=[],e.isStateGeted=!1,e.inited=!1,e.lastUpdateTime=-1,e.roomId=0,e.listBet=[],e.listJackpot=[],e.betIdx=0,e.mapPlayersIdx=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]],e.shootInterval=.25,e.fastShootInterval=.13,e.curShootInterval=0,e.isShoot=!1,e.isFastShoot=!1,e.isTargetFish=!1,e.targetFish=null,e.intervalFindTargetFish=2,e.curIntervalFindTargetFish=0,e.curTimeFastShootCountdown=0,e.curTimeTargetFishCountdown=0,e.tweens=new Array,e.remoteMusicBackground=null,e.musicState=1,e.soundState=1,e}var o;return n(e,t),o=e,e.prototype.init=function(){this.inited||(this.mePlayer=this.players[0])},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){var t=this;this.bulletTemplate.active=!1,this.touchPad.on(cc.Node.EventType.TOUCH_START,function(e){var o=e.getLocation();t.mePlayer.rotateGun(o),t.isShoot=!0},this.touchPad),this.touchPad.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=e.getLocation();t.mePlayer.rotateGun(o)},this.touchPad),this.touchPad.on(cc.Node.EventType.TOUCH_END,function(){t.isShoot=!1},this.touchPad),this.touchPad.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.isShoot=!1},this.touchPad),this.toggleAuto.node.on("toggle",function(){t.toggleAuto.isChecked?(t.touchPad.active=!1,t.curIntervalFindTargetFish=t.intervalFindTargetFish,t.isShoot=!0,t.findTargetFishInWorld()):t.stopAutoShoot()}),v.default.getInstance().addListener(function(e,o){if(t.node.active&&t.isStateGeted)switch(e){case"OnUpdateJackpot":t.listJackpot.length=0,t.listJackpot.push(o[t.roomId+"1"]),t.listJackpot.push(o[t.roomId+"2"]),t.listJackpot.push(o[t.roomId+"3"]),t.listJackpot.push(o[t.roomId+"4"]),g.default.numberTo(t.lblJackpot,t.listJackpot[t.betIdx],.3);break;case"OnEnterPlayer":var i=o.data,n=t.mapPlayersIdx[t.mePlayer.serverPos][i.posIndex];(p=t.players[n]).set(i.id,i.playerId,i.nickname,i.cash,i.avatar),p.serverPos=i.posIndex,p.lblBet.string=m.default.formatNumberMin(t.listBet[t.betIdx]);break;case"OnLeavePlayer":if((a=o.playerId)==l.default.Login.UsernameFish&&(1==o.reason&&y.default.instance.alertDialog.showMsg("B\u1ea1n \u0111\u01b0\u1ee3c m\u1eddi ra kh\u1ecfi ph\xf2ng do kh\xf4ng thao t\xe1c trong th\u1eddi gian d\xe0i."),t.back()),null==(p=t.getPlayerByUsername(a)))break;p.leave();break;case"OnUpdateObject":var s=o.id;if(null==(h=t.getFishById(s)))break;h.setData(o);break;case"OnUpdateCash":var a=o.playerId,c=Number(o.cash),r=o.scr;if(a==l.default.Login.UsernameFish&&(l.default.Login.CoinFish=c),null==(p=t.getPlayerByUsername(a)))break;switch(p.coin=c,p.lblCoin.string=m.default.formatNumber(c),r){case 2:t.effectBigWin.show(!1),t.effectMegaWin.show(!1),t.effectJackpot.show(!0,p.nickname,c)}break;case"OnObjectDie":s=o.id,c=o.value;var h,u=o.playerId;if(null==(h=t.getFishById(s)))break;if(h.die(),h==t.targetFish&&(t.exploreAllBulletWithTargetFishId(t.targetFish.id),t.target.active=!1,t.targetFish=null,t.curIntervalFindTargetFish=0),null==(p=t.getPlayerByUsername(u)))break;switch(t.getCoinEffect().run(c,new cc.Vec2(h.node.position.x,h.node.position.y),new cc.Vec2(p.node.position.x,p.node.position.y)),1==t.soundState&&cc.audioEngine.play(t.soundCoin,!1,1),h.type){case 15:case 16:case 17:case 18:case 19:case 20:case 21:t.effectJackpot.node.active||t.effectMegaWin.show(!0,p.nickname,c);break;case 22:case 23:case 24:t.effectJackpot.node.active||t.effectBigWin.show(!0,p.nickname,c)}break;case"OnShoot":a=o.playerId;var p,d=Number(o.type)-1,f=o.rad,b=Number(o.target);if(a==l.default.Login.UsernameFish)break;if(null==(p=t.getPlayerByUsername(a)))break;var v=f;switch(t.mePlayer.serverPos){case 0:v=f;break;case 1:v=Math.PI-f;break;case 2:v=f-Math.PI;break;case 3:v=-f}p.lblBet.string=m.default.formatNumberMin(t.listBet[d]),p.gunRotate.angle=v*m.default.Rad2Deg,p.setGun(d),p.shoot();var S=t.getBullet();S.targetFishId=b,S.bullet.getComponent(cc.Sprite).spriteFrame=t.sprFramesBullet[d],S.node.angle=p.gunRotate.angle;var F=S.node.parent.convertToNodeSpaceAR(p.gunRotate.convertToWorldSpaceAR(cc.Vec2.ZERO));F.x+=90*m.default.degreesToVec2(S.node.angle).x,F.y+=90*m.default.degreesToVec2(S.node.angle).y,S.node.setPosition(F),S.run();break;case"OnChat":break;case"OnNewState":switch(o.state){case 3:t.waveState.stopAllActions(),t.waveState.active=!0;var T=t.waveState.position;T.x=1400,t.waveState.position=T,T.x=-1400,t.waveState.runAction(cc.sequence(cc.moveTo(1,new cc.Vec2(T.x,T.y)),cc.callFunc(function(){t.waveState.active=!1})))}break;case"OnJackpot":o.nickname;var C=o.value;switch(o.tableIndex){case 2:"Ph\xf2ng 2";break;case 3:"Ph\xf2ng 3"}m.default.formatNumber(C)}},this),this.init(),this.checkMusicOnStart(),this.checkSoundOnStart()},e.prototype.checkMusicOnStart=function(){var t=cc.sys.localStorage.getItem("music_fish_shot");null!=t?this.musicState=parseInt(t):(this.musicState=1,cc.sys.localStorage.setItem("music_fish_shot","1")),0==this.musicState?this.musicOff.active=!0:this.musicOff.active=!1,1==this.musicState&&(this.remoteMusicBackground=cc.audioEngine.playMusic(this.soundBg,!0))},e.prototype.checkSoundOnStart=function(){var t=cc.sys.localStorage.getItem("sound_fish_shot");null!=t?this.soundState=parseInt(t):(this.soundState=1,cc.sys.localStorage.setItem("sound_fish_shot","1")),0==this.soundState?this.soundOff.active=!0:this.soundOff.active=!1},e.prototype.settingMusic=function(){this.musicOff.active=!this.musicOff.active,this.musicOff.active?(cc.audioEngine.stop(this.remoteMusicBackground),this.musicState=0):(this.remoteMusicBackground=cc.audioEngine.playMusic(this.soundBg,!0),this.musicState=1),cc.sys.localStorage.setItem("music_fish_shot",""+this.musicState)},e.prototype.settingSound=function(){this.soundOff.active=!this.soundOff.active,this.soundOff.active?this.soundState=0:this.soundState=1,cc.sys.localStorage.setItem("sound_fish_shot",""+this.soundState)},e.prototype.onDisable=function(){this.tweens.forEach(function(t){t.stop()})},e.prototype.onDestroy=function(){this.tweens.forEach(function(t){t.stop()})},e.prototype.update=function(t){null!=this.lblPing&&(this.lblPing.string=v.default.PING+"ms"),null!=this.lblServerTime&&this.lblServerTime.node.active&&(this.lblServerTime.string="t: "+v.default.systemCurrentTimeMillis()+" d: "+v.default.TIME_DISTANCE+" mp: "+v.default.MIN_PING);var e=v.default.systemCurrentTimeMillis();this.isStateGeted&&this.lastUpdateTime>0&&e-this.lastUpdateTime>500&&this.getState(!1),this.lastUpdateTime=e,this.curTimeFastShootCountdown>0&&(this.curTimeFastShootCountdown=Math.max(0,this.curTimeFastShootCountdown-t),this.lblFastShootTime.string=Math.round(this.curTimeFastShootCountdown)+"s",0==this.curTimeFastShootCountdown&&(this.lblFastShootTime.node.active=!1,this.btnFastShoot.enabled=!0)),this.curTimeTargetFishCountdown>0&&(this.curTimeTargetFishCountdown=Math.max(0,this.curTimeTargetFishCountdown-t),this.lblTargetFishTime.string=Math.round(this.curTimeTargetFishCountdown)+"s",0==this.curTimeTargetFishCountdown&&(this.lblTargetFishTime.node.active=!1,this.btnTargetFish.enabled=!0)),this.updateShoot(t);for(var o=0,i=this.bullets.length;o<i;o++)this.bullets[o].updateRealTime(t);var n=new Array;for(o=0,i=this.fishs.length;o<i;o++){var s=this.fishs[o];s.updateRealTime(t),s.node.active&&Math.abs(s.node.x)<704&&Math.abs(s.node.y)<360*1.1?n.push(s.getPolygon()):n.push(null)}o=0;for(var a=this.bullets.length;o<a;o++){var c=this.bullets[o];if(c.node.active&&!c.isExploring&&!c.isExplored)for(var r=c.getCircle(),l=0,h=this.fishs.length;l<h;l++){var u=this.fishs[l];if(null!=n[l]&&!(c.targetFishId>0&&c.targetFishId!=u.id)&&SAT.testCirclePolygon(r,n[l])){c.explore(),u.hurt();break}}}n.length=0},e.prototype.play=function(){var t=this;this.isStateGeted=!1,this.resetView(),v.default.getInstance().ping(function(){v.default.getInstance().ping(function(){v.default.getInstance().ping(function(){v.default.getInstance().request("play",{playerId:l.default.Login.UsernameFish,password:l.default.Login.PasswordFish,index:t.roomId},function(e){if(!e.ok){switch(e.err){case 4:y.default.instance.confirmDialog.show2("S\u1ed1 d\u01b0 kh\xf4ng \u0111\u1ee7 vui l\xf2ng n\u1ea1p th\xeam.",function(t){t&&p.default.instance.popupCoinTransfer.show()});break;case 1:v.default.getInstance().request("quit",null,function(){},t),y.default.instance.alertDialog.showMsg("L\u1ed7i "+e.err+", vui l\xf2ng th\u1eed l\u1ea1i.");break;default:y.default.instance.alertDialog.showMsg("L\u1ed7i "+e.err+", kh\xf4ng x\xe1c \u0111\u1ecbnh.")}return t.show(!1),void t.lobby.getComponent(p.default).show(!0)}t.getState(!0)},t)},t)},t)},this)},e.prototype.resetView=function(){this.betIdx=0;for(var t=0;t<this.players.length;t++)this.players[t].leave();for(t=0;t<this.fishs.length;t++)this.fishs[t].node.removeFromParent();for(this.fishs.length=0,t=0;t<this.bullets.length;t++)this.bullets[t].node.active=!1;for(t=0;t<this.coinEffects.length;t++)this.coinEffects[t].node.active=!1;this.effectBigWin.show(!1),this.effectMegaWin.show(!1),this.effectJackpot.show(!1),this.popupGuide.active=!1,this.waveState.stopAllActions(),this.waveState.active=!1},e.prototype.getJackpot=function(){var t=this;v.default.getInstance().request("getJackpot",null,function(e){e.ok&&(t.listJackpot.length=0,t.listJackpot.push(e.data[t.roomId+"1"]),t.listJackpot.push(e.data[t.roomId+"2"]),t.listJackpot.push(e.data[t.roomId+"3"]),t.listJackpot.push(e.data[t.roomId+"4"]),g.default.numberTo(t.lblJackpot,t.listJackpot[t.betIdx],.3))},this)},e.prototype.getState=function(t){var e=this;t||y.default.instance.showLoading(!0),this.isStateGeted=!1,this.resetView(),v.default.getInstance().request("state",null,function(i){t||y.default.instance.showLoading(!1);for(var n=i.players,s=null,a=0,c=0;c<n.length;c++)if(n[c].playerId==l.default.Login.UsernameFish){a=n[c].posIndex,s=n[c],l.default.Login.CoinFish=n[c].cash;break}for(c=0;c<n.length;c++){var h=e.mapPlayersIdx[a][n[c].posIndex],u=n[c],p=e.players[h];p.set(u.id,u.playerId,u.nickname,u.cash,u.avatar),p.serverPos=u.posIndex,p.lblBet.string=m.default.formatNumberMin(e.listBet[e.betIdx])}var d=i.objects.concat(i.sobjects);for(c=0;c<d.length;c++){var f=cc.instantiate(e.fishTemplate).getComponent(r.default);f.node.parent=e.fishsNode,f.setData(d[c]),e.fishs.push(f)}var b=i.time-s.rfire,g=o.SERVER_CONFIG.FastFireCoolDownS;e.progressFastShoot.progress=0,b>g?(e.btnFastShoot.enabled=!0,e.lblFastShootTime.node.active=!1):(e.btnFastShoot.enabled=!1,e.curTimeFastShootCountdown=b,e.lblFastShootTime.string=e.curTimeFastShootCountdown+"s",e.lblFastShootTime.node.active=!0);var v=i.time-s.snipe,S=o.SERVER_CONFIG.SnipeCoolDownS;e.progressTargetFish.progress=0,v>S?(e.btnTargetFish.enabled=!0,e.lblFastShootTime.node.active=!1):(e.btnTargetFish.enabled=!1,e.curTimeTargetFishCountdown=v,e.lblTargetFishTime.string=e.curTimeTargetFishCountdown+"s",e.lblTargetFishTime.node.active=!0),e.isStateGeted=!0,e.getJackpot(),t&&(e.loading.active=!1)},this)},e.prototype.updateShoot=function(t){if(this.toggleAuto.isChecked||this.isTargetFish)if(null!=this.targetFish){var e=this.mePlayer.gunRotate.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.targetFish.node.convertToWorldSpaceAR(cc.v2(this.targetFish.node.width/2,0)),i=m.default.v2Distance(o,e);if(Math.abs(this.targetFish.node.x)>512||Math.abs(this.targetFish.node.y)>288||i<135)this.exploreAllBulletWithTargetFishId(this.targetFish.id),this.target.active=!1,this.targetFish=null,this.curIntervalFindTargetFish=0;else{var n=o.sub(e),s=Math.atan2(n.y,n.x)*m.default.Rad2Deg;this.mePlayer.gunRotate.angle=s,this.target.setPosition(this.target.parent.convertToNodeSpaceAR(o))}}else this.isTargetFish||(this.curIntervalFindTargetFish=Math.max(0,this.curIntervalFindTargetFish-t),0==this.curIntervalFindTargetFish&&this.findTargetFishInWorld());if(this.curShootInterval>0)this.curShootInterval=Math.max(0,this.curShootInterval-t);else if(this.isShoot){if(this.curShootInterval=this.isFastShoot?this.fastShootInterval:this.shootInterval,l.default.Login.CoinFish<this.listBet[this.betIdx])return y.default.instance.alertDialog.showMsg(y.default.instance.getTextLang("txt_slot_error")),this.isShoot=!1,void(this.toggleAuto.isChecked&&this.stopAutoShoot());if((this.toggleAuto.isChecked||this.isTargetFish)&&null==this.targetFish)return;l.default.Login.CoinFish=Math.max(0,l.default.Login.CoinFish-this.listBet[this.betIdx]),this.mePlayer.coin=l.default.Login.CoinFish,this.mePlayer.lblCoin.string=m.default.formatNumber(l.default.Login.CoinFish),this.mePlayer.shoot(),1==this.soundState&&cc.audioEngine.play(this.soundShoot,!1,1);var a=this.mePlayer.gunRotate.angle,c=this.getBullet();c.bullet.getComponent(cc.Sprite).spriteFrame=this.sprFramesBullet[this.betIdx],c.targetFishId=null!=this.targetFish?this.targetFish.id:-1,c.node.angle=a;var r=c.node.parent.convertToNodeSpaceAR(this.mePlayer.gunRotate.convertToWorldSpaceAR(cc.Vec2.ZERO));r.x+=90*m.default.degreesToVec2(c.node.angle).x,r.y+=90*m.default.degreesToVec2(c.node.angle).y,c.node.setPosition(r),c.run();var h=a*m.default.Deg2Rad;switch(this.mePlayer.serverPos){case 0:h=h;break;case 1:h=Math.PI-h;break;case 2:h-=Math.PI;break;case 3:h=-h}v.default.getInstance().notify("shoot",{rad:h,type:this.betIdx+1,target:null!=this.targetFish?this.targetFish.id:-1,rapidFire:this.isFastShoot,auto:!1})}},e.prototype.findTargetFishInWorld=function(){this.curIntervalFindTargetFish=this.intervalFindTargetFish;for(var t=[],e=this.mePlayer.gunRotate.convertToWorldSpaceAR(cc.Vec2.ZERO),o=0;o<this.fishs.length;o++){var i=this.fishs[o].node;if(i.active&&Math.abs(i.position.x)<=512&&Math.abs(i.position.y)<=288){var n=i.convertToWorldSpaceAR(cc.Vec2.ZERO),s=m.default.v2Distance(e,n);s>=135&&t.push({fish:this.fishs[o],distance:s})}}t.length>0&&(this.targetFish=t[m.default.randomRangeInt(0,t.length)].fish,this.target.active=!0,this.target.position=this.targetFish.node.position)},e.prototype.stopAutoShoot=function(){this.isShoot=!1,this.toggleAuto.isChecked=!1,this.target.active=!1,this.touchPad.active=!0,this.curIntervalFindTargetFish=0,this.targetFish=null},e.prototype.getBullet=function(){for(var t=null,e=0;e<this.bullets.length;e++)if(!this.bullets[e].node.active){t=this.bullets[e];break}if(null==t){var o=cc.instantiate(this.bulletTemplate);o.parent=this.bulletTemplate.parent,t=o.getComponent(c.default),this.bullets.push(t)}return t.node.active=!0,t.targetFishId=-1,t},e.prototype.exploreAllBulletWithTargetFishId=function(t){for(var e=0;e<this.bullets.length;e++)this.bullets[e].node.active&&this.bullets[e].targetFishId>=0&&this.bullets[e].targetFishId==t&&(this.bullets[e].targetFishId=-1)},e.prototype.getCoinEffect=function(){for(var t=null,e=0;e<this.coinEffects.length;e++)if(!this.coinEffects[e].node.active){t=this.coinEffects[e];break}if(null==t){var o=cc.instantiate(this.coinEffectTemplate);o.parent=this.coinEffectTemplate.parent,t=o.getComponent(h.default),this.coinEffects.push(t)}return t.node.active=!0,t.node.setSiblingIndex(t.node.parent.children.length-1),t},e.prototype.getFishById=function(t){for(var e=0;e<this.fishs.length;e++)if(this.fishs[e].id==t)return this.fishs[e];return null},e.prototype.getPlayerById=function(t){if(t<=0)return null;for(var e=0;e<this.players.length;e++)if(this.players[e].id>0&&this.players[e].id==t)return this.players[e];return null},e.prototype.getPlayerByUsername=function(t){if(null==t||""==t)return null;for(var e=0;e<this.players.length;e++)if(null!=this.players[e].username&&""!=this.players[e].username&&this.players[e].username==t)return this.players[e];return null},e.prototype.getFishAnimByType=function(t){var e="";switch(t){case 0:e="fish0";break;case 1:e="fish1";break;case 2:e="fish2";break;case 3:e="fish3";break;case 4:e="fish4";break;case 5:e="fish5";break;case 6:e="fish6";break;case 7:e="fish7";break;case 8:case 9:e="fish9";break;case 10:e="fish10";break;case 11:e="fish11";break;case 12:e="fish12";break;case 13:e="fish13";break;case 14:e="fish14";break;case 15:e="fish15";break;case 16:e="fish16";break;case 17:e="fish17";break;case 18:e="fish18";break;case 19:e="fish19";break;case 20:e="fish20";break;case 21:e="fish21";break;case 22:e="fish22";break;case 23:e="fish23";break;case 24:e="fish24"}for(var o=0;o<this.fishsAnim.length;o++)if(null!=this.fishsAnim[o].name&&""!=this.fishsAnim[o].name&&this.fishsAnim[o].name==e)return this.fishsAnim[o];return this.fishsAnim[0]},e.prototype.actGetState=function(){this.getState(!1)},e.prototype.actBetUp=function(){this.betIdx<this.listBet.length-1&&(this.betIdx++,this.mePlayer.lblBet.string=m.default.formatNumberMin(this.listBet[this.betIdx]),this.mePlayer.setGun(this.betIdx),g.default.numberTo(this.lblJackpot,this.listJackpot[this.betIdx],.3))},e.prototype.actBetDown=function(){this.betIdx>0&&(this.betIdx--,this.mePlayer.lblBet.string=m.default.formatNumberMin(this.listBet[this.betIdx]),this.mePlayer.setGun(this.betIdx),g.default.numberTo(this.lblJackpot,this.listJackpot[this.betIdx],.3))},e.prototype.actBack=function(){var t=this;y.default.instance.confirmDialog.show2("B\u1ea1n c\xf3 mu\u1ed1n r\u1eddi kh\u1ecfi b\xe0n kh\xf4ng",function(e){e&&t.back()})},e.prototype.actFastShoot=function(){var t=this;this.isFastShoot=!0,this.btnFastShoot.enabled=!1;var e=o.SERVER_CONFIG.FastFireDuration;this.progressFastShoot.progress=1,this.tweens.push(cc.tween(this.progressFastShoot).to(e,{progress:0}).call(function(){t.isFastShoot=!1,t.curTimeFastShootCountdown=o.SERVER_CONFIG.FastFireCoolDownS,t.lblFastShootTime.string=t.curTimeFastShootCountdown+"s",t.lblFastShootTime.node.active=!0}).start())},e.prototype.actTargetFish=function(){var t=this;this.isShoot=!0,this.isTargetFish=!0,this.btnTargetFish.enabled=!1;var e=o.SERVER_CONFIG.SnipeDurationS;this.progressTargetFish.progress=1,this.tweens.push(cc.tween(this.progressTargetFish).to(e,{progress:0}).call(function(){t.isTargetFish=!1,t.targetFish=null,t.target.active=!1,t.curTimeTargetFishCountdown=o.SERVER_CONFIG.SnipeCoolDownS,t.lblTargetFishTime.string=t.curTimeTargetFishCountdown+"s",t.lblTargetFishTime.node.active=!0,t.fishs.forEach(function(t){t.getComponent(cc.Button).enabled=!1}),t.isShoot=t.toggleAuto.isChecked,t.touchPad.active=!t.toggleAuto.isChecked}).start()),this.touchPad.active=!1,this.fishs.forEach(function(e){e.getComponent(cc.Button).enabled=!0,e.node.off("click"),e.node.on("click",function(){t.targetFish=e,t.target.active=!0})})},e.prototype.back=function(){var t=this;this.isStateGeted=!1,this.stopAutoShoot(),y.default.instance.showLoading(!0),v.default.getInstance().request("quit",null,function(){y.default.instance.showLoading(!1),t.resetView(),t.show(!1),t.lobby.getComponent(p.default).show(!0)},this)},e.prototype.actEffectJackpotTest=function(){this.effectJackpot.show(!0,"Test nickname",54032423)},e.prototype.actEffectBigWinTest=function(){this.effectBigWin.show(!0,"Test nickname",54032423)},e.prototype.actEffectMegaWinTest=function(){this.effectMegaWin.show(!0,"Test nickname",54032423)},e.prototype.show=function(t,e){if(void 0===e&&(e=0),t){if(null==o.SERVER_CONFIG)return this.lobby.getComponent(p.default).show(!0),void y.default.instance.alertDialog.showMsg("B\u1ea1n ch\u01b0a \u0111\u0103ng nh\u1eadp.");this.node.active=!0,this.loading.active=!0,this.roomId=e,this.stopAutoShoot(),this.panelMenu.show(!1),this.listBet.length=0,this.listBet.push(o.SERVER_CONFIG.TypeToValue.Bullet1*o.SERVER_CONFIG.TableBulletValueRate[this.roomId]),this.listBet.push(o.SERVER_CONFIG.TypeToValue.Bullet2*o.SERVER_CONFIG.TableBulletValueRate[this.roomId]),this.listBet.push(o.SERVER_CONFIG.TypeToValue.Bullet3*o.SERVER_CONFIG.TableBulletValueRate[this.roomId]),this.listBet.push(o.SERVER_CONFIG.TypeToValue.Bullet4*o.SERVER_CONFIG.TableBulletValueRate[this.roomId]),this.shootInterval=1/o.SERVER_CONFIG.FIRE_RATE,this.fastShootInterval=this.shootInterval/o.SERVER_CONFIG.FastFireRate,this.play()}else this.popupGuide.active&&this.popupGuide.getComponent(f.default).dismiss(),this.node.active=!1},e.instance=null,e.SERVER_CONFIG=null,s([T(cc.Node)],e.prototype,"lobby",void 0),s([T(cc.Node)],e.prototype,"loading",void 0),s([T(cc.Node)],e.prototype,"touchPad",void 0),s([T([cc.SpriteFrame])],e.prototype,"sprFramesBullet",void 0),s([T(cc.Node)],e.prototype,"bulletTemplate",void 0),s([T([a.default])],e.prototype,"players",void 0),s([T([cc.Node])],e.prototype,"fishsAnim",void 0),s([T(cc.Node)],e.prototype,"fishsNode",void 0),s([T(cc.Node)],e.prototype,"fishTemplate",void 0),s([T(cc.Node)],e.prototype,"coinEffectTemplate",void 0),s([T(cc.Label)],e.prototype,"lblJackpot",void 0),s([T(cc.Toggle)],e.prototype,"toggleAuto",void 0),s([T(cc.Node)],e.prototype,"target",void 0),s([T(cc.Node)],e.prototype,"waveState",void 0),s([T(cc.Button)],e.prototype,"btnFastShoot",void 0),s([T(cc.ProgressBar)],e.prototype,"progressFastShoot",void 0),s([T(cc.Label)],e.prototype,"lblFastShootTime",void 0),s([T(cc.Button)],e.prototype,"btnTargetFish",void 0),s([T(cc.ProgressBar)],e.prototype,"progressTargetFish",void 0),s([T(cc.Label)],e.prototype,"lblTargetFishTime",void 0),s([T(u.default)],e.prototype,"effectJackpot",void 0),s([T(b.default)],e.prototype,"effectBigWin",void 0),s([T(b.default)],e.prototype,"effectMegaWin",void 0),s([T(d.default)],e.prototype,"panelMenu",void 0),s([T(cc.Node)],e.prototype,"popupGuide",void 0),s([T(cc.Label)],e.prototype,"lblPing",void 0),s([T(cc.Label)],e.prototype,"lblServerTime",void 0),s([T({type:cc.AudioClip})],e.prototype,"soundShoot",void 0),s([T({type:cc.AudioClip})],e.prototype,"soundCoin",void 0),s([T({type:cc.AudioClip})],e.prototype,"soundBigWin",void 0),s([T({type:cc.AudioClip})],e.prototype,"soundBg",void 0),s([T(cc.Node)],e.prototype,"soundOff",void 0),s([T(cc.Node)],e.prototype,"musicOff",void 0),o=s([F],e)}(cc.Component);o.default=C,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Tween":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient":void 0,"./ShootFish.Bullet":"ShootFish.Bullet","./ShootFish.CoinEffect":"ShootFish.CoinEffect","./ShootFish.EffectBigWin":"ShootFish.EffectBigWin","./ShootFish.EffectJackpot":"ShootFish.EffectJackpot","./ShootFish.Fish":"ShootFish.Fish","./ShootFish.Lobby":"ShootFish.Lobby","./ShootFish.PanelMenu":"ShootFish.PanelMenu","./ShootFish.Player":"ShootFish.Player","./ShootFish.PopupGuide":"ShootFish.PopupGuide"}],"ShootFish.PopupCoinTransfer":[function(t,e,o){"use strict";cc._RF.push(e,"bcd88coqOBPF7ZC2zQEsAhZ","ShootFish.PopupCoinTransfer");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TabCashOut=o.TabCashIn=void 0;var a=t("../../Loading/src/Configs"),c=t("../../Lobby/LobbyScript/Lobby.Cmd"),r=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),h=t("../../Lobby/LobbyScript/Script/common/Dialog"),u=t("../../Lobby/LobbyScript/Script/common/Utils"),p=t("../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient"),d=t("../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient"),f=cc._decorator,b=f.ccclass,y=f.property,g=function(){function t(){this.lblBalance=null,this.edbCoin=null,this.quickButtons=null,this.popup=null,this.values=[5e4,1e5,2e5,5e5,1e6,2e6,5e6,1e7,2e7]}return t.prototype.start=function(t){var e=this;this.popup=t,this.edbCoin.node.on("editing-did-ended",function(){var t=u.default.stringToInt(e.edbCoin.string);e.edbCoin.string=u.default.formatNumber(t)});for(var o,i=function(t){o=n.quickButtons.children[t];var i=n.values[t];o.getComponentInChildren(cc.Label).string=u.default.formatNumber(i),o.on("click",function(){e.edbCoin.string=u.default.formatNumber(i)})},n=this,s=0;s<this.quickButtons.childrenCount;s++)i(s)},t.prototype.submit=function(){var t=this,e=u.default.stringToInt(this.edbCoin.string);e<=0?r.default.instance.alertDialog.showMsg("S\u1ed1 ti\u1ec1n \u0111\xe3 nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7."):(r.default.instance.showLoading(!0),d.default.getInstance().request("xxengCashin",{ccash:e},function(e){r.default.instance.showLoading(!1),e.ok?(a.default.Login.CoinFish=e.newCash,l.default.send(l.default.USER_UPDATE_COIN),r.default.instance.alertDialog.showMsg("Thao t\xe1c th\xe0nh c\xf4ng."),t.reset(),p.default.getInstance().send(new c.default.ReqGetMoneyUse)):r.default.instance.alertDialog.showMsg("Thao t\xe1c th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau.")},this.popup))},t.prototype.reset=function(){this.edbCoin.string="",this.lblBalance.string=u.default.formatNumber(a.default.Login.Coin)},s([y(cc.Label)],t.prototype,"lblBalance",void 0),s([y(cc.EditBox)],t.prototype,"edbCoin",void 0),s([y(cc.Node)],t.prototype,"quickButtons",void 0),s([b("PopupCoinTransfer.TabCashIn")],t)}();o.TabCashIn=g;var m=function(){function t(){this.lblBalance=null,this.edbCoin=null,this.quickButtons=null,this.popup=null,this.values=[5e4,1e5,2e5,5e5,1e6,2e6,5e6,1e7,2e7]}return t.prototype.start=function(t){var e=this;this.popup=t,this.edbCoin.node.on("editing-did-ended",function(){var t=u.default.stringToInt(e.edbCoin.string);e.edbCoin.string=u.default.formatNumber(t)});for(var o,i=function(t){o=n.quickButtons.children[t];var i=n.values[t];o.getComponentInChildren(cc.Label).string=u.default.formatNumber(i),o.on("click",function(){e.edbCoin.string=u.default.formatNumber(i)})},n=this,s=0;s<this.quickButtons.childrenCount;s++)i(s)},t.prototype.submit=function(){var t=this,e=u.default.stringToInt(this.edbCoin.string);e<=0?r.default.instance.alertDialog.showMsg("S\u1ed1 ti\u1ec1n \u0111\xe3 nh\u1eadp kh\xf4ng h\u1ee3p l\u1ec7."):(r.default.instance.showLoading(!0),d.default.getInstance().request("xxengCashin",{ccash:-e},function(e){r.default.instance.showLoading(!1),e.ok?(a.default.Login.CoinFish=e.newCash,l.default.send(l.default.USER_UPDATE_COIN),r.default.instance.alertDialog.showMsg("Thao t\xe1c th\xe0nh c\xf4ng."),t.reset(),p.default.getInstance().send(new c.default.ReqGetMoneyUse)):r.default.instance.alertDialog.showMsg("Thao t\xe1c th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau.")},this.popup))},t.prototype.reset=function(){this.edbCoin.string="",this.lblBalance.string=u.default.formatNumber(a.default.Login.CoinFish)},s([y(cc.Label)],t.prototype,"lblBalance",void 0),s([y(cc.EditBox)],t.prototype,"edbCoin",void 0),s([y(cc.Node)],t.prototype,"quickButtons",void 0),s([b("PopupCoinTransfer.TabCashOut")],t)}();o.TabCashOut=m;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabs=null,e.tabContents=null,e.tabCashIn=null,e.tabCashOut=null,e.tabSelectedIdx=0,e}return n(e,t),e.prototype.start=function(){for(var t=this,e=function(e){o.tabs.toggleItems[e].node.on("toggle",function(){t.tabSelectedIdx=e,t.onTabChanged()})},o=this,i=0;i<this.tabs.toggleItems.length;i++)e(i);l.default.register(l.default.USER_UPDATE_COIN,function(){t.tabCashIn.lblBalance.string=u.default.formatNumber(a.default.Login.Coin),t.tabCashOut.lblBalance.string=u.default.formatNumber(a.default.Login.CoinFish)},this),this.tabCashIn.start(this),this.tabCashOut.start(this)},e.prototype.show=function(){t.prototype.show.call(this),this.tabSelectedIdx=0,this.tabs.toggleItems[this.tabSelectedIdx].isChecked=!0,this.onTabChanged()},e.prototype.onTabChanged=function(){for(var t=0;t<this.tabContents.childrenCount;t++)this.tabContents.children[t].active=t==this.tabSelectedIdx;for(var e=0;e<this.tabs.toggleItems.length;e++)this.tabs.toggleItems[e].node.getComponentInChildren(cc.LabelOutline).color=e==this.tabSelectedIdx?cc.Color.BLACK.fromHEX("#AA5F00"):cc.Color.BLACK.fromHEX("#4677F3");switch(this.tabSelectedIdx){case 0:this.tabCashIn.reset();break;case 1:this.tabCashOut.reset()}},e.prototype.actSubmitCashIn=function(){this.tabCashIn.submit()},e.prototype.actSubmitCashOut=function(){this.tabCashOut.submit()},e.prototype.actClearCashIn=function(){this.tabCashIn.edbCoin.string="0"},e.prototype.actClearCashOut=function(){this.tabCashOut.edbCoin.string="0"},s([y(cc.ToggleContainer)],e.prototype,"tabs",void 0),s([y(cc.Node)],e.prototype,"tabContents",void 0),s([y(g)],e.prototype,"tabCashIn",void 0),s([y(m)],e.prototype,"tabCashOut",void 0),s([b],e)}(h.default);o.default=v,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/Lobby.Cmd":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient":void 0,"../../Lobby/LobbyScript/Script/networks/ShootFishNetworkClient":void 0}],"ShootFish.PopupGuide":[function(t,e,o){"use strict";cc._RF.push(e,"bab5aIcJEpPB53KA3RPsstw","ShootFish.PopupGuide");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Lobby/LobbyScript/Script/common/Dialog"),c=t("./ShootFish.Play"),r=cc._decorator,l=r.ccclass,h=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=null,e.itemTemplate=null,e.items=[],e.mapFishType={0:["Cuttle",1],1:["GoldFish",1],2:["LightenFish",1],3:["Mermaid",1],4:["Octopus",1],5:["PufferFish",1],6:["SeaFish",1],7:["Shark",1],8:["Stringray",1],9:["Turtle",1],10:["CaThanTai",1],11:["FlyingFish",1],12:["GoldenFrog",.2],13:["SeaTurtle",1],14:["MerMan",1],15:["Phoenix",.7],16:["MermaidBig",.6],17:["MermaidSmall",.6],18:["BombFish",.6],19:["Fish19",.6],20:["Fish20",.6],21:["Fish21",.4],22:["Fish22",.3],23:["Fish23",.3],24:["Fish24",.3]},e}return n(e,t),e.prototype.show=function(){t.prototype.show.call(this),this.itemTemplate.active=!1},e.prototype._onShowed=function(){if(t.prototype._onShowed.call(this),null!=c.default.SERVER_CONFIG)for(var e in this.mapFishType){var o=this.mapFishType[e][0],i=this.mapFishType[e][1],n=c.default.SERVER_CONFIG.FishPhysicalData[o],s=cc.instantiate(this.itemTemplate);s.parent=this.grid,s.active=!0;var a=cc.instantiate(c.default.instance.getFishAnimByType(Number(e)));a.parent=s.getChildByName("fishParent"),a.scale=i,a.angle=35,s.getChildByName("lblFactor").getComponent(cc.Label).string=(n.Health/100).toString(),this.items.push(s)}},e.prototype.dismiss=function(){this.items.forEach(function(t){t.removeFromParent()}),t.prototype.dismiss.call(this)},s([h(cc.Node)],e.prototype,"grid",void 0),s([h(cc.Node)],e.prototype,"itemTemplate",void 0),s([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"./ShootFish.Play":"ShootFish.Play"}]},{},["ShootFish.Bullet","ShootFish.CoinEffect","ShootFish.EffectBigWin","ShootFish.EffectJackpot","ShootFish.Fish","ShootFish.Lobby","ShootFish.PanelMenu","ShootFish.Play","ShootFish.Player","ShootFish.PopupCoinTransfer","ShootFish.PopupGuide"]);