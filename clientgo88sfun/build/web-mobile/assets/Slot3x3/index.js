window.__require=function t(e,o,n){function i(c,r){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({"Slot3x3.Cmd":[function(t,e,o){"use strict";cc._RF.push(e,"1fedewLD5tJuK+YssJ4x/DR","Slot3x3.Cmd");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.cmd=void 0;var s,c=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),r=t("../../Lobby/LobbyScript/Script/networks/Network.OutPacket");(function(t){var e=function(){function t(){}return t.SCRIBE=7003,t.UNSCRIBE=7004,t.CHANGE_ROOM=7005,t.SPIN=7001,t.UPDATE_JACKPOT=7002,t}();t.Code=e;var o=function(t){function o(o){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(e.SCRIBE),n.packHeader(),n.putByte(o),n.updateSize(),n}return i(o,t),o}(r.default);t.SendScribe=o;var n=function(t){function o(o){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(e.UNSCRIBE),n.packHeader(),n.putByte(o),n.updateSize(),n}return i(o,t),o}(r.default);t.SendUnScribe=n;var s=function(t){function o(o,n){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.CHANGE_ROOM),i.packHeader(),i.putByte(o),i.putByte(n),i.updateSize(),i}return i(o,t),o}(r.default);t.SendChangeRoom=s;var a=function(t){function o(o,n){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.SPIN),i.packHeader(),i.putInt(o),i.putString(n),i.updateSize(),i}return i(o,t),o}(r.default);t.SendSpin=a;var l=function(t){function e(e){var o=t.call(this,e)||this;return o.value=0,o.x2=0,o.value=o.getLong(),o.x2=o.getByte(),o}return i(e,t),e}(c.default);t.ReceiveUpdateJackpot=l;var p=function(t){function e(e){var o=t.call(this,e)||this;return o.result=0,o.matrix="",o.linesWin="",o.prize=0,o.currentMoney=0,o.result=o.getByte(),o.matrix=o.getString(),o.linesWin=o.getString(),o.prize=o.getLong(),o.currentMoney=o.getLong(),o}return i(e,t),e}(c.default);t.ReceiveSpin=p})(s=o.cmd||(o.cmd={})),o.default=s,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/Network.OutPacket":void 0}],"Slot3x3.PopupHistory":[function(t,e,o){"use strict";cc._RF.push(e,"9ed9es2x7dPjowc9D1zGIrY","Slot3x3.PopupHistory");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,c=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(s<3?i(c):s>3?i(e,o,c):i(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Loading/src/Http"),r=t("../../Loading/src/Configs"),a=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/Dialog"),p=t("../../Lobby/LobbyScript/Script/common/Utils"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblPage=null,e.itemTemplate=null,e.page=1,e.maxPage=1,e.items=new Array,e}return i(e,t),e.prototype.show=function(){t.prototype.show.call(this),a.default.instance.showBgMiniGame("Slot3x3");for(var e=0;e<this.items.length;e++)this.items[e].active=!1;null!=this.itemTemplate&&(this.itemTemplate.active=!1)},e.prototype.dismiss=function(){t.prototype.dismiss.call(this);for(var e=0;e<this.items.length;e++)this.items[e].active=!1},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.page=1,this.maxPage=1,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData()},e.prototype.actNextPage=function(){this.page<this.maxPage&&(this.page++,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData())},e.prototype.actPrevPage=function(){this.page>1&&(this.page--,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData())},e.prototype.loadData=function(){var t=this;a.default.instance.showLoading(!0),c.default.get(r.default.App.API,{c:134,mt:r.default.App.MONEY_TYPE,p:this.page,un:r.default.Login.Nickname},function(e,o){if(a.default.instance.showLoading(!1),null==e&&o.success){if(0==t.items.length){for(var n=0;n<7;n++)(s=cc.instantiate(t.itemTemplate)).parent=t.itemTemplate.parent,t.items.push(s);t.itemTemplate.destroy(),t.itemTemplate=null}t.maxPage=o.totalPages,t.lblPage.string=t.page+"/"+t.maxPage;for(var i=0;i<t.items.length;i++){var s=t.items[i];if(i<o.results.length){var c=o.results[i];s.getChildByName("bg").opacity=i%2==0?10:0,s.getChildByName("Session").getComponent(cc.Label).string=c.rf,s.getChildByName("Time").getComponent(cc.Label).string=c.ts,s.getChildByName("Bet").getComponent(cc.Label).string=p.default.formatNumber(c.bv),s.getChildByName("LineBet").getComponent(cc.Label).string=""==c.lb?0:c.lb.split(",").length,s.getChildByName("LineWin").getComponent(cc.Label).string=""==c.lb?0:c.lw.split(",").length,s.getChildByName("Result").getComponent(cc.Label).string=p.default.formatNumber(c.pz),s.active=!0}else s.active=!1}}})},s([d(cc.Label)],e.prototype,"lblPage",void 0),s([d(cc.Node)],e.prototype,"itemTemplate",void 0),s([h],e)}(l.default);o.default=f,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Loading/src/Http":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0}],"Slot3x3.PopupHonors":[function(t,e,o){"use strict";cc._RF.push(e,"9b0a7bB/KFOIYD7clUi6Y2b","Slot3x3.PopupHonors");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,c=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(s<3?i(c):s>3?i(e,o,c):i(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Loading/src/Http"),r=t("../../Loading/src/Configs"),a=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/Dialog"),p=t("../../Lobby/LobbyScript/Script/common/Utils"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblPage=null,e.itemTemplate=null,e.page=1,e.maxPage=1,e.items=new Array,e}return i(e,t),e.prototype.show=function(){t.prototype.show.call(this),a.default.instance.showBgMiniGame("Slot3x3");for(var e=0;e<this.items.length;e++)this.items[e].active=!1;null!=this.itemTemplate&&(this.itemTemplate.active=!1)},e.prototype.dismiss=function(){t.prototype.dismiss.call(this);for(var e=0;e<this.items.length;e++)this.items[e].active=!1},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.page=1,this.maxPage=1,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData()},e.prototype.actNextPage=function(){this.page<this.maxPage&&(this.page++,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData())},e.prototype.actPrevPage=function(){this.page>1&&(this.page--,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData())},e.prototype.loadData=function(){var t=this;a.default.instance.showLoading(!0),c.default.get(r.default.App.API,{c:135,mt:r.default.App.MONEY_TYPE,p:this.page},function(e,o){if(a.default.instance.showLoading(!1),null==e&&o.success){if(0==t.items.length){for(var n=0;n<7;n++)(s=cc.instantiate(t.itemTemplate)).parent=t.itemTemplate.parent,t.items.push(s);t.itemTemplate.destroy(),t.itemTemplate=null}t.maxPage=o.totalPages,t.lblPage.string=t.page+"/"+t.maxPage;for(var i=0;i<t.items.length;i++){var s=t.items[i];if(i<o.results.length){var c=o.results[i];s.getChildByName("bg").opacity=i%2==0?10:0,s.getChildByName("Time").getComponent(cc.Label).string=c.ts,s.getChildByName("Account").getComponent(cc.Label).string=c.un,s.getChildByName("Bet").getComponent(cc.Label).string=p.default.formatNumber(c.bv),s.getChildByName("Win").getComponent(cc.Label).string=p.default.formatNumber(c.pz),s.active=!0}else s.active=!1}}})},s([d(cc.Label)],e.prototype,"lblPage",void 0),s([d(cc.Node)],e.prototype,"itemTemplate",void 0),s([h],e)}(l.default);o.default=f,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Loading/src/Http":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0}],"Slot3x3.PopupSelectLine":[function(t,e,o){"use strict";cc._RF.push(e,"91e6cYmfSdJsK5BlQ9QfNHq","Slot3x3.PopupSelectLine");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,c=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(s<3?i(c):s>3?i(e,o,c):i(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Lobby/LobbyScript/Script/common/App"),r=t("../../Lobby/LobbyScript/Script/common/Dialog"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonsLine=null,e.btnClose=null,e.onSelectedChanged=null,e.SELECTED="selected",e}return i(e,t),e.prototype.start=function(){for(var t=this,e=function(e){var n=o.buttonsLine.children[e];n[o.SELECTED]=!0,n.on("click",function(){n[t.SELECTED]=!n[t.SELECTED],n.opacity=n[t.SELECTED]?255:80,null!=t.onSelectedChanged&&t.onSelectedChanged(t.getSelectedLines()),t.btnClose.interactable=t.getSelectedLines().length>0})},o=this,n=0;n<this.buttonsLine.childrenCount;n++)e(n)},e.prototype.show=function(){t.prototype.show.call(this),c.default.instance.showBgMiniGame("Slot3x3")},e.prototype.actSelectAll=function(){for(var t=0;t<this.buttonsLine.childrenCount;t++){var e=this.buttonsLine.children[t];e[this.SELECTED]=!0,e.opacity=e[this.SELECTED]?255:80}null!=this.onSelectedChanged&&this.onSelectedChanged(this.getSelectedLines()),this.btnClose.interactable=!0},e.prototype.actSelectEven=function(){for(var t=0;t<this.buttonsLine.childrenCount;t++){var e=this.buttonsLine.children[t];e[this.SELECTED]=t%2!=0,e.opacity=e[this.SELECTED]?255:80}null!=this.onSelectedChanged&&this.onSelectedChanged(this.getSelectedLines()),this.btnClose.interactable=!0},e.prototype.actSelectOdd=function(){for(var t=0;t<this.buttonsLine.childrenCount;t++){var e=this.buttonsLine.children[t];e[this.SELECTED]=t%2==0,e.opacity=e[this.SELECTED]?255:80}null!=this.onSelectedChanged&&this.onSelectedChanged(this.getSelectedLines()),this.btnClose.interactable=!0},e.prototype.actDeselectAll=function(){for(var t=0;t<this.buttonsLine.childrenCount;t++){var e=this.buttonsLine.children[t];e[this.SELECTED]=!1,e.opacity=e[this.SELECTED]?255:80}null!=this.onSelectedChanged&&this.onSelectedChanged(this.getSelectedLines()),this.btnClose.interactable=!1},e.prototype.getSelectedLines=function(){for(var t=new Array,e=0;e<this.buttonsLine.childrenCount;e++){var o=this.buttonsLine.children[e];(void 0===o[this.SELECTED]||o[this.SELECTED])&&t.push(e+1)}return t},e.prototype.dismiss=function(){this.getSelectedLines().length>0&&t.prototype.dismiss.call(this)},s([p(cc.Node)],e.prototype,"buttonsLine",void 0),s([p(cc.Button)],e.prototype,"btnClose",void 0),s([l],e)}(r.default);o.default=u,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0}],"Slot3x3.Slot3x3Controller":[function(t,e,o){"use strict";cc._RF.push(e,"80078ySa8dLVq8BknsW4brd","Slot3x3.Slot3x3Controller");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,c=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(s<3?i(c):s>3?i(e,o,c):i(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ButtonBet=void 0;var c=t("./Slot3x3.Cmd"),r=t("./Slot3x3.PopupSelectLine"),a=t("../../Loading/src/Configs"),l=t("../../Lobby/LobbyScript/MiniGame"),p=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),u=t("../../Lobby/LobbyScript/Script/common/Tween"),h=t("../../Lobby/LobbyScript/Script/common/Utils"),d=t("../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient"),f=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),b=t("../../Lobby/LobbyScript/Script/common/App"),g=t("../../Lobby/LobbyScript/Script/common/Dialog"),m=t("../../Loading/src/BundleControl"),y=t("./Slot3x3.PopupHonors"),S=t("./Slot3x3.PopupHistory"),v=cc._decorator,L=v.ccclass,C=v.property,_=function(){function t(){this.button=null,this.sfNormal=null,this.sfActive=null,this._isActive=!1}return t.prototype.setActive=function(t){this._isActive=t,this.button.getComponent(cc.Sprite).spriteFrame=t?this.sfActive:this.sfNormal,this.button.interactable=!t},s([C(cc.Button)],t.prototype,"button",void 0),s([C(cc.SpriteFrame)],t.prototype,"sfNormal",void 0),s([C(cc.SpriteFrame)],t.prototype,"sfActive",void 0),s([L("Slot3x3.ButtonBet")],t)}();o.ButtonBet=_;var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprFrameItems=[],e.sprFrameItemsBlur=[],e.itemTemplate=null,e.buttonBets=[],e.columns=null,e.linesWin=null,e.btnSpin=null,e.btnLine=null,e.btnClose=null,e.btnAuto=null,e.sfAuto0=null,e.sfAuto1=null,e.btnBoost=null,e.sfBoost0=null,e.sfBoost1=null,e.lblJackpot=null,e.lblWinCash=null,e.lblToast=null,e.lbLines=null,e.effectJackpot=null,e.effectBigWin=null,e.popupSelectLine=null,e.popupGuide=null,e.popupHistory=null,e.popupHonor=null,e.popups=[],e.rollStartItemCount=15,e.rollAddItemCount=10,e.spinDuration=1.2,e.addSpinDuration=.3,e.itemHeight=0,e.betIdx=0,e.listBet=[100,1e3,1e4],e.arrLineSelect=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],e.isSpined=!0,e.isBoost=!1,e.isAuto=!1,e.isCanChangeBet=!0,e.lastSpinRes=null,e}return i(e,t),e.prototype.start=function(){var t=this;this.itemHeight=this.itemTemplate.height;for(var e=0;e<this.columns.childrenCount;e++)for(var o=this.columns.children[e],n=this.rollStartItemCount+e*this.rollAddItemCount,i=0;i<n;i++){var s=cc.instantiate(this.itemTemplate);s.parent=o,i>=3?(s.children[0].active=!0,s.children[1].active=!1,s.children[0].getComponent(cc.Sprite).spriteFrame=this.sprFrameItemsBlur[h.default.randomRangeInt(0,this.sprFrameItemsBlur.length)]):(this.setItemAnim(s,h.default.randomRangeInt(0,6),!0),s.children[1].active=!0,s.children[0].active=!1)}this.itemTemplate.removeFromParent(),this.itemTemplate=null;var r,a=function(e){(r=l.buttonBets[e]).setActive(e==l.betIdx),r.button.node.on("click",function(){if(b.default.instance.showBgMiniGame("Slot3x3"),t.isCanChangeBet){var o=t.betIdx;t.betIdx=e;for(var n=0;n<t.buttonBets.length;n++)t.buttonBets[n].setActive(n==t.betIdx);t.isCanChangeBet=!1,t.scheduleOnce(function(){t.isCanChangeBet=!0},1),d.default.getInstance().send(new c.default.SendChangeRoom(o,t.betIdx))}else t.showToast(b.default.instance.getTextLang("txt_notify_fast_action"))})},l=this;for(e=0;e<this.buttonBets.length;e++)a(e);p.default.register(p.default.USER_LOGOUT,function(){t.node.active&&t.dismiss()},this),d.default.getInstance().addOnClose(function(){t.node.active&&t.dismiss()},this),d.default.getInstance().addListener(function(e){if(t.node.active)switch(new f.default(e).getCmdId()){case c.default.Code.UPDATE_JACKPOT:var o=new c.default.ReceiveUpdateJackpot(e);u.default.numberTo(t.lblJackpot,o.value,.3);break;case c.default.Code.SPIN:o=new c.default.ReceiveSpin(e),t.onSpinResult(o)}},this)},e.prototype.setItemAnim=function(t,e,o){void 0===o&&(o=!0);var n="";switch(e){case 0:n=o?"wild2":"wild";break;case 1:n=o?"kimcuong2":"kimcuong";break;case 2:n=o?"chuong2":"chuong";break;case 3:n=o?"vang2":"vang";break;case 4:n=o?"\u0111\u1ecf2":"\u0111\u1ecf";break;case 5:n=o?"xanh2":"xanh"}t.getComponentInChildren(sp.Skeleton).node.active=!0,t.getComponentInChildren(sp.Skeleton).setAnimation(0,n,!0),t.getComponentInChildren(cc.Sprite).node.active=!1},e.prototype.onToggleAuto=function(){this.isAuto=!this.isAuto,b.default.instance.showBgMiniGame("Slot3x3"),this.isAuto?(this.isSpined&&this.actSpin(),this.btnBoost.interactable=!1):(this.btnBoost.interactable=!0,this.isSpined&&this.setEnabledAllButtons(!0))},e.prototype.onToggleBoost=function(){this.isBoost=!this.isBoost,b.default.instance.showBgMiniGame("Slot3x3"),this.isBoost?(this.isSpined&&this.actSpin(),this.btnAuto.interactable=!1):(this.btnAuto.interactable=!0,this.isSpined&&this.setEnabledAllButtons(!0))},e.prototype.show=function(){if(this.node.active)this.reOrder();else{b.default.instance.showBgMiniGame("Slot3x3"),t.prototype.show.call(this),this.lblToast.node.parent.active=!1,this.lblWinCash.parent.active=!1;for(var e=0;e<this.linesWin.childrenCount;e++)this.linesWin.children[e].active=!1;for(this.isSpined=!0,this.isCanChangeBet=!0,this.betIdx=0,e=0;e<this.buttonBets.length;e++)this.buttonBets[e].setActive(e==this.betIdx);this.lbLines.string=this.arrLineSelect.length+"",d.default.getInstance().send(new c.default.SendScribe(this.betIdx))}},e.prototype.dismiss=function(){t.prototype.dismiss.call(this);for(var e=0;e<this.popups.length;e++)this.popups[e].active=!1;b.default.instance.hideGameMini("Slot3x3"),d.default.getInstance().send(new c.default.SendUnScribe(this.betIdx))},e.prototype.reOrder=function(){t.prototype.reOrder.call(this)},e.prototype.actSpin=function(t){if(void 0===t&&(t=null),this.isSpined){this.btnSpin.getComponentInChildren(sp.Skeleton).setAnimation(0,"cangat",!1),null!=t&&b.default.instance.showBgMiniGame("Slot3x3"),this.isSpined=!1,this.stopAllEffects(),this.stopShowLinesWin(),this.setEnabledAllButtons(!1);for(var e=0;e<this.buttonBets.length;e++)this.buttonBets[e].button.interactable=!1;d.default.getInstance().send(new c.default.SendSpin(this.listBet[this.betIdx],this.arrLineSelect.toString()))}else this.showToast(b.default.instance.getTextLang("txt_notify_fast_action"))},e.prototype.setEnabledAllButtons=function(t){this.btnSpin.interactable=t,this.btnClose.interactable=t,this.btnLine.interactable=t},e.prototype.showToast=function(t){this.lblToast.string=t;var e=this.lblToast.node.parent;e.stopAllActions(),e.active=!0,e.opacity=0,e.runAction(cc.sequence(cc.fadeIn(.1),cc.delayTime(2),cc.fadeOut(.2),cc.callFunc(function(){e.active=!1})))},e.prototype.onSpinResult=function(t){var e=this,o=this;if([0,1,2,3,4,5,6].indexOf(t.result)<0){this.scheduleOnce(function(){this.isSpined=!0},1),this.setEnabledAllButtons(!0);for(var n=0;n<this.buttonBets.length;n++)this.buttonBets[n].button.interactable=!0;switch(this.isAuto=!1,this.btnAuto.interactable=!0,this.btnAuto.getComponent(cc.Sprite).spriteFrame=this.sfAuto0,this.isBoost=!1,this.btnBoost.interactable=!0,this.btnBoost.getComponent(cc.Sprite).spriteFrame=this.sfBoost0,t.result){case 102:this.showToast(b.default.instance.getTextLang("txt_not_enough"));break;default:this.showToast(b.default.instance.getTextLang("txt_unknown_error1"))}}else{a.default.Login.Coin-=this.listBet[this.betIdx]*this.arrLineSelect.length,p.default.send(p.default.USER_UPDATE_COIN),a.default.Login.Coin=t.currentMoney,this.lastSpinRes=t;for(var i=t.matrix.split(","),s=this.isBoost?.5:1,c=function(t){var n=r.columns.children[t],c=.3*r.itemHeight,a=-r.itemHeight*n.childrenCount+3*r.itemHeight-.3*r.itemHeight,l=-r.itemHeight*n.childrenCount+3*r.itemHeight;n.runAction(cc.sequence(cc.delayTime(.2*t*s),cc.moveTo(.2*s,cc.v2(n.getPosition().x,c)).easing(cc.easeQuadraticActionOut()),cc.moveTo((r.spinDuration+r.addSpinDuration*t)*s,cc.v2(n.getPosition().x,a)).easing(cc.easeQuadraticActionInOut()),cc.moveTo(.2*s,cc.v2(n.getPosition().x,l)).easing(cc.easeQuadraticActionIn()),cc.callFunc(function(){n.setPosition(cc.v2(n.getPosition().x,0)),t===e.columns.childrenCount-1&&o.spined()}))),n.runAction(cc.sequence(cc.delayTime((.7+.2*t)*s),cc.callFunc(function(){var o=n.children;e.setItemAnim(o[2],parseInt(i[t]),!1),e.setItemAnim(o[1],parseInt(i[3+t]),!1),e.setItemAnim(o[0],parseInt(i[6+t]),!1),e.setItemAnim(o[o.length-1],parseInt(i[t]),!1),e.setItemAnim(o[o.length-2],parseInt(i[3+t]),!1),e.setItemAnim(o[o.length-3],parseInt(i[6+t]),!1)})))},r=this,l=0;l<this.columns.childrenCount;l++)c(l)}},e.prototype.spined=function(){var t=this;switch(p.default.send(p.default.USER_UPDATE_COIN),this.isSpined=!0,this.isAuto||this.isBoost||this.setEnabledAllButtons(!0),this.lastSpinRes.result){case 0:case 1:this.showLineWins();break;case 2:this.showEffectBigWin(this.lastSpinRes.prize,function(){return t.showLineWins()});break;case 3:case 4:this.showEffectJackpot(this.lastSpinRes.prize,function(){return t.showLineWins()});break;case 6:this.showEffectBigWin(this.lastSpinRes.prize,function(){return t.showLineWins()})}},e.prototype.showEffectBigWin=function(t,e){var o=this;this.effectBigWin.stopAllActions(),this.effectBigWin.active=!0;var n=this.effectBigWin.getComponentInChildren(cc.Label);n.node.active=!1,this.effectBigWin.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){n.string="",n.node.active=!0,u.default.numberTo(n,t,1)}),cc.delayTime(3),cc.callFunc(function(){o.effectBigWin.active=!1,null!=e&&e()})))},e.prototype.showEffectJackpot=function(t,e){var o=this;void 0===e&&(e=null),this.effectJackpot.stopAllActions(),this.effectJackpot.active=!0;var n=this.effectJackpot.getComponentInChildren(cc.Label);n.node.active=!1,this.effectJackpot.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){n.string="",n.node.active=!0,u.default.numberTo(n,t,1)}),cc.delayTime(3),cc.callFunc(function(){o.effectJackpot.active=!1,null!=e&&e()})))},e.prototype.showWinCash=function(t){var e=this.lblWinCash.parent,o=this.lblWinCash.getComponent(cc.Label);e.stopAllActions(),e.active=!0,o.string="0",e.opacity=0,e.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(function(){u.default.numberTo(o,t,.5)}),cc.delayTime(1.5),cc.fadeOut(.3),cc.callFunc(function(){e.active=!1})))},e.prototype.stopAllEffects=function(){this.effectJackpot.stopAllActions(),this.effectJackpot.active=!1,this.effectBigWin.stopAllActions(),this.effectBigWin.active=!1},e.prototype.stopShowLinesWin=function(){this.linesWin.stopAllActions();for(var t=0;t<this.linesWin.childrenCount;t++)this.linesWin.children[t].active=!1;this.stopAllItemEffect()},e.prototype.stopAllItemEffect=function(){for(var t=0;t<this.columns.childrenCount;t++){var e=this.columns.children[t].children;e[0].stopAllActions(),e[1].stopAllActions(),e[2].stopAllActions(),e[0].runAction(cc.scaleTo(.1,1)),e[1].runAction(cc.scaleTo(.1,1)),e[2].runAction(cc.scaleTo(.1,1))}},e.prototype.showLineWins=function(){var t=this;this.linesWin.stopAllActions();for(var e=this.lastSpinRes.linesWin.split(","),o=this.linesWin.children,n=0;n<o.length;n++)o[n].active=e.indexOf(""+(n+1))>=0;var i=[];this.lastSpinRes.prize>0&&(this.showWinCash(this.lastSpinRes.prize),i.push(cc.delayTime(1.5)),i.push(cc.callFunc(function(){for(var t=0;t<o.length;t++)o[t].active=!1}))),i.push(cc.delayTime(.5)),i.push(cc.callFunc(function(){if(t.isSpined=!0,t.isBoost||t.isAuto)t.actSpin();else{t.setEnabledAllButtons(!0);for(var e=0;e<t.buttonBets.length;e++)t.buttonBets[e].button.interactable=!0}})),this.linesWin.runAction(cc.sequence.apply(null,i))},e.prototype.actGuide=function(){var t=this;null==this.popupGuide?m.default.loadPrefabGame("Slot3x3","Xeng/Prefabs/PopupGuide",function(t,e){b.default.instance.showErrLoading(b.default.instance.getTextLang("txt_loading1")+parseInt(t/e*100)+"%")},function(e){b.default.instance.showLoading(!1),t.popupGuide=cc.instantiate(e).getComponent(g.default),t.popupGuide.node.parent=t.node,t.popupGuide.show(),t.popups.push(t.popupGuide.node)}):this.popupGuide.show()},e.prototype.actHistory=function(){var t=this;null==this.popupHistory?m.default.loadPrefabGame("Slot3x3","Xeng/Prefabs/PopupHistory",function(t,e){b.default.instance.showErrLoading(b.default.instance.getTextLang("txt_loading1")+parseInt(t/e*100)+"%")},function(e){b.default.instance.showLoading(!1),t.popupHistory=cc.instantiate(e).getComponent("Slot3x3.PopupHistory"),t.popupHistory.node.parent=t.node,t.popupHistory.show(),t.popups.push(t.popupHistory.node)}):this.popupHistory.show()},e.prototype.actHornor=function(){var t=this;null==this.popupHonor?m.default.loadPrefabGame("Slot3x3","Xeng/Prefabs/PopupHonors",function(t,e){b.default.instance.showErrLoading(b.default.instance.getTextLang("txt_loading1")+parseInt(t/e*100)+"%")},function(e){b.default.instance.showLoading(!1),t.popupHonor=cc.instantiate(e).getComponent("Slot3x3.PopupHonors"),t.popupHonor.node.parent=t.node,t.popupHonor.show(),t.popups.push(t.popupHonor.node)}):this.popupHonor.show()},e.prototype.actSelectLines=function(){var t=this;null==this.popupSelectLine?m.default.loadPrefabGame("Slot3x3","Xeng/Prefabs/PopupSelectLine",function(t,e){b.default.instance.showErrLoading(b.default.instance.getTextLang("txt_loading1")+parseInt(t/e*100)+"%")},function(e){b.default.instance.showLoading(!1),t.popupSelectLine=cc.instantiate(e).getComponent("Slot3x3.PopupSelectLine"),t.popupSelectLine.node.parent=t.node,t.popupSelectLine.show(),t.popups.push(t.popupSelectLine.node),t.popupSelectLine.onSelectedChanged=function(e){t.arrLineSelect=e,t.lbLines.string=t.arrLineSelect.length+""}}):this.popupSelectLine.show()},s([C([cc.SpriteFrame])],e.prototype,"sprFrameItems",void 0),s([C([cc.SpriteFrame])],e.prototype,"sprFrameItemsBlur",void 0),s([C(cc.Node)],e.prototype,"itemTemplate",void 0),s([C([_])],e.prototype,"buttonBets",void 0),s([C(cc.Node)],e.prototype,"columns",void 0),s([C(cc.Node)],e.prototype,"linesWin",void 0),s([C(cc.Button)],e.prototype,"btnSpin",void 0),s([C(cc.Button)],e.prototype,"btnLine",void 0),s([C(cc.Button)],e.prototype,"btnClose",void 0),s([C(cc.Toggle)],e.prototype,"btnAuto",void 0),s([C(cc.SpriteFrame)],e.prototype,"sfAuto0",void 0),s([C(cc.SpriteFrame)],e.prototype,"sfAuto1",void 0),s([C(cc.Toggle)],e.prototype,"btnBoost",void 0),s([C(cc.SpriteFrame)],e.prototype,"sfBoost0",void 0),s([C(cc.SpriteFrame)],e.prototype,"sfBoost1",void 0),s([C(cc.Label)],e.prototype,"lblJackpot",void 0),s([C(cc.Node)],e.prototype,"lblWinCash",void 0),s([C(cc.Label)],e.prototype,"lblToast",void 0),s([C(cc.Label)],e.prototype,"lbLines",void 0),s([C(cc.Node)],e.prototype,"effectJackpot",void 0),s([C(cc.Node)],e.prototype,"effectBigWin",void 0),s([C(r.default)],e.prototype,"popupSelectLine",void 0),s([C(g.default)],e.prototype,"popupGuide",void 0),s([C(S.default)],e.prototype,"popupHistory",void 0),s([C(y.default)],e.prototype,"popupHonor",void 0),s([C([cc.Node])],e.prototype,"popups",void 0),s([L],e)}(l.default);o.default=A,cc._RF.pop()},{"../../Loading/src/BundleControl":void 0,"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/MiniGame":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Tween":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"./Slot3x3.Cmd":"Slot3x3.Cmd","./Slot3x3.PopupHistory":"Slot3x3.PopupHistory","./Slot3x3.PopupHonors":"Slot3x3.PopupHonors","./Slot3x3.PopupSelectLine":"Slot3x3.PopupSelectLine"}]},{},["Slot3x3.Cmd","Slot3x3.PopupHistory","Slot3x3.PopupHonors","Slot3x3.PopupSelectLine","Slot3x3.Slot3x3Controller"]);