window.__require=function t(e,i,o){function n(s,c){if(!i[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var p=i[s]={exports:{}};e[s][0].call(p.exports,function(t){return n(e[s][1][t]||t)},p,p.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({"TaiXiuST.PopupDetailHistory":[function(t,e,i){"use strict";cc._RF.push(e,"09c98kFr0VGvpZn6EHnMi9N","TaiXiuST.PopupDetailHistory");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(a<3?n(s):a>3?n(e,i,s):n(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../Lobby/LobbyScript/Script/common/App"),c=t("../../Lobby/LobbyScript/Script/common/Dialog"),r=t("../../Lobby/LobbyScript/Script/common/Utils"),l=t("../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient"),p=t("./TaiXiuSieuToc.Controller"),u=cc._decorator,d=u.ccclass,h=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblSession=null,e.lblResult=null,e.lblPage=null,e.lblTotalBetTai=null,e.lblTotalBetXiu=null,e.lblTotalRefundTai=null,e.lblTotalRefundXiu=null,e.sfDices=[],e.sfTai=null,e.sfXiu=null,e.sprDice1=null,e.sprDice2=null,e.sprDice3=null,e.sprResult=null,e.sprResult_Tai=null,e.sprResult_Xiu=null,e.itemTemplate=null,e.items=[],e.inited=!1,e.session=0,e.page=1,e.totalPage=1,e.historiesTai=[],e.historiesXiu=[],e.totalBetTai=0,e.totalRefundTai=0,e.totalBetXiu=0,e.totalRefundXiu=0,e}return n(e,t),e.prototype.showDetail=function(t){this.session=t,this.show()},e.prototype.show=function(){if(t.prototype.show.call(this),s.default.instance.showBgMiniGame("TaiXiuSieuToc"),this.sprDice1.node.active=!1,this.sprDice2.node.active=!1,this.sprDice3.node.active=!1,this.lblSession.string="Phi\xean: #"+this.session,this.lblResult.string="",this.inited)for(var e=0;e<this.items.length;e++)this.items[e].active=!1;else{for(this.itemTemplate.active=!1,e=0;e<9;e++){var i=cc.instantiate(this.itemTemplate);i.parent=this.itemTemplate.parent,i.active=!1,this.items.push(i)}this.inited=!0}},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.loadData()},e.prototype.loadData=function(){for(var t=this,e=0;e<this.items.length;e++)this.items[e].active=!1;this.sprDice1.node.active=!1,this.sprDice2.node.active=!1,this.sprDice3.node.active=!1,this.lblSession.string="Phi\xean: #"+this.session,this.lblResult.string="",this.totalBetTai=0,this.totalBetXiu=0,this.totalRefundTai=0,this.totalRefundXiu=0,s.default.instance.showLoading(!0),l.default.getInstance().getHistorySessionId(this.session,function(e,i){if(null==e&&(t.historiesTai=[],t.historiesXiu=[],s.default.instance.showLoading(!1),null!==i.result)){null!=i.lstData&&i.lstData.length>0&&i.lstData.forEach(function(t){t.result=JSON.parse(t.result)}),i.result=JSON.parse(i.result);for(var o=0;o<i.lstData.length;o++){var n=i.lstData[o];1===n.typed?(t.historiesTai.push(n),t.totalBetTai+=n.betamount,t.totalRefundTai+=n.refundamount):(t.historiesXiu.push(n),t.totalBetXiu+=n.betamount,t.totalRefundXiu+=n.refundamount)}for(o=0;o<t.items.length;o++)t.items[o].active=!1;t.page=1,t.totalPage=t.historiesXiu.length>t.historiesTai.length?t.historiesXiu.length:t.historiesTai.length,t.totalPage=Math.ceil(t.totalPage/t.items.length),t.lblPage.string=t.page+"/"+t.totalPage,t.lblSession.string="Phi\xean: #"+i.id;var a=i.result[0]+i.result[1]+i.result[2];t.lblResult.string=a>10?" - T\xe0i "+a+"("+i.result[0]+"-"+i.result[1]+"-"+i.result[2]+")":" - X\u1ec9u "+a+"("+i.result[0]+"-"+i.result[1]+"-"+i.result[2]+")",t.lblTotalBetTai.string=r.default.formatNumber(t.totalBetTai)+" / "+r.default.formatNumber(t.totalRefundTai),t.lblTotalBetXiu.string=r.default.formatNumber(t.totalBetXiu)+" / "+r.default.formatNumber(t.totalRefundXiu),t.sprDice1.spriteFrame=t.sfDices[i.result[0]],t.sprDice1.node.active=!0,t.sprDice2.spriteFrame=t.sfDices[i.result[1]],t.sprDice2.node.active=!0,t.sprDice3.spriteFrame=t.sfDices[i.result[2]],t.sprDice3.node.active=!0,a>10?(cc.Tween.stopAllByTarget(t.sprResult_Tai),cc.Tween.stopAllByTarget(t.sprResult_Xiu),t.sprResult_Tai.scale=.6,t.sprResult_Xiu.scale=.6,cc.tween(t.sprResult_Tai).repeatForever(cc.tween().sequence(cc.tween().to(.3,{scale:.7}),cc.tween().to(.3,{scale:.6}),cc.tween().to(.3,{scale:.5}),cc.tween().to(.3,{scale:.6}))).start()):(cc.Tween.stopAllByTarget(t.sprResult_Tai),cc.Tween.stopAllByTarget(t.sprResult_Xiu),t.sprResult_Tai.scale=.6,t.sprResult_Xiu.scale=.6,cc.tween(t.sprResult_Xiu).repeatForever(cc.tween().sequence(cc.tween().to(.3,{scale:.7}),cc.tween().to(.3,{scale:.6}),cc.tween().to(.3,{scale:.5}),cc.tween().to(.3,{scale:.6}))).start()),t.loadDataPage()}})},e.prototype.loadDataPage=function(){for(var t=0;t<this.items.length;t++){var e,i,o=(this.page-1)*this.items.length+t,n=this.items[t];n.active=!0,o<this.historiesTai.length?(i=(i=(i=(e=this.historiesTai[o]).bettime).substring(0,i.indexOf("."))).replace("T","\n"),n.getChildByName("Time").getComponent(cc.Label).string=i,n.getChildByName("Account").getComponent(cc.Label).string=e.loginname,n.getChildByName("Refund").getComponent(cc.Label).string=r.default.formatNumber(e.refundamount),n.getChildByName("Bet").getComponent(cc.Label).string=r.default.formatNumber(e.betamount)):(n.getChildByName("Time").getComponent(cc.Label).string="",n.getChildByName("Account").getComponent(cc.Label).string="",n.getChildByName("Refund").getComponent(cc.Label).string="",n.getChildByName("Bet").getComponent(cc.Label).string=""),o<this.historiesXiu.length?(i=(i=(i=(e=this.historiesXiu[o]).bettime).substring(0,i.indexOf("."))).replace("T","\n"),n.getChildByName("Time2").getComponent(cc.Label).string=i,n.getChildByName("Account2").getComponent(cc.Label).string=e.loginname,n.getChildByName("Refund2").getComponent(cc.Label).string=r.default.formatNumber(e.refundamount),n.getChildByName("Bet2").getComponent(cc.Label).string=r.default.formatNumber(e.betamount)):(n.getChildByName("Time2").getComponent(cc.Label).string="",n.getChildByName("Account2").getComponent(cc.Label).string="",n.getChildByName("Refund2").getComponent(cc.Label).string="",n.getChildByName("Bet2").getComponent(cc.Label).string="")}this.lblPage.string=this.page+"/"+this.totalPage},e.prototype.actNextPage=function(){this.page++,this.page>this.totalPage&&(this.page=this.totalPage),this.loadDataPage()},e.prototype.actPrevPage=function(){this.page--,this.page<1&&(this.page=1),this.loadDataPage()},e.prototype.actNextSession=function(){this.session++;var t=p.default.instance.historySoiCau;this.session>t[t.length-1].session?this.session=t[t.length-1].session:this.loadData()},e.prototype.actPrevSession=function(){this.session--,this.loadData()},a([h(cc.Label)],e.prototype,"lblSession",void 0),a([h(cc.Label)],e.prototype,"lblResult",void 0),a([h(cc.Label)],e.prototype,"lblPage",void 0),a([h(cc.Label)],e.prototype,"lblTotalBetTai",void 0),a([h(cc.Label)],e.prototype,"lblTotalBetXiu",void 0),a([h(cc.Label)],e.prototype,"lblTotalRefundTai",void 0),a([h(cc.Label)],e.prototype,"lblTotalRefundXiu",void 0),a([h([cc.SpriteFrame])],e.prototype,"sfDices",void 0),a([h(cc.SpriteFrame)],e.prototype,"sfTai",void 0),a([h(cc.SpriteFrame)],e.prototype,"sfXiu",void 0),a([h(cc.Sprite)],e.prototype,"sprDice1",void 0),a([h(cc.Sprite)],e.prototype,"sprDice2",void 0),a([h(cc.Sprite)],e.prototype,"sprDice3",void 0),a([h(cc.Sprite)],e.prototype,"sprResult",void 0),a([h(cc.Node)],e.prototype,"sprResult_Tai",void 0),a([h(cc.Node)],e.prototype,"sprResult_Xiu",void 0),a([h(cc.Node)],e.prototype,"itemTemplate",void 0),a([d],e)}(c.default);i.default=g,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient":void 0,"./TaiXiuSieuToc.Controller":"TaiXiuSieuToc.Controller"}],"TaiXiuST.PopupHistory":[function(t,e,i){"use strict";cc._RF.push(e,"4dcdfq0qsBP2I1r8cxuvjZn","TaiXiuST.PopupHistory");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(a<3?n(s):a>3?n(e,i,s):n(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,c=t("../../Lobby/LobbyScript/Script/common/App"),r=t("../../Lobby/LobbyScript/Script/common/Dialog"),l=t("../../Lobby/LobbyScript/Script/common/Utils"),p=t("../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient"),u=cc._decorator,d=u.ccclass,h=u.property;(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblPage=null,e.prefab=null,e.scroll=null,e.page=1,e.maxPage=1,e.items=new Array,e.historyData=[],e.totalPageLoaded=0,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.show=function(){t.prototype.show.call(this),c.default.instance.showBgMiniGame("TaiXiuSieuToc"),this.historyData=[],this.totalPageLoaded=0;for(var e=0;e<this.items.length;e++)this.items[e].active=!1},e.prototype.dismiss=function(){t.prototype.dismiss.call(this),this.scroll.content.removeAllChildren();for(var e=0;e<this.items.length;e++)this.items[e].active=!1},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.page=1,this.maxPage=1,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData()},e.prototype.actNextPage=function(){this.page<this.maxPage&&(this.page++,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData())},e.prototype.actPrevPage=function(){this.page>1&&(this.page--,this.lblPage.string=this.page+"/"+this.maxPage,this.loadData())},e.prototype.loadData=function(t){var e=this;void 0===t&&(t=!0),c.default.instance.showLoading(!0),p.default.getInstance().getHistory(this.page-1,10,function(t,i){c.default.instance.showLoading(!1),null==t&&"SUCCES"==i.message&&(e.maxPage=i.totalPages,e.lblPage.string=e.page+"/"+e.maxPage,e.loadHistory(i.content))})},e.prototype.loadHistory=function(t){this.scroll.content.removeAllChildren();for(var e=0;e<t.length;e++){var i=cc.instantiate(this.prefab);i.parent=this.scroll.content,t[e].index=e,this.setItemData(i,t[e])}this.scroll.scrollToTop(.3)},e.prototype.setItemData=function(t,e){var i=e.index;t.getChildByName("bg").opacity=i%2==0?255:0,t.getChildByName("lblSession").getComponent(cc.Label).string="#"+e.taixiuId;var o=e.bettime;o=o.substr(0,o.indexOf(".")),t.getChildByName("lblTime").getComponent(cc.Label).string=o.replace("T","\n"),t.getChildByName("lblBetDoor").getComponent(cc.Label).string=1==e.typed?"T\xc0I":"X\u1ec8U",t.getChildByName("lblResult").getComponent(cc.Label).string=null==e.description?"Ch\u01b0a c\xf3 k\u1ebft qu\u1ea3":e.description,t.getChildByName("lblBet").getComponent(cc.Label).string=l.default.formatNumber(e.betamount),t.getChildByName("lblRefund").getComponent(cc.Label).string=l.default.formatNumber(e.refundamount),t.getChildByName("lblRefund").getComponent(cc.Label).node.color=e.refundamount>0?new cc.Color(240,191,11):new cc.Color(240,48,11),t.getChildByName("lblWin").getComponent(cc.Label).string=l.default.formatNumber(e.winamount),t.getChildByName("lblWin").getComponent(cc.Label).node.color=e.winamount>0?new cc.Color(240,191,11):new cc.Color(240,48,11),t.active=!0},e.prototype.onScrollEvent=function(t,e){e==cc.ScrollView.EventType.SCROLL_TO_BOTTOM&&this.page<this.maxPage&&(this.page++,this.loadData(!1))},a([h(cc.Label)],e.prototype,"lblPage",void 0),a([h(cc.Node)],e.prototype,"prefab",void 0),a([h(cc.ScrollView)],e.prototype,"scroll",void 0),a([d],e)}(r.default);t.PopupHistory=e})(s||(s={})),i.default=s.PopupHistory,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient":void 0}],"TaiXiuST.PopupHonors":[function(t,e,i){"use strict";cc._RF.push(e,"6a549DsjfNDC7i9SCvuQIrh","TaiXiuST.PopupHonors");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(a<3?n(s):a>3?n(e,i,s):n(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,c=t("../../Lobby/LobbyScript/Script/common/App"),r=t("../../Lobby/LobbyScript/Script/common/Dialog"),l=t("../../Lobby/LobbyScript/Script/common/ScrollViewControl"),p=t("../../Lobby/LobbyScript/Script/common/Utils"),u=t("../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient"),d=cc._decorator,h=d.ccclass,g=d.property;(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemTemplate=null,e.sprRank=[],e.items=new Array,e.scrView=null,e.dataList=[],e}return n(e,t),e.prototype.show=function(){t.prototype.show.call(this),c.default.instance.showBgMiniGame("TaiXiuSieuToc");for(var e=0;e<this.items.length;e++)this.items[e].active=!1;null!=this.itemTemplate&&(this.itemTemplate.active=!1)},e.prototype.dismiss=function(){t.prototype.dismiss.call(this);for(var e=0;e<this.items.length;e++)this.items[e].active=!1},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.loadData()},e.prototype.loadData=function(){c.default.instance.showLoading(!0),u.default.getInstance().getTopHonor()},e.prototype.initData=function(t){var e=this;this.dataList=t.slice(),this.scrView.setDataList(function(t,i){t.getChildByName("bg").opacity=t.itemID%2==0?255:0,t.getChildByName("lblRank").getComponent(cc.Label).string=(t.itemID+1).toString(),t.getChildByName("lblAccount").getComponent(cc.Label).string=i.loginname,t.getChildByName("lblWin").getComponent(cc.Label).string=p.default.formatNumber(i.amount),t.itemID<3?(t.getChildByName("ic_rank").active=!0,t.getChildByName("lblRank").active=!1,t.getChildByName("ic_rank").getComponent(cc.Sprite).spriteFrame=e.sprRank[i.index],2==i.index?t.getChildByName("ic_rank").x=-235.622:t.getChildByName("ic_rank").x=-239.622):(t.getChildByName("ic_rank").active=!1,t.getChildByName("lblRank").active=!0),t.active=!0},this.dataList)},a([g(cc.Node)],e.prototype,"itemTemplate",void 0),a([g([cc.SpriteFrame])],e.prototype,"sprRank",void 0),a([g(l.default)],e.prototype,"scrView",void 0),a([h],e)}(r.default);t.PopupHonors=e})(s||(s={})),i.default=s.PopupHonors,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/ScrollViewControl":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient":void 0}],"TaiXiuST.PopupSoiCau":[function(t,e,i){"use strict";cc._RF.push(e,"1c719HC9iRIK7MShRm/IZah","TaiXiuST.PopupSoiCau");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(a<3?n(s):a>3?n(e,i,s):n(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,c=t("../../Lobby/LobbyScript/Script/common/App"),r=t("../../Lobby/LobbyScript/Script/common/Dialog"),l=t("../../Lobby/LobbyScript/Script/common/Utils"),p=t("./TaiXiuSieuToc.Controller"),u=cc._decorator,d=u.ccclass,h=u.property;(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lineTemplate=null,e.iconTaiTemplate=null,e.iconXiuTemplate=null,e.iconXX1Template=null,e.iconXX2Template=null,e.iconXX3Template=null,e.iconNumberTaiTemplate=null,e.iconNumberXiuTemplate=null,e.page1=null,e.lblLastSession=null,e.xx1Draw=null,e.xx2Draw=null,e.xx3Draw=null,e.xx123Draw=null,e.page2=null,e.lblTai1=null,e.lblTai2=null,e.lblXiu1=null,e.lblXiu2=null,e.sprDot=[],e.contentDraw=null,e}return n(e,t),e.prototype.show=function(){t.prototype.show.call(this),c.default.instance.showBgMiniGame("TaiXiuSieuToc"),this.page1.active=!1,this.page2.active=!1,this.lineTemplate.parent.active=!1},e.prototype.dismiss=function(){t.prototype.dismiss.call(this),this.page1.active=!1,this.page2.active=!1},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.drawPage1(),this.page1.active=!0,this.page2.active=!1},e.prototype.toggleXX1=function(t){this.xx1Draw.active=t.isChecked},e.prototype.toggleXX2=function(t){this.xx2Draw.active=t.isChecked},e.prototype.toggleXX3=function(t){this.xx3Draw.active=t.isChecked},e.prototype.togglePage=function(){this.page1.active=!this.page1.active,this.page2.active=!this.page1.active,this.page1.active?this.drawPage1():this.drawPage2()},e.prototype.drawPage1=function(){var t=p.default.instance.historySoiCau.slice();t.length>21&&(t=t.splice(0,21));var e=t[0],i=e.dices,o=i[0]+i[1]+i[2];this.lblLastSession.string="Phi\xean g\u1ea7n nh\u1ea5t: (#"+e.session+")  "+(o>=11?"T\xc0I":"X\u1ec8U")+"  "+o+"("+i[0]+"-"+i[1]+"-"+i[2]+")",this.xx1Draw.removeAllChildren(),this.xx2Draw.removeAllChildren(),this.xx3Draw.removeAllChildren(),this.xx123Draw.removeAllChildren();for(var n=0,a=(t=t.reverse()).length-1;a>=0;a--){var s=t[a].dices,c=s[0]+s[1]+s[2],r=cc.v2(337.215-31.83*n,31*(s[0]-1)-274.135),u=cc.v2(337.215-31.83*n,31*(s[1]-1)-274.135),d=cc.v2(337.215-31.83*n,31*(s[2]-1)-274.135),h=cc.v2(337.215-31.83*n,31/3*(c-3)-13.907),g=cc.instantiate(this.iconXX1Template);g.parent=this.xx1Draw,g.zIndex=5,g.setPosition(r);var b=cc.instantiate(this.iconXX2Template);b.parent=this.xx2Draw,b.zIndex=5,b.setPosition(u);var y=cc.instantiate(this.iconXX3Template);y.parent=this.xx3Draw,y.zIndex=5,y.setPosition(d);var f=cc.instantiate(c>=11?this.iconTaiTemplate:this.iconXiuTemplate);if(f.parent=this.xx123Draw,f.setPosition(h),n>0){c=(s=t[a+1].dices)[0]+s[1]+s[2];var m=cc.v2(337.215-31.83*(n-1),31*(s[0]-1)-274.135),T=cc.v2(337.215-31.83*(n-1),31*(s[1]-1)-274.135),v=cc.v2(337.215-31.83*(n-1),31*(s[2]-1)-274.135),C=cc.v2(337.215-31.83*(n-1),31/3*(c-3)-13.907),S=cc.instantiate(this.lineTemplate);S.parent=this.xx1Draw,S.width=l.default.v2Distance(r,m),S.setPosition(r),S.angle=l.default.v2Degrees(r,m),S.color=cc.Color.BLACK.fromHEX("#c7452b"),S.zIndex=0,(S=cc.instantiate(this.lineTemplate)).parent=this.xx2Draw,S.width=l.default.v2Distance(u,T),S.setPosition(u),S.angle=l.default.v2Degrees(u,T),S.color=cc.Color.BLACK.fromHEX("#9fd100"),S.zIndex=0,(S=cc.instantiate(this.lineTemplate)).parent=this.xx3Draw,S.width=l.default.v2Distance(d,v),S.setPosition(d),S.angle=l.default.v2Degrees(d,v),S.color=cc.Color.BLACK.fromHEX("#3980d8"),S.zIndex=0,(S=cc.instantiate(this.lineTemplate)).parent=this.xx123Draw,S.width=l.default.v2Distance(h,C),S.setPosition(h),S.angle=l.default.v2Degrees(h,C),S.color=cc.Color.BLACK.fromHEX("#fdfdfb"),S.zIndex=-1}n++}},e.prototype.drawPage2=function(){var t=-295.979,e=113.257;this.contentDraw.removeAllChildren();var i=[],o=[],n=p.default.instance.historySoiCau.length,a=0,s=0;if(n>1)for(var c=p.default.instance.historySoiCau[0].dices,r=(m=c[0]+c[1]+c[2])>=11,l=0;l<n;l++){var u=(m=(c=p.default.instance.historySoiCau[l].dices)[0]+c[1]+c[2])>=11;u!==r?(o.length>5&&o.splice(0,o.length-5),i.push(o),r?a+=o.length:s+=o.length,r=u,(o=[]).push(m)):o.push(m),l===n-1&&(o.length>5&&o.splice(0,o.length-5),i.push(o),r?a+=o.length:s+=o.length)}i.length>20&&(i=i.splice(0,20)),i=i.reverse(),this.lblTai1.string=a+"",this.lblXiu1.string=s+"";for(var d=0;d<i.length;d++)for(var h=0;h<i[d].length;h++){var g=i[d][h],b=null;(b=g>=11?cc.instantiate(this.iconNumberTaiTemplate):cc.instantiate(this.iconNumberXiuTemplate)).parent=this.contentDraw,b.setPosition(cc.v2(t+32.5*d,e-32*h)),b.children[0].getComponent(cc.Label).string=""+g}t=-295.979,e=-127.113;var y=0,f=0;for(a=0,s=0,(i=p.default.instance.historySoiCau.slice()).length>100&&i.splice(0,i.length-100),i=i.reverse(),l=0;l<i.length;l++){var m;(m=i[l].dices[0]+i[l].dices[1]+i[l].dices[2])>=11?a++:s++;var T=cc.instantiate(m>=11?this.iconTaiTemplate:this.iconXiuTemplate);T.parent=this.contentDraw,T.setPosition(t+32.5*y,e-32*f-2),++f>=5&&(f=0,y++)}this.lblTai2.string=a+"",this.lblXiu2.string=s+""},a([h(cc.Node)],e.prototype,"lineTemplate",void 0),a([h(cc.Node)],e.prototype,"iconTaiTemplate",void 0),a([h(cc.Node)],e.prototype,"iconXiuTemplate",void 0),a([h(cc.Node)],e.prototype,"iconXX1Template",void 0),a([h(cc.Node)],e.prototype,"iconXX2Template",void 0),a([h(cc.Node)],e.prototype,"iconXX3Template",void 0),a([h(cc.Node)],e.prototype,"iconNumberTaiTemplate",void 0),a([h(cc.Node)],e.prototype,"iconNumberXiuTemplate",void 0),a([h(cc.Node)],e.prototype,"page1",void 0),a([h(cc.Label)],e.prototype,"lblLastSession",void 0),a([h(cc.Node)],e.prototype,"xx1Draw",void 0),a([h(cc.Node)],e.prototype,"xx2Draw",void 0),a([h(cc.Node)],e.prototype,"xx3Draw",void 0),a([h(cc.Node)],e.prototype,"xx123Draw",void 0),a([h(cc.Node)],e.prototype,"page2",void 0),a([h(cc.Label)],e.prototype,"lblTai1",void 0),a([h(cc.Label)],e.prototype,"lblTai2",void 0),a([h(cc.Label)],e.prototype,"lblXiu1",void 0),a([h(cc.Label)],e.prototype,"lblXiu2",void 0),a([h([cc.SpriteFrame])],e.prototype,"sprDot",void 0),a([h(cc.Node)],e.prototype,"contentDraw",void 0),a([d],e)}(r.default);t.PopupSoiCau=e})(s||(s={})),i.default=s.PopupSoiCau,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"./TaiXiuSieuToc.Controller":"TaiXiuSieuToc.Controller"}],"TaiXiuSieuToc.Cmd":[function(t,e,i){"use strict";var o;cc._RF.push(e,"bb85e4r9ChD+IuWiPOI9UNo","TaiXiuSieuToc.Cmd"),Object.defineProperty(i,"__esModule",{value:!0}),i.cmd=void 0,function(t){var e=function(){function t(){}return t.CMD_51S=5,t.CMD_50S=1,t.CMD_14S=2,t.CMD_BET=3,t.CMD_WIN_USER=4,t.CMD_REFUND_USER=7,t.CMD_HISTORY=6,t.CMD_TXRECORD_HISTORY=8,t.CMD_THONGKE_PHIEN=9,t.CMD_CHAT=10,t.CMD_CHAT_ALL=11,t.CMD_MAINTAIN=12,t.CMD_USER_BET=13,t.CMD_TOP_HONOR=14,t.CMD_DIS_TX=20,t}();t.Code=e;var i=function(){function t(){}return t.LOGIN="api/login",t.WS="websocket/ws-taixiu",t.USER="/user/queue/tx",t.DISCONNECT="/queue/disconnect",t.CHAT="/topic/chats",t.HISTORY_BET="api/tx/lichsucuoc",t}();t.API=i}(o=i.cmd||(i.cmd={})),i.default=o,cc._RF.pop()},{}],"TaiXiuSieuToc.Controller":[function(t,e,i){"use strict";cc._RF.push(e,"7a3a26zkstIOosxoiK6WsKN","TaiXiuSieuToc.Controller");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(a<3?n(s):a>3?n(e,i,s):n(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../Loading/src/Configs"),c=t("../../Lobby/LobbyScript/MiniGame"),r=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),p=t("../../Lobby/LobbyScript/Script/common/Tween"),u=t("../../Lobby/LobbyScript/Script/common/Utils"),d=t("../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient"),h=t("./TaiXiuSieuToc.Cmd"),g=t("../../Loading/src/BundleControl"),b=cc._decorator,y=b.ccclass,f=b.property,m=cc.tween,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollChat=null,e.chatNhanh=null,e.contentChatNhanh=null,e.lbTotalTai=null,e.lbTotalXiu=null,e.lbTotalBetTai=null,e.lbTotalBetXiu=null,e.lbBetXiu=null,e.lbBetTai=null,e.lbTimeCountDown=null,e.lbSession=null,e.lbTotalUserTai=null,e.lbTotalUserXiu=null,e.lbWin=null,e.lbScore=null,e.listFont=[],e.nodeBtnBet=null,e.nodeChat=null,e.nodeTxtTai=null,e.nodeTxtXiu=null,e.sprBtnBetXiu=null,e.sprBtnBetTai=null,e.bgGame=null,e.alertToast=null,e.nodeHistoryShort=null,e.popupContainer=null,e.bg_Score=null,e.bgLight=null,e.nodeBat=null,e.bgLighting=null,e.bgTime=null,e.edbChat=null,e.scrChat=null,e.dice1=null,e.dice2=null,e.dice3=null,e.dragon=null,e.table=null,e.sprDots=[],e.timeInBg=0,e.currentGate=-1,e.totalBet=0,e.currentBet=0,e.result=[],e.totalResult=0,e.session=0,e.stateGame=0,e.isConnected=!1,e.listChatHistory=[],e.listTimer=[],e.historySession=[],e.historySoiCau=[],e.historyShort=[],e.popups=[],e.gameSubscribeId="",e.currentBtnBet=null,e.timeConfirmBet=1,e.lastBetAmount=0,e.popupHonor=null,e.popupHistory=null,e.popupGuide=null,e.popupSoiCau=null,e.popupDetailSession=null,e}var i;return n(e,t),i=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.nodeChat.x=cc.winSize.width,this.nodeChat.active=!1,i.instance=this,d.default.TaiXiuSieuTocController=this,m(this.bgLighting).repeatForever(m().sequence(m().to(.5,{opacity:0}),m().to(.5,{opacity:255}))).start(),this.nodeBtnBet.active=!1;for(var e=this,o=function(){var t=n.contentChatNhanh.children[a];t.on("click",function(){e.onClickSendChatNhanh(t.children[0].getComponent(cc.Label).string),e.scrollChat.active=!0,e.chatNhanh.active=!1})},n=this,a=0;a<this.contentChatNhanh.childrenCount;a++)o()},e.prototype.toggleChatNhanh=function(){0==this.chatNhanh.active?(this.chatNhanh.active=!0,this.scrollChat.active=!1):(this.chatNhanh.active=!1,this.scrollChat.active=!0)},e.prototype.onEnable=function(){this.resetView(),this.stateGame=0,this.isConnected&&d.default.getInstance().getChatHistory()},e.prototype.start=function(){var t=this;this.setupTimeRunInBg(),0==d.default.getInstance().isConnected&&d.default.getInstance().connect(),d.default.getInstance().addListener(function(e){if(0!=t.node.active){0==t.isConnected&&(t.isConnected=!0,d.default.getInstance().subscribe(h.default.API.USER),d.default.getInstance().subscribe(h.default.API.DISCONNECT),setTimeout(function(){d.default.getInstance().getChatHistory()},500),d.default.getInstance().getHistorySession());var i=JSON.parse(e.body);switch(i.cmd){case h.default.Code.CMD_50S:t.session=i.id,0==t.lbTimeCountDown.node.active&&(t.lbTimeCountDown.node.active=!0,t.lbSession.string="#"+t.session,t.nodeBat.active=!0,t.nodeBat.y=9);var o=i.cd,n=i.at,a=i.ax;t.result=[],p.default.numberTo(t.lbTotalTai,n,.3),p.default.numberTo(t.lbTotalXiu,a,.3),t.lbTimeCountDown.string=o-33>=10?(o-33).toString():"0"+(o-33),t.lbTotalUserTai.string=i.ut,t.lbTotalUserXiu.string=i.ux,0!=t.stateGame&&3!=t.stateGame||(t.lbTimeCountDown.node.scale=1,t.lbTimeCountDown.node.setPosition(cc.v2(-2.7,47)),o-33<=5?(t.dragon.node.active=!0,t.dragon.setAnimation(0,"animation_dragon_only_x2speed",!0),t.lbTimeCountDown.node.color=(new cc.Color).fromHEX("#FF6A6A")):(t.dragon.node.active=!1,t.table.setAnimation(0,"animation_table_dragon",!0),t.lbTimeCountDown.node.color=cc.Color.WHITE)),47==o&&t.showToast(r.default.instance.getTextLang("txt_bet_invite")),33==o&&t.showToast(r.default.instance.getTextLang("txt_taixiu_finish")),38==o&&(t.dragon.node.active=!0,t.dragon.setAnimation(0,"animation_dragon_only_x2speed",!0),t.table.setAnimation(0,"animation_table_nodragon",!0)),o<36?(t.stateGame=4,1!=t.lbTimeCountDown.node.scale&&(cc.Tween.stopAllByTarget(t.lbTimeCountDown.node),t.lbTimeCountDown.node.scale=1,t.lbTimeCountDown.node.setPosition(cc.v2(-2.745,47)))):t.stateGame=1,t.lbTimeCountDown.node.color=o<39?(new cc.Color).fromHEX("#FF6A6A"):cc.Color.WHITE,t.dice1.node.active=!1,t.dice2.node.active=!1,t.dice3.node.active=!1;break;case h.default.Code.CMD_51S:t.dragon.node.active=!1,t.table.setAnimation(0,"animation_table_nodragon",!0),t.session=i.id,t.lbSession.string="#"+t.session,o=i.cd,t.lbTimeCountDown.string=o,t.result=i.rs,t.historyShort.unshift(i.rs),t.historySoiCau.unshift({session:t.session,dices:i.rs}),t.loadListHistoryShort(),t.totalResult=t.result[0]+t.result[1]+t.result[2],t.showResultWin(!0),1!=t.stateGame&&0!=t.stateGame||(t.stateGame=3),t.bgTime.active=!0,cc.Tween.stopAllByTarget(t.lbTimeCountDown.node),m(t.lbTimeCountDown.node).to(.5,{scale:.25,x:t.bgTime.x,y:t.bgTime.y+8},{easing:cc.easing.sineIn}).start(),m(t.lbTimeCountDown.node).tag(1);break;case h.default.Code.CMD_14S:t.session=i.id,t.lbSession.string="#"+t.session,23==i.cd&&t.shakeDice(),t.result=i.rs,t.totalResult=t.result[0]+t.result[1]+t.result[2],i.cd<=5&&(t.lbTimeCountDown.node.color=(new cc.Color).fromHEX("#FF6A6A"),t.bgTime.active=!0,t.lbTimeCountDown.node.active=!0,t.lbTimeCountDown.node.scale=.25,t.lbTimeCountDown.node.setPosition(cc.v2(t.bgTime.x,t.bgTime.y+8)),t.lbTimeCountDown.string="0"+i.cd,t.stateGame=3,t.setDice(),t.dragon.node.active=!1,t.table.setAnimation(0,"animation_table_nodragon",!0),t.nodeBat.active=!1),0==i.cd&&t.resetView(),t.lbTotalUserTai.string=u.default.formatNumber(i.ut),t.lbTotalUserXiu.string=u.default.formatNumber(i.ux),t.lbTotalTai.string=u.default.formatNumber(i.at),t.lbTotalXiu.string=u.default.formatNumber(i.ax);break;case h.default.Code.CMD_BET:null!=i.data&&0==i.status?(t.showToast(r.default.instance.getTextLang("txt_bet_success")),t.lastBetAmount=i.data.betamount,t.totalBet+=i.data.betamount,t.currentBet=0,1==t.currentGate?p.default.numberTo(t.lbTotalBetTai,t.totalBet,.3):p.default.numberTo(t.lbTotalBetXiu,t.totalBet,.3),t.sprBtnBetTai.active=!0,t.sprBtnBetXiu.active=!0,t.lbBetTai.node.active=!1,t.lbBetXiu.node.active=!1,s.default.Login.Coin-=i.data.betamount,l.default.send(l.default.USER_UPDATE_COIN)):t.showToast(r.default.instance.getTextLang("txt_bet_error2"));break;case h.default.Code.CMD_CHAT_ALL:i.data.length>0&&(t.listChatHistory=i.data,t.listChatHistory.length>15&&t.listChatHistory.splice(0,15),t.initListChat());break;case h.default.Code.CMD_CHAT:t.listChatHistory.push(i),t.listChatHistory.length>15&&t.listChatHistory.splice(0,1),t.addChat(i.u,i.m,t.listChatHistory.length-1);break;case h.default.Code.CMD_HISTORY:i.data.length>0&&(t.historySession=i.data,t.historySession.forEach(function(e){if(null!=e.result){t.historyShort.push(e.result);var i={};i.session=e.id,i.dices=JSON.parse(e.result),t.historySoiCau.push(i)}}),t.loadListHistoryShort());break;case h.default.Code.CMD_TXRECORD_HISTORY:case h.default.Code.CMD_REFUND_USER:break;case h.default.Code.CMD_WIN_USER:var c=i.amount;t.lbWin.string="+"+u.default.formatNumber(c),s.default.Login.Coin+=c,l.default.send(l.default.USER_UPDATE_COIN),t.lbWin.node.active=!0,m(t.lbWin.node).set({y:300,scale:3,opacity:0,angle:-720}).to(1,{y:25,scale:1,opacity:255,angle:0},{easing:cc.easing.sineIn}).delay(1.5).call(function(){t.lbWin.node.active=!1}).start();break;case h.default.Code.CMD_THONGKE_PHIEN:case h.default.Code.CMD_USER_BET:break;case h.default.Code.CMD_TOP_HONOR:null!=t.popupHonor&&t.popupHonor.node.active&&0==i.status&&null!=i.data&&t.popupHonor.initData(i.data),r.default.instance.showLoading(!1);break;case h.default.Code.CMD_DIS_TX:t.dismiss()}}},this),l.default.register(l.default.USER_LOGOUT,function(){t.node.active&&t.dismiss()},this)},e.prototype.setupTimeRunInBg=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){t.timeInBg=cc.sys.now()}),cc.game.on(cc.game.EVENT_SHOW,function(){var e=cc.sys.now(),i=t.timeInBg;cc.director.getActionManager().update((e-i)/1e3),cc.Tween.stopAllByTag(1),(e-i)/1e3>15&&t.dismiss()})},e.prototype.show=function(){this.node.active?this.reOrder():(r.default.instance.showBgMiniGame("TaiXiuSieuToc"),t.prototype.show.call(this))},e.prototype.dismiss=function(){t.prototype.dismiss.call(this),this.showNodeChat(!1)},e.prototype.onDestroy=function(){},e.prototype.resetView=function(){this.showResultWin(!1),this.bgLight.active=!1,this.nodeBat.active=!1,this.nodeBat.scale=1,this.lbTimeCountDown.node.active=!1,this.dragon.node.active=!1,this.table.setAnimation(0,"animation_table_nodragon",!0),this.lbTotalBetXiu.string=this.lbTotalBetTai.string=this.lbTotalBetXiu.string=this.lbTotalXiu.string=this.lbTotalTai.string=this.lbTotalUserTai.string=this.lbTotalUserXiu.string=this.lbBetTai.string=this.lbBetXiu.string="0",this.sprBtnBetTai.active=!0,this.sprBtnBetXiu.active=!0,this.lbBetTai.node.active=!1,this.lbBetXiu.node.active=!1,this.lbScore.node.active=!1,this.bg_Score.active=!1,this.sprBtnBetTai.parent.getChildByName("boxBet").active=!1,this.sprBtnBetXiu.parent.getChildByName("boxBet").active=!1,this.totalBet=0,this.currentGate=-1,this.nodeTxtTai.scale=1,this.nodeTxtXiu.scale=1,this.nodeTxtTai.angle=0,this.nodeTxtXiu.angle=0,this.lastBetAmount=0,this.result=[],this.lbTimeCountDown.node.color=cc.Color.WHITE,this.lbTimeCountDown.node.scale=1,this.lbTimeCountDown.node.active=!1,this.lbTimeCountDown.node.setPosition(cc.v2(-2.745,47)),this.bgTime.active=!1,null!=this.currentBtnBet&&(this.currentBtnBet.color=cc.Color.WHITE),cc.Tween.stopAllByTag(1)},e.prototype.shakeDice=function(){var t=this;this.dice1.node.active=this.dice2.node.active=this.dice3.node.active=!0,this.dice1.setAnimation(0,this.getAnimationDiceStart(u.default.randomRangeInt(1,6)),!1),this.dice2.setAnimation(0,this.getAnimationDiceStart(u.default.randomRangeInt(1,6)),!1),this.dice3.setAnimation(0,this.getAnimationDiceStart(u.default.randomRangeInt(1,6)),!1),cc.Tween.stopAllByTarget(this.dice1.node),cc.Tween.stopAllByTarget(this.dice2.node),cc.Tween.stopAllByTarget(this.dice3.node),m(this.dice1.node).delay(1.5).to(.5,{opacity:0},{easing:cc.easing.sineIn}).start(),m(this.dice2.node).delay(1.5).to(.5,{opacity:0},{easing:cc.easing.sineIn}).start(),m(this.dice3.node).delay(1.5).to(.5,{opacity:0},{easing:cc.easing.sineIn}).start(),this.nodeBat.y=150,this.nodeBat.opacity=0,cc.Tween.stopAllByTarget(this.nodeBat),this.nodeBat.active=!0,m(this.nodeBat).delay(1.5).to(.75,{y:9,opacity:255,scale:1},{easing:cc.easing.sineOut}).call(function(){t.table.setAnimation(0,"animation_table_dragon",!0)}).start(),m(this.nodeBat).tag(1),m(this.dice3.node).tag(1),m(this.dice2.node).tag(1),m(this.dice1.node).tag(1)},e.prototype.setDice=function(){this.dice1.node.active&&255==this.dice1.node.opacity||(cc.Tween.stopAllByTarget(this.nodeBat),m(this.nodeBat).to(.5,{y:100,opacity:0,scale:1.2},{easing:cc.easing.sineOut}).start(),m(this.dice1.node).to(.5,{opacity:255},{easing:cc.easing.sineOut}).start(),m(this.dice2.node).to(.5,{opacity:255},{easing:cc.easing.sineOut}).start(),m(this.dice3.node).to(.5,{opacity:255},{easing:cc.easing.sineOut}).start(),m(this.dice1.node).tag(1),m(this.dice3.node).tag(1),m(this.dice2.node).tag(1),this.dice1.node.active=this.dice2.node.active=this.dice3.node.active=!0,this.dice1.setAnimation(0,this.getAnimationDiceEnd(this.result[0]),!1),this.dice2.setAnimation(0,this.getAnimationDiceEnd(this.result[1]),!1),this.dice3.setAnimation(0,this.getAnimationDiceEnd(this.result[2]),!1))},e.prototype.getAnimationDiceEnd=function(t){var e="";return 1==t?e="#1 END_F1":2==t?e="#1 END_F2":3==t?e="#1 END_F3":4==t?e="#1 END_F4":5==t?e="#1 END_F5":6==t&&(e="#1 END_F6"),e},e.prototype.getAnimationDiceStart=function(t){var e="";return 1==t?e="#1 WHITE_F1":2==t?e="#1 WHITE_F2":3==t?e="#1 WHITE_F3":4==t?e="#1 WHITE_F4":5==t?e="#1 WHITE_F5":6==t&&(e="#1 WHITE_F6"),e},e.prototype.onClick=function(){this.loginGame()},e.prototype.loginGame=function(){},e.prototype.subcribeWS=function(){d.default.getInstance().connect()},e.prototype.onClickHonor=function(){var t=this;null==this.popupHonor?cc.assetManager.getBundle("TaiXiuSieuToc").load("Prefabs/PopupHonors",cc.Prefab,function(){},function(e,i){t.popupHonor=cc.instantiate(i).getComponent("TaiXiuST.PopupHonors"),t.popupHonor.node.parent=t.popupContainer,t.popupHonor.node.active=!0,t.popupHonor.show(),t.popups.push(t.popupHonor.node)}):this.popupHonor.show()},e.prototype.onClickHistory=function(){var t=this;null==this.popupHistory?cc.assetManager.getBundle("TaiXiuSieuToc").load("Prefabs/PopupHistory",cc.Prefab,function(){},function(e,i){t.popupHistory=cc.instantiate(i).getComponent("TaiXiuST.PopupHistory"),t.popupHistory.node.parent=t.popupContainer,t.popupHistory.node.active=!0,t.popupHistory.show(),t.popups.push(t.popupHistory.node)}):this.popupHistory.show()},e.prototype.onClickHistorySession=function(){var t=this;null==this.popupDetailSession?cc.assetManager.getBundle("TaiXiuSieuToc").load("Prefabs/PopupDetailHistory",cc.Prefab,function(){},function(e,i){t.popupDetailSession=cc.instantiate(i).getComponent("TaiXiuST.PopupDetailHistory"),t.popupDetailSession.node.parent=t.popupContainer,t.popupDetailSession.showDetail(t.session-1),t.popups.push(t.popupDetailSession.node),r.default.instance.showLoading(!1)}):this.popupDetailSession.showDetail(this.session-1)},e.prototype.onClickSoiCau=function(){var t=this;null==this.popupSoiCau?cc.assetManager.getBundle("TaiXiuSieuToc").load("Prefabs/PopupSoiCau",cc.Prefab,function(){},function(e,i){t.popupSoiCau=cc.instantiate(i).getComponent("TaiXiuST.PopupSoiCau"),t.popupSoiCau.node.parent=t.popupContainer,t.popupSoiCau.show(),t.popups.push(t.popupSoiCau.node),r.default.instance.showLoading(!1)}):this.popupSoiCau.show()},e.prototype.onClickGuide=function(){var t=this;null==this.popupGuide?cc.assetManager.getBundle("TaiXiuSieuToc").load("Prefabs/PopupGuide",cc.Prefab,function(){},function(e,i){t.popupGuide=cc.instantiate(i).getComponent("Dialog"),t.popupGuide.node.parent=t.popupContainer,t.popupGuide.show(),t.popups.push(t.popupGuide.node),r.default.instance.showLoading(!1)}):this.popupGuide.show()},e.prototype.reOrder=function(){t.prototype.reOrder.call(this)},e.prototype.onClickClose=function(){this.dismiss(),r.default.instance.hideGameMini("TaiXiuSieuToc")},e.prototype.onClickChat=function(){r.default.instance.showBgMiniGame("TaiXiuSieuToc"),this.showNodeChat(!this.nodeChat.active)},e.prototype.onClickSendChat=function(){r.default.instance.showBgMiniGame("TaiXiuSieuToc");var t={};t.u=s.default.Login.Nickname,t.m=this.edbChat.string.trim(),this.edbChat.string="",d.default.getInstance().sendChat(t)},e.prototype.onClickSendChatNhanh=function(t){r.default.instance.showBgMiniGame("TaiXiuSieuToc");var e={};e.u=s.default.Login.Nickname,e.m=t,d.default.getInstance().sendChat(e)},e.prototype.onClickBet=function(t,e){if(r.default.instance.showBgMiniGame("TaiXiuSieuToc"),this.currentGate<0)this.showToast(r.default.instance.getTextLang("txt_taixiu_choose_gate"));else if(s.default.Login.Coin<parseInt(e))this.showToast(r.default.instance.getTextLang("txt_not_enough"));else if(1==this.stateGame){var i=parseInt(e);this.currentBet+=i,1==this.currentGate?(this.lbBetTai.node.active=!0,this.sprBtnBetTai.active=!1,p.default.numberTo(this.lbBetTai,this.currentBet,.3)):2==this.currentGate&&(this.lbBetXiu.node.active=!0,this.sprBtnBetXiu.active=!1,p.default.numberTo(this.lbBetXiu,this.currentBet,.3)),null!=this.currentBtnBet&&(this.currentBtnBet.color=cc.Color.WHITE),this.currentBtnBet=t.target,this.currentBtnBet.color=(new cc.Color).fromHEX("#FFE000"),m(this.currentBtnBet).to(.1,{scale:1.2}).to(.1,{scale:1}).start()}else 4==this.stateGame?this.showToast(r.default.instance.getTextLang("txt_bet_error8")):this.showToast(r.default.instance.getTextLang("txt_bet_error3"))},e.prototype.onClickAllIn=function(){r.default.instance.showBgMiniGame("TaiXiuSieuToc"),s.default.Login.Coin<1e3?this.showToast(r.default.instance.getTextLang("txt_bet_error7")):this.onClickBet(null,s.default.Login.Coin)},e.prototype.onClickConfirmBet=function(){var t=this;if(r.default.instance.showBgMiniGame("TaiXiuSieuToc"),0!=this.timeConfirmBet)if(this.currentGate<0)this.showToast(r.default.instance.getTextLang("txt_taixiu_choose_gate"));else if(this.currentBet<=0&&this.lastBetAmount<=0)this.showToast(r.default.instance.getTextLang("txt_bet_error9"));else if(4!=this.stateGame){if(!d.default.getInstance().checkSubChannel(this.gameSubscribeId))return d.default.getInstance().subscribe(h.default.API.USER),void this.showToast(r.default.instance.getTextLang("txt_bet_error2"));this.timeConfirmBet=0,this.scheduleOnce(function(){t.timeConfirmBet=1},1);var e={};e.taixiuId=this.session,e.loginname=s.default.Login.Nickname,e.betamount=this.currentBet,0==this.currentBet&&this.lastBetAmount>0&&(e.betamount=this.lastBetAmount),e.typed=this.currentGate;var i=0;cc.sys.isNative&&(i=cc.sys.os==cc.sys.OS_ANDROID?2:1),e.betfrom=i,d.default.getInstance().sendBet(e)}else this.showToast(r.default.instance.getTextLang("txt_bet_error8"));else{var o=r.default.instance.getTextLang("txt_notify_fast_action");this.showToast(o)}},e.prototype.getHistorySession=function(){d.default.getInstance().getHistorySession()},e.prototype.onClickCancelBet=function(){r.default.instance.showBgMiniGame("TaiXiuSieuToc"),this.sprBtnBetTai.active=!0,this.sprBtnBetXiu.active=!0,this.lbBetXiu.node.active=!1,this.lbBetTai.node.active=!1,this.currentBet=0},e.prototype.setTimeCountDown=function(){},e.prototype.onClickChooseGate=function(t,e){if(r.default.instance.showBgMiniGame("TaiXiuSieuToc"),-1!=this.currentGate&&this.totalBet&&("TAI"==e&&2==this.currentGate||"XIU"==e&&1==this.currentGate))this.showToast(r.default.instance.getTextLang("txt_taixiu_chat_error4"));else if(3!=this.stateGame)if(4!=this.stateGame){switch(e){case"TAI":this.currentGate=1,this.currentBet=0,this.lbBetTai.string="0",this.lbBetXiu.node.active=!1,this.lbBetTai.node.active=!0,this.sprBtnBetTai.parent.getChildByName("boxBet").active=!0,this.sprBtnBetXiu.parent.getChildByName("boxBet").active=!1,this.sprBtnBetTai.active=!1,this.sprBtnBetXiu.active=!0;break;case"XIU":this.currentGate=2,this.currentBet=0,this.lbBetXiu.string="0",this.lbBetTai.node.active=!1,this.lbBetXiu.node.active=!0,this.sprBtnBetTai.active=!0,this.sprBtnBetXiu.active=!1,this.sprBtnBetTai.parent.getChildByName("boxBet").active=!1,this.sprBtnBetXiu.parent.getChildByName("boxBet").active=!0}this.showNodeBtnBet(!0)}else this.showToast(r.default.instance.getTextLang("txt_bet_error8"));else this.showToast(r.default.instance.getTextLang("txt_bet_error3"))},e.prototype.showNodeBtnBet=function(t){if(0==this.nodeBtnBet.active&&t){this.nodeBtnBet.active=!0;for(var e=0;e<8;e++){var i=this.nodeBtnBet.children[e],o=.05*e;i.scale=0,cc.tween(i).sequence(cc.tween().delay(o),cc.tween().to(.1,{scale:1},{easing:cc.easing.backOut})).start()}}else t||(this.nodeBtnBet.active=!1)},e.prototype.showNodeChat=function(t){var e=this;t?(this.nodeChat.active=!0,m(this.nodeChat).set({x:cc.winSize.width,opacity:0}).to(.3,{x:558.03,opacity:255},{easing:cc.easing.sineOut}).start()):m(this.nodeChat).to(.3,{x:cc.winSize.width,opacity:0},{easing:cc.easing.sineIn}).call(function(){e.nodeChat.active=!1}).start()},e.prototype.showResultWin=function(t){if(t){var e=m().to(.25,{scale:1.2}),i=m().to(.125,{angle:10}),o=m().to(.125,{angle:0}),n=m().to(.125,{angle:-10}),a=m().to(.125,{angle:0}),s=m().to(.25,{scale:1}),c=m().sequence(i,o,n,a,s);this.lbScore.string=this.totalResult.toString(),this.lbScore.node.active=!0,this.bg_Score.active=!0,this.bgLight.active=!0,this.totalResult>10?(m(this.nodeTxtTai).repeat(5,m().sequence(m().delay(.5),m().parallel(e,c))).start(),this.bgLight.x=this.nodeTxtTai.x):(this.bgLight.x=this.nodeTxtXiu.x,m(this.nodeTxtXiu).repeat(5,m().sequence(m().delay(.5),m().parallel(e,c))).start())}else cc.Tween.stopAllByTarget(this.nodeTxtTai),cc.Tween.stopAllByTarget(this.nodeTxtXiu),this.nodeTxtTai.scale=1,this.nodeTxtXiu.scale=1},e.prototype.loadListHistoryShort=function(){for(var t=this,e=this.historyShort.slice(0,18).reverse(),i=function(i){var n=o.nodeHistoryShort.children[i];n||(n=cc.instantiate(o.nodeHistoryShort.children[0]),o.nodeHistoryShort.addChild(n));var a="string"==typeof e[i]?JSON.parse(e[i]):e[i],s=a[0]+a[1]+a[2];n.getComponent(cc.Sprite).spriteFrame=s>10?o.sprDots[0]:o.sprDots[1],s>10?n.setContentSize(cc.size(23,23)):n.setContentSize(cc.size(26,26)),n.active=!0,n.y=0,m(n).set({scale:0}).delay(.01*i).to(.3,{scale:1},{easing:cc.easing.backOut}).call(function(){17==t.nodeHistoryShort.children.indexOf(n)&&m(n).repeatForever(m().sequence(m().to(.5,{y:10}),m().to(.5,{y:0}))).start()}).start()},o=this,n=0;n<e.length;n++)i(n)},e.prototype.showToast=function(t){var e=this;this.alertToast.getComponentInChildren(cc.Label).string=t,this.alertToast.active=!0,cc.Tween.stopAllByTarget(this.alertToast),m(this.alertToast).set({x:-300,opacity:0}).to(.3,{x:0,opacity:255},{easing:cc.easing.sineOut}).delay(1.4).to(.3,{x:300,opacity:0},{easing:cc.easing.backIn}).call(function(){e.alertToast.active=!1}).start(),m(this.alertToast).tag(1)},e.prototype.initListChat=function(){var t=this;if(this.scrChat.content.on(cc.Node.EventType.CHILD_ADDED,function(){t.onScrollChatEvent()}),1==this.scrChat.content.childrenCount)for(var e=1;e<15;e++)this.scrChat.content.addChild(cc.instantiate(this.scrChat.content.children[0]));for(e=0;e<this.listChatHistory.length;e++){var i=this.listChatHistory[e];this.addChat(i.u,i.m,e)}this.showNodeChat(!0)},e.prototype.reloadListChat=function(){},e.prototype.actTransaction=function(){var t=this;s.default.Login.IsLogin?this.popupTransaction?this.popupTransaction.show():g.default.loadPrefabPopup("PrefabPopup/PopupTransaction",function(e){var i=cc.instantiate(e).getComponent("Lobby.PopupTransaction");r.default.instance.node.addChild(i.node),t.popupTransaction=i,t.popupTransaction.show()}):r.default.instance.alertDialog.showMsg(r.default.instance.getTextLang("txt_need_login"))},e.prototype.addChat=function(t,e,i){var o=this.scrChat.content.children[i];o||(o=cc.instantiate(this.scrChat.content.children[0]),this.scrChat.content.addChild(o)),o.active=!0,o.opacity=255;var n=t;n.length>10&&(n=n.substring(0,7)+".."),e=e.replace(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),o.getComponent(cc.Label).string=n+" : "+e,o.children[0].getComponent(cc.Label).string=n+" : ",this.scrChat.content.childrenCount>=15&&this.scrChat.content.children[0].destroy()},e.prototype.onScrollChatEvent=function(){for(var t=0;t<this.scrChat.content.childrenCount;t++){var e=this.scrChat.content.children[t],i=this.scrChat.node.getChildByName("view"),o=this.scrChat.content.convertToWorldSpaceAR(e.getPosition()),n=i.convertToNodeSpaceAR(o);n.y>i.height+2*e.height||n.y<-e.height?e.opacity=0:e.opacity=255}},e.instance=null,a([f(cc.Node)],e.prototype,"scrollChat",void 0),a([f(cc.Node)],e.prototype,"chatNhanh",void 0),a([f(cc.Node)],e.prototype,"contentChatNhanh",void 0),a([f(cc.Label)],e.prototype,"lbTotalTai",void 0),a([f(cc.Label)],e.prototype,"lbTotalXiu",void 0),a([f(cc.Label)],e.prototype,"lbTotalBetTai",void 0),a([f(cc.Label)],e.prototype,"lbTotalBetXiu",void 0),a([f(cc.Label)],e.prototype,"lbBetXiu",void 0),a([f(cc.Label)],e.prototype,"lbBetTai",void 0),a([f(cc.Label)],e.prototype,"lbTimeCountDown",void 0),a([f(cc.Label)],e.prototype,"lbSession",void 0),a([f(cc.Label)],e.prototype,"lbTotalUserTai",void 0),a([f(cc.Label)],e.prototype,"lbTotalUserXiu",void 0),a([f(cc.Label)],e.prototype,"lbWin",void 0),a([f(cc.Label)],e.prototype,"lbScore",void 0),a([f([cc.Font])],e.prototype,"listFont",void 0),a([f(cc.Node)],e.prototype,"nodeBtnBet",void 0),a([f(cc.Node)],e.prototype,"nodeChat",void 0),a([f(cc.Node)],e.prototype,"nodeTxtTai",void 0),a([f(cc.Node)],e.prototype,"nodeTxtXiu",void 0),a([f(cc.Node)],e.prototype,"sprBtnBetXiu",void 0),a([f(cc.Node)],e.prototype,"sprBtnBetTai",void 0),a([f(cc.Node)],e.prototype,"bgGame",void 0),a([f(cc.Node)],e.prototype,"alertToast",void 0),a([f(cc.Node)],e.prototype,"nodeHistoryShort",void 0),a([f(cc.Node)],e.prototype,"popupContainer",void 0),a([f(cc.Node)],e.prototype,"bg_Score",void 0),a([f(cc.Node)],e.prototype,"bgLight",void 0),a([f(cc.Node)],e.prototype,"nodeBat",void 0),a([f(cc.Node)],e.prototype,"bgLighting",void 0),a([f(cc.Node)],e.prototype,"bgTime",void 0),a([f(cc.EditBox)],e.prototype,"edbChat",void 0),a([f(cc.ScrollView)],e.prototype,"scrChat",void 0),a([f(sp.Skeleton)],e.prototype,"dice1",void 0),a([f(sp.Skeleton)],e.prototype,"dice2",void 0),a([f(sp.Skeleton)],e.prototype,"dice3",void 0),a([f(sp.Skeleton)],e.prototype,"dragon",void 0),a([f(sp.Skeleton)],e.prototype,"table",void 0),a([f([cc.SpriteFrame])],e.prototype,"sprDots",void 0),i=a([y],e)}(c.default);i.default=T,cc._RF.pop()},{"../../Loading/src/BundleControl":void 0,"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/MiniGame":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/Tween":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/TaiXiuSieuToc.NetworkClient":void 0,"./TaiXiuSieuToc.Cmd":"TaiXiuSieuToc.Cmd"}]},{},["TaiXiuST.PopupDetailHistory","TaiXiuST.PopupHistory","TaiXiuST.PopupHonors","TaiXiuST.PopupSoiCau","TaiXiuSieuToc.Cmd","TaiXiuSieuToc.Controller"]);