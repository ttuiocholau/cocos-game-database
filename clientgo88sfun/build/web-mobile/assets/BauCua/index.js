window.__require=function t(e,o,i){function n(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return n(e[a][1][t]||t)},p,p.exports,t,e,o,i)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({"BauCua.BauCuaController":[function(t,e,o){"use strict";cc._RF.push(e,"9595cfEBbBFD7c/2AZ2TcQp","BauCua.BauCuaController");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ButtonBet=void 0;var a=t("../../Loading/src/Configs"),c=t("../../Lobby/LobbyScript/MiniGame"),s=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/BroadcastReceiver"),p=t("../../Lobby/LobbyScript/Script/common/ScrollViewControl"),u=t("../../Lobby/LobbyScript/Script/common/Utils"),d=t("../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient"),b=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),h=t("./BauCua.ButtonPayBet"),f=t("./BauCua.Cmd"),y=cc.tween,g=cc._decorator,m=g.ccclass,v=g.property,B=function(){function t(){this.button=null,this.sfNormal=null,this.sfActive=null,this.border_chip=null,this._isActive=!1}return t.prototype.setActive=function(t){this._isActive=t,this.button.interactable=!t,t&&(this.border_chip.node.x=this.button.node.x)},r([v(cc.Button)],t.prototype,"button",void 0),r([v(cc.SpriteFrame)],t.prototype,"sfNormal",void 0),r([v(cc.SpriteFrame)],t.prototype,"sfActive",void 0),r([v(sp.Skeleton)],t.prototype,"border_chip",void 0),r([m("BauCua.ButtonBet")],t)}();o.ButtonBet=B;var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprSmallDices=[],e.scrollChip=[],e.sprResultDices=[],e.lblSession=null,e.lblTime=null,e.lblToast=null,e.lblWinCoin=null,e.buttonBets=[],e.btnPayBets=[],e.nodeSoiCau=null,e.nodeHistories=null,e.itemHistoryTemplate=null,e.btnConfirm=null,e.btnCancel=null,e.btnReBet=null,e.lblsSoiCau=[],e.popups=[],e.popupContainer=null,e.scrHistory=null,e.bowl=null,e.listBet=[1e3,5e3,1e4,5e4,1e5,5e5,1e6,5e6,1e7],e.roomId=0,e.betIdx=0,e.isBetting=!1,e.historiesData=[],e.beted=[0,0,0,0,0,0],e.betting=[0,0,0,0,0,0],e.inited=!1,e.sprResultDice=null,e.percentScroll=0,e.popupHonor=null,e.popupHistory=null,e.popupGuide=null,e.baucuaBundle=null,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.sprResultDice=this.bowl.getChildByName("sprResult")},e.prototype.start=function(){var t=this;this.timeBet=Date.now(),o.instance=this,this.percentScroll=0,this.scrollChip.scrollToPercentHorizontal(this.percentScroll,.1),this.itemHistoryTemplate.active=!1;for(var e=function(e){i.buttonBets[e].button.node.on("click",function(){t.betIdx=e,s.default.instance.showBgMiniGame("BauCua");for(var o=0;o<t.buttonBets.length;o++)t.buttonBets[o].setActive(o==t.betIdx)})},i=this,n=0;n<this.buttonBets.length;n++)e(n);var r=function(e){c.btnPayBets[e].node.on("click",function(){s.default.instance.showBgMiniGame("BauCua"),t.actConfirm(e)})},c=this;for(n=0;n<this.btnPayBets.length;n++)r(n);l.default.register(l.default.USER_LOGOUT,function(){t.node.active&&t.dismiss()},this),d.default.getInstance().addOnClose(function(){t.node.active&&t.dismiss()},this),d.default.getInstance().addListener(function(e){if(t.node.active)switch(new b.default(e).getCmdId()){case f.default.Code.INFO:t.inited=!0;var i=new f.default.ReceiveInfo(e);t.isBetting=i.bettingState,t.lblSession.string="#"+i.referenceId,t.lblTime.string=t.longToTime(i.remainTime);for(var n=i.potData.split(","),r=i.betData.split(","),c=0;c<t.btnPayBets.length;c++)(d=t.btnPayBets[c]).lblTotal.string=t.moneyToK(parseInt(n[c])),d.lblBeted.string=t.moneyToK(parseInt(r[c])),d.overlay.active=!0,d.button.interactable=t.isBetting,d.lblFactor.node.active=!1,t.beted[c]=parseInt(r[c]);if(t.isBetting||(t.btnPayBets[i.dice1].overlay.active=!1,t.btnPayBets[i.dice2].overlay.active=!1,t.btnPayBets[i.dice3].overlay.active=!1,i.xValue>1&&(t.btnPayBets[i.xPot].lblFactor.node.active=!0,t.btnPayBets[i.xPot].lblFactor.string="x"+i.xValue)),""!=i.lichSuPhien){var p=i.lichSuPhien.split(",");for(c=0;c<p.length;c++)t.historiesData.push([parseInt(p[c]),parseInt(p[++c]),parseInt(p[++c])]),++c,++c;t.loadHistory(t.historiesData),t.caculatorSoiCau()}break;case f.default.Code.START_NEW_GAME:for(i=new f.default.ReceiveNewGame(e),t.actStartNewGame(),t.lblSession.string="#"+i.referenceId,c=0;c<t.btnPayBets.length;c++)(d=t.btnPayBets[c]).lblBeted.string="0",d.lblBeted.node.color=cc.Color.WHITE,d.lblTotal.string="0",d.overlay.active=!1,d.button.interactable=!0,d.lblFactor.node.active=!1;t.beted=[0,0,0,0,0,0],t.betting=[0,0,0,0,0,0],t.btnConfirm.interactable=!0,t.btnCancel.interactable=!0,t.btnReBet.interactable=!0;break;case f.default.Code.UPDATE:for(i=new f.default.ReceiveUpdate(e),t.lblTime.string=t.longToTime(i.remainTime),t.isBetting=1==i.bettingState,n=i.potData.split(","),c=0;c<t.btnPayBets.length;c++)(d=t.btnPayBets[c]).lblTotal.string=t.moneyToK(parseInt(n[c])),t.isBetting?(d.overlay.active=!1,d.lblFactor.node.active=!1):(d.button.interactable=!1,d.lblBeted.string=t.moneyToK(t.beted[c]),d.lblBeted.node.color=cc.Color.WHITE);break;case f.default.Code.RESULT:i=new f.default.ReceiveResult(e),t.atcShowResult(i);break;case f.default.Code.PRIZE:i=new f.default.ReceivePrize(e),a.default.Login.Coin=i.currentMoney,l.default.send(l.default.USER_UPDATE_COIN),t.lblWinCoin.node.stopAllActions(),t.lblWinCoin.node.setPosition(-26,-16),t.lblWinCoin.node.opacity=0,t.lblWinCoin.string="+"+u.default.formatNumber(i.prize),t.lblWinCoin.node.active=!0,t.lblWinCoin.node.runAction(cc.sequence(cc.spawn(cc.fadeIn(.2),cc.moveBy(2,cc.v2(0,100))),cc.fadeOut(.15),cc.callFunc(function(){t.lblWinCoin.node.active=!1})));break;case f.default.Code.BET:switch((i=new f.default.ReceiveBet(e)).result){case 100:t.showToast(s.default.instance.getTextLang("txt_bet_error2"));break;case 101:t.showToast(s.default.instance.getTextLang("txt_bet_error3"));break;case 102:t.showToast(s.default.instance.getTextLang("txt_not_enough"));break;case 103:t.showToast("Ch\u1ec9 \u0111\u01b0\u1ee3c c\u01b0\u1ee3c t\u1ed1i \u0111a 1000.000."),t.btnConfirm.interactable=!0,t.btnCancel.interactable=!0,t.btnReBet.interactable=!0}if(1!=i.result)break;for(a.default.Login.Coin=i.currentMoney,l.default.send(l.default.USER_UPDATE_COIN),c=0;c<t.btnPayBets.length;c++){var d;t.beted[c]+=t.betting[c],t.betting[c]=0,(d=t.btnPayBets[c]).lblBeted.string=t.moneyToK(t.beted[c]),d.lblBeted.node.color=cc.Color.WHITE}o.lastBeted=t.beted,t.showToast(s.default.instance.getTextLang("txt_bet_success")),t.btnConfirm.interactable=!0,t.btnCancel.interactable=!0,t.btnReBet.interactable=!0}},this)},e.prototype.onBtnScrollLeft=function(){this.percentScroll-=.3,this.percentScroll<=0&&(this.percentScroll=0),this.scrollChip.scrollToPercentHorizontal(this.percentScroll,.1)},e.prototype.onBtnScrollRight=function(){this.percentScroll+=.3,this.percentScroll>=1&&(this.percentScroll=1),this.scrollChip.scrollToPercentHorizontal(this.percentScroll,.1)},e.prototype.spin=function(t){for(var e=0;e<this.btnPayBets.length;e++)(o=this.btnPayBets[e]).overlay.active=!1;for(e=0;e<t.length;e++){var o;(o=this.btnPayBets[t[e]]).overlay.active=!0,y(o.overlay).then(cc.blink(2,10)).start()}},e.prototype.longToTime=function(t){parseInt((t/60).toString());var e=t%60;return(e<10?"0":"")+e},e.prototype.moneyToK=function(t){return t<1e5?u.default.formatNumber(t):u.default.formatMoney(t)},e.prototype.addHistory=function(t){this.historiesData.push(t)},e.prototype.loadHistory=function(t){var e=this,o=t.slice();o.reverse(),this.scrHistory.setDataList(function(t,o){t.active=!0,t.getChildByName("dice1").getComponent(cc.Sprite).spriteFrame=e.sprSmallDices[o[0]],t.getChildByName("dice2").getComponent(cc.Sprite).spriteFrame=e.sprSmallDices[o[1]],t.getChildByName("dice3").getComponent(cc.Sprite).spriteFrame=e.sprSmallDices[o[2]]},o)},e.prototype.caculatorSoiCau=function(){for(var t=[0,0,0,0,0,0],e=0;e<this.historiesData.length;e++)for(var o=this.historiesData[e],i=0;i<3;i++)t[o[i]]++;for(e=0;e<this.lblsSoiCau.length;e++)this.lblsSoiCau[e].string=t[e].toString()},e.prototype.showToast=function(t){this.lblToast.string=t;var e=this.lblToast.node.parent;e.stopAllActions(),e.active=!0,e.opacity=0,e.runAction(cc.sequence(cc.fadeIn(.1),cc.delayTime(2),cc.fadeOut(.2),cc.callFunc(function(){e.active=!1})))},e.prototype.actSoiCau=function(){this.nodeHistories.active=!this.nodeHistories.active,this.nodeSoiCau.active=!this.nodeHistories.active},e.prototype.actCancel=function(){if(this.inited)for(var t=0;t<this.btnPayBets.length;t++){var e=this.btnPayBets[t];e.lblBeted.node.color=cc.Color.WHITE,e.lblBeted.string=this.moneyToK(this.beted[t]),this.betting[t]=0}},e.prototype.actConfirm=function(t){if(this.inited)if(this.isBetting)if(a.default.Login.Coin<this.listBet[this.betIdx])this.showToast(s.default.instance.getTextLang("txt_not_enough"));else if(Date.now()-this.timeBet<1e3)this.showToast(s.default.instance.getTextLang("txt_notify_fast_action"));else{this.betting[t]+=this.listBet[this.betIdx];for(var e=0,o=0;o<this.betting.length;o++)e+=this.betting[o];e<=0?this.showToast(s.default.instance.getTextLang("txt_bet_error4")):(this.btnPayBets[t].lblBeted.string=this.moneyToK(this.betting[t]+this.beted[t]),this.timeBet=Date.now(),d.default.getInstance().send(new f.default.SendBet(this.betting.toString())),this.btnConfirm.interactable=!1,this.btnCancel.interactable=!1,this.btnReBet.interactable=!1)}else this.showToast(s.default.instance.getTextLang("txt_bet_error3"))},e.prototype.actReBet=function(){if(this.inited)if(this.isBetting)if(null!=o.lastBeted){for(var t=0,e=0;e<this.beted.length;e++)t+=this.beted[e];t>0?this.showToast(s.default.instance.getTextLang("txt_bet_error6")):(this.betting=o.lastBeted,d.default.getInstance().send(new f.default.SendBet(o.lastBeted.toString())),this.btnConfirm.interactable=!1,this.btnCancel.interactable=!1,this.btnReBet.interactable=!1)}else this.showToast(s.default.instance.getTextLang("txt_bet_error5"));else this.showToast(s.default.instance.getTextLang("txt_bet_error3"))},e.prototype.show=function(){if(this.node.active)this.reOrder();else{t.prototype.show.call(this),s.default.instance.showBgMiniGame("BauCua"),this.inited=!1,this.lblToast.node.parent.active=!1,this.lblWinCoin.node.active=!1,this.betIdx=0,this.betting=[0,0,0,0,0,0],this.beted=[0,0,0,0,0,0],this.historiesData=[],this.nodeHistories.active=!0,this.nodeSoiCau.active=!this.nodeHistories.active,this.nodeHistories.getComponent(cc.ScrollView).scrollToTop(0);for(var e=0;e<this.buttonBets.length;e++)this.buttonBets[e].setActive(e==this.betIdx);for(e=0;e<this.btnPayBets.length;e++){var o=this.btnPayBets[e];o.lblBeted.string="0",o.lblBeted.node.color=cc.Color.WHITE,o.lblTotal.string="0",o.lblFactor.node.active=!1,o.overlay.active=!0,o.button.interactable=!1}d.default.getInstance().send(new f.default.SendScribe(this.roomId))}},e.prototype.dismiss=function(){t.prototype.dismiss.call(this);for(var e=0;e<this.popups.length;e++)this.popups[e].active=!1;s.default.instance.hideGameMini("BauCua"),d.default.getInstance().send(new f.default.SendUnScribe(this.roomId))},e.prototype._onShowed=function(){t.prototype._onShowed},e.prototype.reOrder=function(){t.prototype.reOrder.call(this)},e.prototype.atcShowResult=function(t){var e=this;this.sprResultDice.children[0].getComponent(cc.Sprite).spriteFrame=this.sprResultDices[t.dice1],this.sprResultDice.children[1].getComponent(cc.Sprite).spriteFrame=this.sprResultDices[t.dice2],this.sprResultDice.children[2].getComponent(cc.Sprite).spriteFrame=this.sprResultDices[t.dice3];var o=this.bowl.getChildByName("bowl");cc.Tween.stopAllByTarget(o),y(o).to(.7,{y:o.y+50,opacity:150,scale:1.1},{easing:cc.easing.sineIn}).call(function(){e.historiesData.push([t.dice1,t.dice2,t.dice3]),e.loadHistory(e.historiesData),e.caculatorSoiCau(),t.xValue>1&&(e.btnPayBets[t.xPot].lblFactor.node.active=!0,e.btnPayBets[t.xPot].lblFactor.string="x"+t.xValue),e.spin([t.dice1,t.dice2,t.dice3]),o.active=!1}).start()},e.prototype.actStartNewGame=function(){var t=this,e=this.bowl.getChildByName("bowl");e.active=!0,y(e).set({opacity:255,y:0,scale:1}).start();var o=this.bowl.getPosition(),i=y().to(.1,{x:o.x-20,scale:1.1}).to(.1,{x:o.x}).to(.1,{x:o.x+20}).to(.1,{x:o.x,scale:1});cc.Tween.stopAllByTarget(this.bowl),y(this.bowl).repeat(5,i).call(function(){t.showToast(s.default.instance.getTextLang("txt_bet_invite"))}).start()},e.prototype.actPopupHonors=function(){var t=this;s.default.instance.showBgMiniGame("BauCua"),null==this.popupHonor?this.baucuaBundle.load("res/Prefabs/PopupHonors",cc.Prefab,function(){},function(e,o){t.popupHonor=cc.instantiate(o).getComponent("BauCua.PopupHonors"),t.popupHonor.node.parent=t.popupContainer,t.popupHonor.node.active=!0,t.popupHonor.show(),t.popups.push(t.popupHonor.node)}):this.popupHonor.show()},e.prototype.actPopupHistory=function(){var t=this;s.default.instance.showBgMiniGame("BauCua"),null==this.popupHistory?this.baucuaBundle.load("res/Prefabs/PopupHistory",cc.Prefab,function(){},function(e,o){t.popupHistory=cc.instantiate(o).getComponent("BauCua.PopupHistory"),t.popupHistory.node.parent=t.popupContainer,t.popupHistory.node.active=!0,t.popupHistory.show(),t.popups.push(t.popupHistory.node)}):this.popupHistory.show()},e.prototype.actPopupGuide=function(){var t=this;s.default.instance.showBgMiniGame("BauCua"),null==this.popupGuide?this.baucuaBundle.load("res/Prefabs/PopupGuide",cc.Prefab,function(){},function(e,o){t.popupGuide=cc.instantiate(o).getComponent("Dialog"),t.popupGuide.node.parent=t.popupContainer,t.popupGuide.node.active=!0,t.popupGuide.show(),t.popups.push(t.popupGuide.node)}):this.popupGuide.show()},e.instance=null,e.lastBeted=null,r([v([cc.SpriteFrame])],e.prototype,"sprSmallDices",void 0),r([v([cc.ScrollView])],e.prototype,"scrollChip",void 0),r([v([cc.SpriteFrame])],e.prototype,"sprResultDices",void 0),r([v(cc.Label)],e.prototype,"lblSession",void 0),r([v(cc.Label)],e.prototype,"lblTime",void 0),r([v(cc.Label)],e.prototype,"lblToast",void 0),r([v(cc.Label)],e.prototype,"lblWinCoin",void 0),r([v([B])],e.prototype,"buttonBets",void 0),r([v([h.default])],e.prototype,"btnPayBets",void 0),r([v(cc.Node)],e.prototype,"nodeSoiCau",void 0),r([v(cc.Node)],e.prototype,"nodeHistories",void 0),r([v(cc.Node)],e.prototype,"itemHistoryTemplate",void 0),r([v(cc.Button)],e.prototype,"btnConfirm",void 0),r([v(cc.Button)],e.prototype,"btnCancel",void 0),r([v(cc.Button)],e.prototype,"btnReBet",void 0),r([v([cc.Label])],e.prototype,"lblsSoiCau",void 0),r([v([cc.Node])],e.prototype,"popups",void 0),r([v(cc.Node)],e.prototype,"popupContainer",void 0),r([v(p.default)],e.prototype,"scrHistory",void 0),r([v(cc.Node)],e.prototype,"bowl",void 0),o=r([m],e)}(c.default);o.default=C,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Lobby/LobbyScript/MiniGame":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/BroadcastReceiver":void 0,"../../Lobby/LobbyScript/Script/common/ScrollViewControl":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"../../Lobby/LobbyScript/Script/networks/MiniGameNetworkClient":void 0,"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"./BauCua.ButtonPayBet":"BauCua.ButtonPayBet","./BauCua.Cmd":"BauCua.Cmd"}],"BauCua.ButtonPayBet":[function(t,e,o){"use strict";cc._RF.push(e,"ee505UX8HtJs7o/zt+ekkAc","BauCua.ButtonPayBet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e.lblTotal=null,e.lblBeted=null,e.overlay=null,e.lblFactor=null,e}return n(e,t),r([s(cc.Button)],e.prototype,"button",void 0),r([s(cc.Label)],e.prototype,"lblTotal",void 0),r([s(cc.Label)],e.prototype,"lblBeted",void 0),r([s(cc.Node)],e.prototype,"overlay",void 0),r([s(cc.Label)],e.prototype,"lblFactor",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"BauCua.Cmd":[function(t,e,o){"use strict";cc._RF.push(e,"ac6f53uNYxDW4HGvzMg8Vl8","BauCua.Cmd");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.cmd=void 0;var r,a=t("../../Lobby/LobbyScript/Script/networks/Network.InPacket"),c=t("../../Lobby/LobbyScript/Script/networks/Network.OutPacket");(function(t){var e=function(){function t(){}return t.SCRIBE=5001,t.UNSCRIBE=5002,t.CHANGE_ROOM=5003,t.BET=5004,t.INFO=5005,t.START_NEW_GAME=5007,t.UPDATE=5006,t.RESULT=5008,t.PRIZE=5009,t}();t.Code=e;var o=function(t){function o(o){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.SCRIBE),i.packHeader(),i.putByte(o),i.updateSize(),i}return n(o,t),o}(c.default);t.SendScribe=o;var i=function(t){function o(o){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.UNSCRIBE),i.packHeader(),i.putByte(o),i.updateSize(),i}return n(o,t),o}(c.default);t.SendUnScribe=i;var r=function(t){function o(o,i){var n=t.call(this)||this;return n.initData(100),n.setControllerId(1),n.setCmdId(e.CHANGE_ROOM),n.packHeader(),n.putByte(o),n.putByte(i),n.updateSize(),n}return n(o,t),o}(c.default);t.SendChangeRoom=r;var s=function(t){function o(o){var i=t.call(this)||this;return i.initData(100),i.setControllerId(1),i.setCmdId(e.BET),i.packHeader(),i.putString(o),i.updateSize(),i}return n(o,t),o}(c.default);t.SendBet=s;var l=function(t){function e(e){var o=t.call(this,e)||this;return o.result=0,o.currentMoney=0,o.result=o.getByte(),o.currentMoney=o.getLong(),o}return n(e,t),e}(a.default);t.ReceiveBet=l;var p=function(t){function e(e){var o=t.call(this,e)||this;return o.referenceId=0,o.remainTime=0,o.bettingState=!1,o.potData="",o.betData="",o.lichSuPhien="",o.dice1=0,o.dice2=0,o.dice3=0,o.xPot=0,o.xValue=0,o.room=0,o.referenceId=o.getLong(),o.remainTime=o.getByte(),o.bettingState=o.getBool(),o.potData=o.getString(),o.betData=o.getString(),o.lichSuPhien=o.getString(),o.dice1=o.getByte(),o.dice2=o.getByte(),o.dice3=o.getByte(),o.xPot=o.getByte(),o.xValue=o.getByte(),o.room=o.getByte(),o}return n(e,t),e}(a.default);t.ReceiveInfo=p;var u=function(t){function e(e){var o=t.call(this,e)||this;return o.referenceId=0,o.referenceId=o.getLong(),o}return n(e,t),e}(a.default);t.ReceiveNewGame=u;var d=function(t){function e(e){var o=t.call(this,e)||this;return o.potData="",o.remainTime=0,o.bettingState=0,o.potData=o.getString(),o.remainTime=o.getByte(),o.bettingState=o.getByte(),o}return n(e,t),e}(a.default);t.ReceiveUpdate=d;var b=function(t){function e(e){var o=t.call(this,e)||this;return o.dice1=0,o.dice2=0,o.dice3=0,o.xPot=0,o.xValue=0,o.dice1=o.getByte(),o.dice2=o.getByte(),o.dice3=o.getByte(),o.xPot=o.getByte(),o.xValue=o.getByte(),o}return n(e,t),e}(a.default);t.ReceiveResult=b;var h=function(t){function e(e){var o=t.call(this,e)||this;return o.prize=0,o.currentMoney=0,o.room=0,o.prize=o.getLong(),o.currentMoney=o.getLong(),o.room=o.getByte(),o}return n(e,t),e}(a.default);t.ReceivePrize=h})(r=o.cmd||(o.cmd={})),o.default=r,cc._RF.pop()},{"../../Lobby/LobbyScript/Script/networks/Network.InPacket":void 0,"../../Lobby/LobbyScript/Script/networks/Network.OutPacket":void 0}],"BauCua.PopupHistory":[function(t,e,o){"use strict";cc._RF.push(e,"c5aeaULcr1B6Kb50KQNLQjR","BauCua.PopupHistory");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Loading/src/Configs"),c=t("../../Loading/src/Http"),s=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/Dialog"),p=t("../../Lobby/LobbyScript/Script/common/ScrollViewControl"),u=t("../../Lobby/LobbyScript/Script/common/Utils"),d=t("./BauCua.BauCuaController"),b=cc._decorator,h=b.ccclass,f=b.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrList=null,e.page=1,e.maxPage=1,e.dataHistory=[],e.totalPageLoaded=0,e}return n(e,t),e.prototype.onLoad=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="BauCua.PopupHistory",t.handler="onScrollEvent",this.scrList.scrollView.scrollEvents.push(t)},e.prototype.show=function(){t.prototype.show.call(this),this.dataHistory=[],this.totalPageLoaded=0,this.scrList.setStateItem(!1)},e.prototype.dismiss=function(){t.prototype.dismiss.call(this),this.scrList.setStateItem(!1)},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.page=1,this.maxPage=1,this.loadData()},e.prototype.actNextPage=function(){this.page<this.maxPage&&(this.page++,this.loadData())},e.prototype.actPrevPage=function(){this.page>1&&(this.page--,this.loadData())},e.prototype.loadData=function(t){var e=this;void 0===t&&(t=!0),s.default.instance.showLoading(!0),c.default.get(a.default.App.API,{c:121,mt:a.default.App.MONEY_TYPE,p:this.page,un:a.default.Login.Nickname},function(o,i){var n;if(s.default.instance.showLoading(!1),null==o&&i.success){e.maxPage=i.totalPages,e.totalPageLoaded<e.maxPage&&(n=e.dataHistory).push.apply(n,i.transactions),e.totalPageLoaded++;var r=e.dataHistory.slice();t?e.scrList.setDataList(e.setItemData.bind(e),r):e.scrList.updateDataList(r)}})},e.prototype.setItemData=function(t,e){t.getChildByName("bg").opacity=e.index%2==0?10:0,t.getChildByName("Session").getComponent(cc.Label).string="#"+e.referenceId,t.getChildByName("Time").getComponent(cc.Label).string=e.timestamp;var o=e.betValues[0]+e.betValues[1]+e.betValues[2]+e.betValues[3]+e.betValues[4]+e.betValues[5];t.getChildByName("Bet").getComponent(cc.Label).string=u.default.formatNumber(o);var i=e.prizes[0]+e.prizes[1]+e.prizes[2]+e.prizes[3]+e.prizes[4]+e.prizes[5];t.getChildByName("Win").getComponent(cc.Label).string=u.default.formatNumber(i);var n=e.dices.split(","),r=t.getChildByName("Result");r.children[0].getComponent(cc.Sprite).spriteFrame=d.default.instance.sprResultDices[n[0]],r.children[1].getComponent(cc.Sprite).spriteFrame=d.default.instance.sprResultDices[n[1]],r.children[2].getComponent(cc.Sprite).spriteFrame=d.default.instance.sprResultDices[n[2]],t.active=!0},e.prototype.onScrollEvent=function(t,e){e==cc.ScrollView.EventType.SCROLL_TO_BOTTOM&&this.page<this.maxPage&&(this.page++,this.loadData(!1))},r([f(p.default)],e.prototype,"scrList",void 0),r([h],e)}(l.default);o.default=y,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Loading/src/Http":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/ScrollViewControl":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0,"./BauCua.BauCuaController":"BauCua.BauCuaController"}],"BauCua.PopupHonors":[function(t,e,o){"use strict";cc._RF.push(e,"abd9cV9pOdGNajg/VVqxppb","BauCua.PopupHonors");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Loading/src/Configs"),c=t("../../Loading/src/Http"),s=t("../../Lobby/LobbyScript/Script/common/App"),l=t("../../Lobby/LobbyScript/Script/common/Dialog"),p=t("../../Lobby/LobbyScript/Script/common/Utils"),u=cc._decorator,d=u.ccclass,b=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemTemplate=null,e.items=new Array,e}return n(e,t),e.prototype.show=function(){t.prototype.show.call(this);for(var e=0;e<this.items.length;e++)this.items[e].active=!1;null!=this.itemTemplate&&(this.itemTemplate.active=!1)},e.prototype.dismiss=function(){t.prototype.dismiss.call(this);for(var e=0;e<this.items.length;e++)this.items[e].active=!1},e.prototype._onShowed=function(){t.prototype._onShowed.call(this),this.loadData()},e.prototype.loadData=function(){var t=this;s.default.instance.showLoading(!0),c.default.get(a.default.App.API,{c:120,mt:a.default.App.MONEY_TYPE},function(e,o){if(s.default.instance.showLoading(!1),null==e&&o.success){if(0==t.items.length){for(var i=0;i<10;i++)(r=cc.instantiate(t.itemTemplate)).parent=t.itemTemplate.parent,t.items.push(r);t.itemTemplate.destroy(),t.itemTemplate=null}for(var n=0;n<t.items.length;n++){var r=t.items[n];if(n<o.topBC.length){var a=o.topBC[n];r.getChildByName("bg").opacity=n%2==0?10:0,r.getChildByName("Rank").getComponent(cc.Label).string=(n+1).toString(),r.getChildByName("Account").getComponent(cc.Label).string=a.username,r.getChildByName("Win").getComponent(cc.Label).string=p.default.formatNumber(a.money),r.active=!0}else r.active=!1}}})},r([b(cc.Node)],e.prototype,"itemTemplate",void 0),r([d],e)}(l.default);o.default=h,cc._RF.pop()},{"../../Loading/src/Configs":void 0,"../../Loading/src/Http":void 0,"../../Lobby/LobbyScript/Script/common/App":void 0,"../../Lobby/LobbyScript/Script/common/Dialog":void 0,"../../Lobby/LobbyScript/Script/common/Utils":void 0}]},{},["BauCua.BauCuaController","BauCua.ButtonPayBet","BauCua.Cmd","BauCua.PopupHistory","BauCua.PopupHonors"]);